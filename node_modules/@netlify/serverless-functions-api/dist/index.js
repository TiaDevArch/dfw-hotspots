import{createRequire}from"module";const require=createRequire(import.meta.url);
var SA=Object.create;var Xn=Object.defineProperty;var fA=Object.getOwnPropertyDescriptor;var dA=Object.getOwnPropertyNames;var AA=Object.getPrototypeOf,hA=Object.prototype.hasOwnProperty;var qc=t=>{throw TypeError(t)};var G=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var E=(t,e)=>()=>(t&&(e=t(t=0)),e);var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),pe=(t,e)=>{for(var r in e)Xn(t,r,{get:e[r],enumerable:!0})},jc=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of dA(e))!hA.call(t,o)&&o!==r&&Xn(t,o,{get:()=>e[o],enumerable:!(n=fA(e,o))||n.enumerable});return t};var Gt=(t,e,r)=>(r=t!=null?SA(AA(t)):{},jc(e||!t||!t.__esModule?Xn(r,"default",{value:t,enumerable:!0}):r,t)),Ue=t=>jc(Xn({},"__esModule",{value:!0}),t);var Kc=(t,e,r)=>e.has(t)||qc("Cannot "+r);var Wn=(t,e,r)=>(Kc(t,e,"read from private field"),r?r.call(t):e.get(t)),ea=(t,e,r)=>e.has(t)?qc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ta=(t,e,r,n)=>(Kc(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var zc,Jc=E(()=>{zc=typeof globalThis=="object"?globalThis:global});var Qc=E(()=>{Jc()});var Zc=E(()=>{Qc()});var Xe,ra=E(()=>{Xe="1.9.0"});function gA(t){var e=new Set([t]),r=new Set,n=t.match(eu);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return function(c){return c===t};function s(i){return r.add(i),!1}function a(i){return e.add(i),!0}return function(c){if(e.has(c))return!0;if(r.has(c))return!1;var u=c.match(eu);if(!u)return s(c);var p={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return p.prerelease!=null||o.major!==p.major?s(c):o.major===0?o.minor===p.minor&&o.patch<=p.patch?a(c):s(c):o.minor<=p.minor?a(c):s(c)}}var eu,tu,ru=E(()=>{ra();eu=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;tu=gA(Xe)});function Be(t,e,r,n){var o;n===void 0&&(n=!1);var s=xr[Mr]=(o=xr[Mr])!==null&&o!==void 0?o:{version:Xe};if(!n&&s[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(a.stack||a.message),!1}if(s.version!==Xe){var a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+t+" does not match previously registered API v"+Xe);return r.error(a.stack||a.message),!1}return s[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+Xe+"."),!0}function Oe(t){var e,r,n=(e=xr[Mr])===null||e===void 0?void 0:e.version;if(!(!n||!tu(n)))return(r=xr[Mr])===null||r===void 0?void 0:r[t]}function Fe(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+Xe+".");var r=xr[Mr];r&&delete r[t]}var vA,Mr,xr,St=E(()=>{Zc();ra();ru();vA=Xe.split(".")[0],Mr=Symbol.for("opentelemetry.js.api."+vA),xr=zc});function yr(t,e,r){var n=Oe("diag");if(n)return r.unshift(e),n[t].apply(n,NA([],OA(r),!1))}var OA,NA,nu,ou=E(()=>{St();OA=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(i){a={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},NA=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},nu=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yr("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yr("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yr("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yr("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yr("verbose",this._namespace,e)},t})()});var F,zn=E(()=>{(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(F||(F={}))});function su(t,e){t<F.NONE?t=F.NONE:t>F.ALL&&(t=F.ALL),e=e||{};function r(n,o){var s=e[n];return typeof s=="function"&&t>=o?s.bind(e):function(){}}return{error:r("error",F.ERROR),warn:r("warn",F.WARN),info:r("info",F.INFO),debug:r("debug",F.DEBUG),verbose:r("verbose",F.VERBOSE)}}var au=E(()=>{zn()});var PA,CA,LA,re,ft=E(()=>{ou();au();zn();St();PA=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(i){a={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},CA=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},LA="diag",re=(function(){function t(){function e(o){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var i=Oe("diag");if(i)return i[o].apply(i,CA([],PA(s),!1))}}var r=this,n=function(o,s){var a,i,c;if(s===void 0&&(s={logLevel:F.INFO}),o===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((a=u.stack)!==null&&a!==void 0?a:u.message),!1}typeof s=="number"&&(s={logLevel:s});var p=Oe("diag"),_=su((i=s.logLevel)!==null&&i!==void 0?i:F.INFO,o);if(p&&!s.suppressOverrideMessage){var l=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+l),_.warn("Current logger will overwrite one already registered from "+l)}return Be("diag",_,r,!0)};r.setLogger=n,r.disable=function(){Fe(LA,r)},r.createComponentLogger=function(o){return new nu(o)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})()});var IA,MA,iu,cu=E(()=>{IA=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(i){a={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},MA=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iu=(function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=IA(e,2),n=r[0],o=r[1];return[n,o]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var s=new t(this._entries);try{for(var a=MA(n),i=a.next();!i.done;i=a.next()){var c=i.value;s._entries.delete(c)}}catch(u){e={error:u}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return s},t.prototype.clear=function(){return new t},t})()});var uu,pu=E(()=>{uu=Symbol("BaggageEntryMetadata")});function Eu(t){return t===void 0&&(t={}),new iu(new Map(Object.entries(t)))}function Jn(t){return typeof t!="string"&&(xA.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:uu,toString:function(){return t}}}var xA,na=E(()=>{ft();cu();pu();xA=re.instance()});function Ne(t){return Symbol.for(t)}var yA,Qn,Dr=E(()=>{yA=(function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,o){var s=new t(r._currentContext);return s._currentContext.set(n,o),s},r.deleteValue=function(n){var o=new t(r._currentContext);return o._currentContext.delete(n),o}}return t})(),Qn=new yA});var oa,_u,lu=E(()=>{oa=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],_u=(function(){function t(){function e(n){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];if(console){var a=console[n];if(typeof a!="function"&&(a=console.log),typeof a=="function")return a.apply(console,o)}}}for(var r=0;r<oa.length;r++)this[oa[r].n]=e(oa[r].c)}return t})()});function Tu(){return aa}var dt,DA,Zn,UA,bA,wA,VA,sa,GA,BA,FA,aa,HA,kA,$A,YA,qA,jA,KA,ia=E(()=>{dt=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),DA=(function(){function t(){}return t.prototype.createGauge=function(e,r){return kA},t.prototype.createHistogram=function(e,r){return $A},t.prototype.createCounter=function(e,r){return HA},t.prototype.createUpDownCounter=function(e,r){return YA},t.prototype.createObservableGauge=function(e,r){return jA},t.prototype.createObservableCounter=function(e,r){return qA},t.prototype.createObservableUpDownCounter=function(e,r){return KA},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t})(),Zn=(function(){function t(){}return t})(),UA=(function(t){dt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e})(Zn),bA=(function(t){dt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e})(Zn),wA=(function(t){dt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e})(Zn),VA=(function(t){dt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e})(Zn),sa=(function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t})(),GA=(function(t){dt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(sa),BA=(function(t){dt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(sa),FA=(function(t){dt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(sa),aa=new DA,HA=new UA,kA=new wA,$A=new VA,YA=new bA,qA=new GA,jA=new BA,KA=new FA});var eo,Su=E(()=>{(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(eo||(eo={}))});var to,ro,ca=E(()=>{to={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},ro={set:function(t,e,r){t!=null&&(t[e]=r)}}});var XA,WA,fu,du=E(()=>{Dr();XA=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(i){a={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},WA=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},fu=(function(){function t(){}return t.prototype.active=function(){return Qn},t.prototype.with=function(e,r,n){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return r.call.apply(r,WA([n],XA(o),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})()});var zA,JA,ua,QA,et,Ur=E(()=>{du();St();ft();zA=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(i){a={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},JA=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},ua="context",QA=new fu,et=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return Be(ua,e,re.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return(o=this._getContextManager()).with.apply(o,JA([e,r,n],zA(s),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return Oe(ua)||QA},t.prototype.disable=function(){this._getContextManager().disable(),Fe(ua,re.instance())},t})()});var b,pa=E(()=>{(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(b||(b={}))});var br,wr,Bt,no=E(()=>{pa();br="0000000000000000",wr="00000000000000000000000000000000",Bt={traceId:wr,spanId:br,traceFlags:b.NONE}});var tt,oo=E(()=>{no();tt=(function(){function t(e){e===void 0&&(e=Bt),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t})()});function so(t){return t.getValue(Ea)||void 0}function Au(){return so(et.getInstance().active())}function Vr(t,e){return t.setValue(Ea,e)}function hu(t){return t.deleteValue(Ea)}function mu(t,e){return Vr(t,new tt(e))}function ao(t){var e;return(e=so(t))===null||e===void 0?void 0:e.spanContext()}var Ea,_a=E(()=>{Dr();oo();Ur();Ea=Ne("OpenTelemetry Context Key SPAN")});function be(t){return ZA.test(t)&&t!==wr}function At(t){return eh.test(t)&&t!==br}function ne(t){return be(t.traceId)&&At(t.spanId)}function Ru(t){return new tt(t)}var ZA,eh,io=E(()=>{no();oo();ZA=/^([0-9a-f]{32})$/i,eh=/^[0-9a-f]{16}$/i});function th(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var la,co,Ta=E(()=>{Ur();_a();oo();io();la=et.getInstance(),co=(function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=la.active());var o=!!(r!=null&&r.root);if(o)return new tt;var s=n&&ao(n);return th(s)&&ne(s)?new tt(s):new tt},t.prototype.startActiveSpan=function(e,r,n,o){var s,a,i;if(!(arguments.length<2)){arguments.length===2?i=r:arguments.length===3?(s=r,i=n):(s=r,a=n,i=o);var c=a??la.active(),u=this.startSpan(e,s,c),p=Vr(c,u);return la.with(p,i,void 0,u)}},t})()});var rh,uo,Sa=E(()=>{Ta();rh=new co,uo=(function(){function t(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,o){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):rh},t})()});var gu,vu=E(()=>{Ta();gu=(function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new co},t})()});var nh,Gr,fa=E(()=>{Sa();vu();nh=new gu,Gr=(function(){function t(){}return t.prototype.getTracer=function(e,r,n){var o;return(o=this.getDelegateTracer(e,r,n))!==null&&o!==void 0?o:new uo(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:nh},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,r,n)},t})()});var Ae,Ou=E(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Ae||(Ae={}))});var Ft,Nu=E(()=>{(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(Ft||(Ft={}))});var rt,Pu=E(()=>{(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(rt||(rt={}))});function Cu(t){return ah.test(t)}function Lu(t){return ih.test(t)&&!ch.test(t)}var da,oh,sh,ah,ih,ch,Iu=E(()=>{da="[_0-9a-z-*/]",oh="[a-z]"+da+"{0,255}",sh="[a-z0-9]"+da+"{0,240}@[a-z]"+da+"{0,13}",ah=new RegExp("^(?:"+oh+"|"+sh+")$"),ih=/^[ -~]{0,255}[!-~]$/,ch=/,|=/});var Mu,uh,xu,yu,Du,Uu=E(()=>{Iu();Mu=32,uh=512,xu=",",yu="=",Du=(function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+yu+e.get(n)),r},[]).join(xu)},t.prototype._parse=function(e){e.length>uh||(this._internalState=e.split(xu).reverse().reduce(function(r,n){var o=n.trim(),s=o.indexOf(yu);if(s!==-1){var a=o.slice(0,s),i=o.slice(s+1,n.length);Cu(a)&&Lu(i)&&r.set(a,i)}return r},new Map),this._internalState.size>Mu&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Mu))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t})()});function bu(t){return new Du(t)}var wu=E(()=>{Uu()});var J,Vu=E(()=>{Ur();J=et.getInstance()});var S,Gu=E(()=>{ft();S=re.instance()});var ph,Bu,Fu=E(()=>{ia();ph=(function(){function t(){}return t.prototype.getMeter=function(e,r,n){return aa},t})(),Bu=new ph});var Aa,Hu,ku=E(()=>{Fu();St();ft();Aa="metrics",Hu=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return Be(Aa,e,re.instance())},t.prototype.getMeterProvider=function(){return Oe(Aa)||Bu},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){Fe(Aa,re.instance())},t})()});var ht,$u=E(()=>{ku();ht=Hu.getInstance()});var Yu,qu=E(()=>{Yu=(function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t})()});function ma(t){return t.getValue(ha)||void 0}function ju(){return ma(et.getInstance().active())}function Ku(t,e){return t.setValue(ha,e)}function Xu(t){return t.deleteValue(ha)}var ha,Wu=E(()=>{Ur();Dr();ha=Ne("OpenTelemetry Baggage Key")});var Ra,Eh,zu,Ju=E(()=>{St();qu();ca();Wu();na();ft();Ra="propagation",Eh=new Yu,zu=(function(){function t(){this.createBaggage=Eu,this.getBaggage=ma,this.getActiveBaggage=ju,this.setBaggage=Ku,this.deleteBaggage=Xu}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return Be(Ra,e,re.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=ro),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=to),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Fe(Ra,re.instance())},t.prototype._getGlobalPropagator=function(){return Oe(Ra)||Eh},t})()});var oe,Qu=E(()=>{Ju();oe=zu.getInstance()});var ga,Zu,ep=E(()=>{St();fa();io();_a();ft();ga="trace",Zu=(function(){function t(){this._proxyTracerProvider=new Gr,this.wrapSpanContext=Ru,this.isSpanContextValid=ne,this.deleteSpan=hu,this.getSpan=so,this.getActiveSpan=Au,this.getSpanContext=ao,this.setSpan=Vr,this.setSpanContext=mu}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=Be(ga,this._proxyTracerProvider,re.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return Oe(ga)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){Fe(ga,re.instance()),this._proxyTracerProvider=new Gr},t})()});var D,tp=E(()=>{ep();D=Zu.getInstance()});var Br={};pe(Br,{DiagConsoleLogger:()=>_u,DiagLogLevel:()=>F,INVALID_SPANID:()=>br,INVALID_SPAN_CONTEXT:()=>Bt,INVALID_TRACEID:()=>wr,ProxyTracer:()=>uo,ProxyTracerProvider:()=>Gr,ROOT_CONTEXT:()=>Qn,SamplingDecision:()=>Ae,SpanKind:()=>Ft,SpanStatusCode:()=>rt,TraceFlags:()=>b,ValueType:()=>eo,baggageEntryMetadataFromString:()=>Jn,context:()=>J,createContextKey:()=>Ne,createNoopMeter:()=>Tu,createTraceState:()=>bu,default:()=>_h,defaultTextMapGetter:()=>to,defaultTextMapSetter:()=>ro,diag:()=>S,isSpanContextValid:()=>ne,isValidSpanId:()=>At,isValidTraceId:()=>be,metrics:()=>ht,propagation:()=>oe,trace:()=>D});var _h,O=E(()=>{na();Dr();lu();zn();ia();Su();ca();Sa();fa();Ou();Nu();Pu();pa();wu();io();no();Vu();Gu();$u();Qu();tp();_h={context:J,diag:S,metrics:ht,propagation:oe,trace:D}});function Ht(t){return t.setValue(va,!0)}function rp(t){return t.deleteValue(va)}function se(t){return t.getValue(va)===!0}var va,Fr=E(()=>{O();va=Ne("OpenTelemetry SDK Context Key SUPPRESS_TRACING")});var po,np=E(()=>{po="baggage"});function _o(t){return t.reduce((e,r)=>{let n=`${e}${e!==""?",":""}${r}`;return n.length>8192?e:n},"")}function lo(t){return t.getAllEntries().map(([e,r])=>{let n=`${encodeURIComponent(e)}=${encodeURIComponent(r.value)}`;return r.metadata!==void 0&&(n+=";"+r.metadata.toString()),n})}function Hr(t){let e=t.split(";");if(e.length<=0)return;let r=e.shift();if(!r)return;let n=r.indexOf("=");if(n<=0)return;let o=decodeURIComponent(r.substring(0,n).trim()),s=decodeURIComponent(r.substring(n+1).trim()),a;return e.length>0&&(a=Jn(e.join(";"))),{key:o,value:s,metadata:a}}function sp(t){return typeof t!="string"||t.length===0?{}:t.split(",").map(e=>Hr(e)).filter(e=>e!==void 0&&e.value.length>0).reduce((e,r)=>(e[r.key]=r.value,e),{})}var Oa=E(()=>{O()});var kt,ap=E(()=>{O();Fr();np();Oa();kt=class{inject(e,r,n){let o=oe.getBaggage(e);if(!o||se(e))return;let s=lo(o).filter(i=>i.length<=4096).slice(0,180),a=_o(s);a.length>0&&n.set(r,po,a)}extract(e,r,n){let o=n.get(r,po),s=Array.isArray(o)?o.join(","):o;if(!s)return e;let a={};return s.length===0||(s.split(",").forEach(c=>{let u=Hr(c);if(u){let p={value:u.value};u.metadata&&(p.metadata=u.metadata),a[u.key]=p}}),Object.entries(a).length===0)?e:oe.setBaggage(e,oe.createBaggage(a))}fields(){return[po]}}});var To,ip=E(()=>{To=class{constructor(e,r){this._monotonicClock=r,this._epochMillis=e.now(),this._performanceMillis=r.now()}now(){let e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e}}});function nt(t){let e={};if(typeof t!="object"||t==null)return e;for(let[r,n]of Object.entries(t)){if(!Na(r)){S.warn(`Invalid attribute key: ${r}`);continue}if(!kr(n)){S.warn(`Invalid attribute value set for key: ${r}`);continue}Array.isArray(n)?e[r]=n.slice():e[r]=n}return e}function Na(t){return typeof t=="string"&&t.length>0}function kr(t){return t==null?!0:Array.isArray(t)?Sh(t):cp(t)}function Sh(t){let e;for(let r of t)if(r!=null){if(!e){if(cp(r)){e=typeof r;continue}return!1}if(typeof r!==e)return!1}return!0}function cp(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}var up=E(()=>{O()});function So(){return t=>{S.error(fh(t))}}function fh(t){return typeof t=="string"?t:JSON.stringify(dh(t))}function dh(t){let e={},r=t;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(e[n])return;let o=r[n];o&&(e[n]=String(o))}),r=Object.getPrototypeOf(r);return e}var Pa=E(()=>{O()});function Ep(t){pp=t}function Ee(t){try{pp(t)}catch{}}var pp,Ca=E(()=>{Pa();pp=So()});var he,La=E(()=>{(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(he||(he={}))});function mh(t){return hh.indexOf(t)>-1}function gh(t){return Rh.indexOf(t)>-1}function Oh(t){return vh.indexOf(t)>-1}function Nh(t,e,r){if(typeof r[t]>"u")return;let n=String(r[t]);e[t]=n.toLowerCase()==="true"}function Ph(t,e,r,n=-1/0,o=1/0){if(typeof r[t]<"u"){let s=Number(r[t]);isNaN(s)||(s<n?e[t]=n:s>o?e[t]=o:e[t]=s)}}function Ch(t,e,r,n=Ah){let o=r[t];typeof o=="string"&&(e[t]=o.split(n).map(s=>s.trim()))}function Ih(t,e,r){let n=r[t];if(typeof n=="string"){let o=Lh[n.toUpperCase()];o!=null&&(e[t]=o)}}function Yr(t){let e={};for(let r in $r){let n=r;switch(n){case"OTEL_LOG_LEVEL":Ih(n,e,t);break;default:if(mh(n))Nh(n,e,t);else if(gh(n))Ph(n,e,t);else if(Oh(n))Ch(n,e,t);else{let o=t[n];typeof o<"u"&&o!==null&&(e[n]=String(o))}}}return e}var Ah,hh,Rh,vh,mt,Rt,Ia,Ma,$r,Lh,xa=E(()=>{O();La();Ah=",",hh=["OTEL_SDK_DISABLED"];Rh=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];vh=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"];mt=1/0,Rt=128,Ia=128,Ma=128,$r={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:F.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:mt,OTEL_ATTRIBUTE_COUNT_LIMIT:Rt,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:mt,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Rt,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:mt,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Rt,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:Ia,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:Ma,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:he.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]};Lh={ALL:F.ALL,VERBOSE:F.VERBOSE,DEBUG:F.DEBUG,INFO:F.INFO,WARN:F.WARN,ERROR:F.ERROR,NONE:F.NONE}});function me(){let t=Yr(process.env);return Object.assign({},$r,t)}function $t(){return Yr(process.env)}var _p=E(()=>{xa()});var ot,lp=E(()=>{ot=typeof globalThis=="object"?globalThis:global});function Tp(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function st(t){let e=new Uint8Array(t.length/2),r=0;for(let n=0;n<t.length;n+=2){let o=Tp(t.charCodeAt(n)),s=Tp(t.charCodeAt(n+1));e[r++]=o<<4|s}return e}var ya=E(()=>{});function fo(t){return Buffer.from(st(t)).toString("base64")}var Sp=E(()=>{ya()});function fp(t){return function(){for(let r=0;r<t/4;r++)Ao.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<t&&!(Ao[r]>0);r++)r===t-1&&(Ao[t-1]=1);return Ao.toString("hex",0,t)}}var Yt,Ao,dp=E(()=>{Yt=class{constructor(){this.generateTraceId=fp(16),this.generateSpanId=fp(8)}},Ao=Buffer.allocUnsafe(16)});import{performance as Mh}from"perf_hooks";var Pe,Ap=E(()=>{Pe=Mh});var ho,Da=E(()=>{ho="1.30.1"});var xh,yh,Dh,mo,Ro,hp,mp=E(()=>{xh="exception.type",yh="exception.message",Dh="exception.stacktrace",mo=xh,Ro=yh,hp=Dh});var Rp=E(()=>{mp()});var Uh,bh,wh,Vh,Gh,Bh,Fh,Hh,kh,$h,Yh,qh,jh,Kh,Xh,Wh,zh,Jh,Qh,gp,vp,Op,Np,Pp,Cp,Lp,Ip,Mp,xp,yp,qt,qr,go,vo,Dp,jr,Kr,Xr,Zh,Up,bp=E(()=>{Uh="host.id",bh="host.name",wh="host.arch",Vh="os.type",Gh="os.version",Bh="process.pid",Fh="process.executable.name",Hh="process.executable.path",kh="process.command",$h="process.command_args",Yh="process.owner",qh="process.runtime.name",jh="process.runtime.version",Kh="process.runtime.description",Xh="service.name",Wh="service.instance.id",zh="telemetry.sdk.name",Jh="telemetry.sdk.language",Qh="telemetry.sdk.version",gp=Uh,vp=bh,Op=wh,Np=Vh,Pp=Gh,Cp=Bh,Lp=Fh,Ip=Hh,Mp=kh,xp=$h,yp=Yh,qt=qh,qr=jh,go=Kh,vo=Xh,Dp=Wh,jr=zh,Kr=Jh,Xr=Qh,Zh="nodejs",Up=Zh});var wp=E(()=>{bp()});var Vp=E(()=>{});var Gp=E(()=>{});var He=E(()=>{Rp();wp();Vp();Gp()});var at,Bp=E(()=>{Da();He();at={[jr]:"opentelemetry",[qt]:"node",[Kr]:Up,[Xr]:ho}});function jt(t){t.unref()}var Fp=E(()=>{});var Hp=E(()=>{_p();lp();Sp();dp();Ap();Bp();Fp()});var Ua=E(()=>{Hp()});function we(t){let e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*tm);return[r,n]}function Kt(){let t=Pe.timeOrigin;if(typeof t!="number"){let e=Pe;t=e.timing&&e.timing.fetchStart}return t}function Wr(t){let e=we(Kt()),r=we(typeof t=="number"?t:Pe.now());return Qr(e,r)}function $p(t){if(Xt(t))return t;if(typeof t=="number")return t<Kt()?Wr(t):we(t);if(t instanceof Date)return we(t.getTime());throw TypeError("Invalid input type")}function No(t,e){let r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=Oo),[r,n]}function Yp(t){let e=kp,r=`${"0".repeat(e)}${t[1]}Z`,n=r.substring(r.length-e-1);return new Date(t[0]*1e3).toISOString().replace("000Z",n)}function Po(t){return t[0]*Oo+t[1]}function qp(t){return t[0]*1e3+t[1]/1e6}function zr(t){return t[0]*1e6+t[1]/1e3}function Xt(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function Jr(t){return Xt(t)||typeof t=="number"||t instanceof Date}function Qr(t,e){let r=[t[0]+e[0],t[1]+e[1]];return r[1]>=Oo&&(r[1]-=Oo,r[0]+=1),r}var kp,em,tm,Oo,jp=E(()=>{Ua();kp=9,em=6,tm=Math.pow(10,em),Oo=Math.pow(10,kp)});var ae,Kp=E(()=>{(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(ae||(ae={}))});var Wt,Xp=E(()=>{O();Wt=class{constructor(e={}){var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,o)=>n.concat(o),[])))}inject(e,r,n){for(let o of this._propagators)try{o.inject(e,r,n)}catch(s){S.warn(`Failed to inject with ${o.constructor.name}. Err: ${s.message}`)}}extract(e,r,n){return this._propagators.reduce((o,s)=>{try{return s.extract(o,r,n)}catch(a){S.warn(`Failed to extract with ${s.constructor.name}. Err: ${a.message}`)}return o},e)}fields(){return this._fields.slice()}}});function Wp(t){return om.test(t)}function zp(t){return sm.test(t)&&!am.test(t)}var ba,rm,nm,om,sm,am,Jp=E(()=>{ba="[_0-9a-z-*/]",rm=`[a-z]${ba}{0,255}`,nm=`[a-z0-9]${ba}{0,240}@[a-z]${ba}{0,13}`,om=new RegExp(`^(?:${rm}|${nm})$`),sm=/^[ -~]{0,255}[!-~]$/,am=/,|=/});var Qp,im,Zp,eE,zt,wa=E(()=>{Jp();Qp=32,im=512,Zp=",",eE="=",zt=class t{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,r){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n}unset(e){let r=this._clone();return r._internalState.delete(e),r}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,r)=>(e.push(r+eE+this.get(r)),e),[]).join(Zp)}_parse(e){e.length>im||(this._internalState=e.split(Zp).reverse().reduce((r,n)=>{let o=n.trim(),s=o.indexOf(eE);if(s!==-1){let a=o.slice(0,s),i=o.slice(s+1,n.length);Wp(a)&&zp(i)&&r.set(a,i)}return r},new Map),this._internalState.size>Qp&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Qp))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new t;return e._internalState=new Map(this._internalState),e}}});function Va(t){let e=lm.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var Zr,en,cm,um,pm,Em,_m,lm,it,tE=E(()=>{O();Fr();wa();Zr="traceparent",en="tracestate",cm="00",um="(?!ff)[\\da-f]{2}",pm="(?![0]{32})[\\da-f]{32}",Em="(?![0]{16})[\\da-f]{16}",_m="[\\da-f]{2}",lm=new RegExp(`^\\s?(${um})-(${pm})-(${Em})-(${_m})(-.*)?\\s?$`);it=class{inject(e,r,n){let o=D.getSpanContext(e);if(!o||se(e)||!ne(o))return;let s=`${cm}-${o.traceId}-${o.spanId}-0${Number(o.traceFlags||b.NONE).toString(16)}`;n.set(r,Zr,s),o.traceState&&n.set(r,en,o.traceState.serialize())}extract(e,r,n){let o=n.get(r,Zr);if(!o)return e;let s=Array.isArray(o)?o[0]:o;if(typeof s!="string")return e;let a=Va(s);if(!a)return e;a.isRemote=!0;let i=n.get(r,en);if(i){let c=Array.isArray(i)?i.join(","):i;a.traceState=new zt(typeof c=="string"?c:void 0)}return D.setSpanContext(e,a)}fields(){return[Zr,en]}}});function rE(t,e){return t.setValue(Ga,e)}function nE(t){return t.deleteValue(Ga)}function oE(t){return t.getValue(Ga)}var Ga,Co,sE=E(()=>{O();Ga=Ne("OpenTelemetry SDK Context Key RPC_METADATA");(function(t){t.HTTP="http"})(Co||(Co={}))});var gt,Ba=E(()=>{O();gt=class{shouldSample(){return{decision:Ae.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}});var ct,Fa=E(()=>{O();ct=class{shouldSample(){return{decision:Ae.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}});var Lo,aE=E(()=>{O();Ca();Ba();Fa();Lo=class{constructor(e){var r,n,o,s;this._root=e.root,this._root||(Ee(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new ct),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new ct,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new gt,this._localParentSampled=(o=e.localParentSampled)!==null&&o!==void 0?o:new ct,this._localParentNotSampled=(s=e.localParentNotSampled)!==null&&s!==void 0?s:new gt}shouldSample(e,r,n,o,s,a){let i=D.getSpanContext(e);return!i||!ne(i)?this._root.shouldSample(e,r,n,o,s,a):i.isRemote?i.traceFlags&b.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,o,s,a):this._remoteParentNotSampled.shouldSample(e,r,n,o,s,a):i.traceFlags&b.SAMPLED?this._localParentSampled.shouldSample(e,r,n,o,s,a):this._localParentNotSampled.shouldSample(e,r,n,o,s,a)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}});var Io,iE=E(()=>{O();Io=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(e,r){return{decision:be(r)&&this._accumulate(r)<this._upperBound?Ae.RECORD_AND_SAMPLED:Ae.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let r=0;for(let n=0;n<e.length/8;n++){let o=n*8,s=parseInt(e.slice(o,o+8),16);r=(r^s)>>>0}return r}}});function mm(t,e){return function(r){return t(e(r))}}function Ha(t){if(!Rm(t)||gm(t)!==Tm)return!1;let e=hm(t);if(e===null)return!0;let r=pE.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&cE.call(r)===Am}function Rm(t){return t!=null&&typeof t=="object"}function gm(t){return t==null?t===void 0?fm:Sm:vt&&vt in Object(t)?vm(t):Om(t)}function vm(t){let e=pE.call(t,vt),r=t[vt],n=!1;try{t[vt]=void 0,n=!0}catch{}let o=EE.call(t);return n&&(e?t[vt]=r:delete t[vt]),o}function Om(t){return EE.call(t)}var Tm,Sm,fm,dm,cE,Am,hm,uE,pE,vt,EE,_E=E(()=>{Tm="[object Object]",Sm="[object Null]",fm="[object Undefined]",dm=Function.prototype,cE=dm.toString,Am=cE.call(Object),hm=mm(Object.getPrototypeOf,Object),uE=Object.prototype,pE=uE.hasOwnProperty,vt=Symbol?Symbol.toStringTag:void 0,EE=uE.toString});function yo(...t){let e=t.shift(),r=new WeakMap;for(;t.length>0;)e=TE(e,t.shift(),0,r);return e}function ka(t){return xo(t)?t.slice():t}function TE(t,e,r=0,n){let o;if(!(r>Nm)){if(r++,Mo(t)||Mo(e)||SE(e))o=ka(e);else if(xo(t)){if(o=t.slice(),xo(e))for(let s=0,a=e.length;s<a;s++)o.push(ka(e[s]));else if(tn(e)){let s=Object.keys(e);for(let a=0,i=s.length;a<i;a++){let c=s[a];o[c]=ka(e[c])}}}else if(tn(t))if(tn(e)){if(!Pm(t,e))return e;o=Object.assign({},t);let s=Object.keys(e);for(let a=0,i=s.length;a<i;a++){let c=s[a],u=e[c];if(Mo(u))typeof u>"u"?delete o[c]:o[c]=u;else{let p=o[c],_=u;if(lE(t,c,n)||lE(e,c,n))delete o[c];else{if(tn(p)&&tn(_)){let l=n.get(p)||[],T=n.get(_)||[];l.push({obj:t,key:c}),T.push({obj:e,key:c}),n.set(p,l),n.set(_,T)}o[c]=TE(o[c],u,r,n)}}}}else o=e;return o}}function lE(t,e,r){let n=r.get(t[e])||[];for(let o=0,s=n.length;o<s;o++){let a=n[o];if(a.key===e&&a.obj===t)return!0}return!1}function xo(t){return Array.isArray(t)}function SE(t){return typeof t=="function"}function tn(t){return!Mo(t)&&!xo(t)&&!SE(t)&&typeof t=="object"}function Mo(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function Pm(t,e){return!(!Ha(t)||!Ha(e))}var Nm,fE=E(()=>{_E();Nm=20});function dE(t,e){let r,n=new Promise(function(s,a){r=setTimeout(function(){a(new rn("Operation timed out."))},e)});return Promise.race([t,n]).then(o=>(clearTimeout(r),o),o=>{throw clearTimeout(r),o})}var rn,AE=E(()=>{rn=class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});function $a(t,e){return typeof e=="string"?t===e:!!t.match(e)}function hE(t,e){if(!e)return!1;for(let r of e)if($a(t,r))return!0;return!1}var mE=E(()=>{});function RE(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var gE=E(()=>{});var Do,vE=E(()=>{Do=class{constructor(){this._promise=new Promise((e,r)=>{this._resolve=e,this._reject=r})}get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}});var ke,OE=E(()=>{vE();ke=class{constructor(e,r){this._callback=e,this._that=r,this._isCalled=!1,this._deferred=new Do}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...e)).then(r=>this._deferred.resolve(r),r=>this._deferred.reject(r))}catch(r){this._deferred.reject(r)}}return this._deferred.promise}}});function NE(t,e){return new Promise(r=>{J.with(Ht(J.active()),()=>{t.export(e,n=>{r(n)})})})}var PE=E(()=>{O();Fr()});var CE={};pe(CE,{AlwaysOffSampler:()=>gt,AlwaysOnSampler:()=>ct,AnchoredClock:()=>To,BindOnceFuture:()=>ke,CompositePropagator:()=>Wt,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>Rt,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>mt,DEFAULT_ENVIRONMENT:()=>$r,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>Ia,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>Ma,ExportResultCode:()=>ae,ParentBasedSampler:()=>Lo,RPCType:()=>Co,RandomIdGenerator:()=>Yt,SDK_INFO:()=>at,TRACE_PARENT_HEADER:()=>Zr,TRACE_STATE_HEADER:()=>en,TimeoutError:()=>rn,TraceIdRatioBasedSampler:()=>Io,TraceState:()=>zt,TracesSamplerValues:()=>he,VERSION:()=>ho,W3CBaggagePropagator:()=>kt,W3CTraceContextPropagator:()=>it,_globalThis:()=>ot,addHrTimes:()=>Qr,baggageUtils:()=>Cm,callWithTimeout:()=>dE,deleteRPCMetadata:()=>nE,getEnv:()=>me,getEnvWithoutDefaults:()=>$t,getRPCMetadata:()=>oE,getTimeOrigin:()=>Kt,globalErrorHandler:()=>Ee,hexToBase64:()=>fo,hexToBinary:()=>st,hrTime:()=>Wr,hrTimeDuration:()=>No,hrTimeToMicroseconds:()=>zr,hrTimeToMilliseconds:()=>qp,hrTimeToNanoseconds:()=>Po,hrTimeToTimeStamp:()=>Yp,internal:()=>Ya,isAttributeKey:()=>Na,isAttributeValue:()=>kr,isTimeInput:()=>Jr,isTimeInputHrTime:()=>Xt,isTracingSuppressed:()=>se,isUrlIgnored:()=>hE,isWrapped:()=>RE,loggingErrorHandler:()=>So,merge:()=>yo,millisToHrTime:()=>we,otperformance:()=>Pe,parseEnvironment:()=>Yr,parseTraceParent:()=>Va,sanitizeAttributes:()=>nt,setGlobalErrorHandler:()=>Ep,setRPCMetadata:()=>rE,suppressTracing:()=>Ht,timeInputToHrTime:()=>$p,unrefTimer:()=>jt,unsuppressTracing:()=>rp,urlMatches:()=>$a});var Cm,Ya,K=E(()=>{ap();ip();up();Ca();Pa();jp();ya();Kp();Oa();Ua();Xp();tE();sE();Ba();Fa();aE();iE();Fr();wa();xa();fE();La();AE();mE();gE();OE();Da();PE();Cm={getKeyPairs:lo,serializeKeyPairs:_o,parseKeyPairsIntoRecord:sp,parsePairKeyValue:Hr},Ya={_export:NE}});function Jt(){return`unknown_service:${process.argv0}`}var VE=E(()=>{});var GE=E(()=>{VE()});var qa=E(()=>{GE()});var B,We=E(()=>{O();He();K();qa();B=class t{constructor(e,r){var n;this._attributes=e,this.asyncAttributesPending=r!=null,this._syncAttributes=(n=this._attributes)!==null&&n!==void 0?n:{},this._asyncAttributesPromise=r==null?void 0:r.then(o=>(this._attributes=Object.assign({},this._attributes,o),this.asyncAttributesPending=!1,o),o=>(S.debug("a resource's async attributes promise rejected: %s",o),this.asyncAttributesPending=!1,{}))}static empty(){return t.EMPTY}static default(){return new t({[vo]:Jt(),[Kr]:at[Kr],[jr]:at[jr],[Xr]:at[Xr]})}get attributes(){var e;return this.asyncAttributesPending&&S.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}}async waitForAsyncAttributes(){this.asyncAttributesPending&&await this._asyncAttributesPromise}merge(e){var r;if(!e)return this;let n=Object.assign(Object.assign({},this._syncAttributes),(r=e._syncAttributes)!==null&&r!==void 0?r:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(n);let o=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(([s,a])=>{var i;return Object.assign(Object.assign(Object.assign(Object.assign({},this._syncAttributes),s),(i=e._syncAttributes)!==null&&i!==void 0?i:e.attributes),a)});return new t(n,o)}};B.EMPTY=new B({})});var BE,FE,ja=E(()=>{BE=t=>{switch(t){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return t}},FE=t=>{switch(t){case"sunos":return"solaris";case"win32":return"windows";default:return t}}});import*as HE from"child_process";import*as kE from"util";var Qt,Uo=E(()=>{Qt=kE.promisify(HE.exec)});var $E={};pe($E,{getMachineId:()=>ym});async function ym(){try{let e=(await Qt('ioreg -rd1 -c "IOPlatformExpertDevice"')).stdout.split(`
`).find(n=>n.includes("IOPlatformUUID"));if(!e)return"";let r=e.split('" = "');if(r.length===2)return r[1].slice(0,-1)}catch(t){S.debug(`error reading machine id: ${t}`)}return""}var YE=E(()=>{Uo();O()});var qE={};pe(qE,{getMachineId:()=>Um});import{promises as Dm}from"fs";async function Um(){let t=["/etc/machine-id","/var/lib/dbus/machine-id"];for(let e of t)try{return(await Dm.readFile(e,{encoding:"utf8"})).trim()}catch(r){S.debug(`error reading machine id: ${r}`)}return""}var jE=E(()=>{O()});var KE={};pe(KE,{getMachineId:()=>wm});import{promises as bm}from"fs";async function wm(){try{return(await bm.readFile("/etc/hostid",{encoding:"utf8"})).trim()}catch(t){S.debug(`error reading machine id: ${t}`)}try{return(await Qt("kenv -q smbios.system.uuid")).stdout.trim()}catch(t){S.debug(`error reading machine id: ${t}`)}return""}var XE=E(()=>{Uo();O()});var WE={};pe(WE,{getMachineId:()=>Vm});import*as bo from"process";async function Vm(){let t="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",e="%windir%\\System32\\REG.exe";bo.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in bo.env&&(e="%windir%\\sysnative\\cmd.exe /c "+e);try{let n=(await Qt(`${e} ${t}`)).stdout.split("REG_SZ");if(n.length===2)return n[1].trim()}catch(r){S.debug(`error reading machine id: ${r}`)}return""}var zE=E(()=>{Uo();O()});var JE={};pe(JE,{getMachineId:()=>Gm});async function Gm(){return S.debug("could not read machine-id: unsupported platform"),""}var QE=E(()=>{O()});import*as ZE from"process";var Ot,e_=E(()=>{switch(ZE.platform){case"darwin":({getMachineId:Ot}=(YE(),Ue($E)));break;case"linux":({getMachineId:Ot}=(jE(),Ue(qE)));break;case"freebsd":({getMachineId:Ot}=(XE(),Ue(KE)));break;case"win32":({getMachineId:Ot}=(zE(),Ue(WE)));break;default:({getMachineId:Ot}=(QE(),Ue(JE)))}});import{arch as Bm,hostname as Fm}from"os";var Ka,Nt,Xa=E(()=>{He();We();ja();e_();Ka=class{detect(e){let r={[vp]:Fm(),[Op]:BE(Bm())};return new B(r,this._getAsyncAttributes())}_getAsyncAttributes(){return Ot().then(e=>{let r={};return e&&(r[gp]=e),r})}},Nt=new Ka});var Wa,on,t_=E(()=>{Xa();Wa=class{detect(e){return Promise.resolve(Nt.detect(e))}},on=new Wa});import{platform as Hm,release as km}from"os";var za,Pt,Ja=E(()=>{He();We();ja();za=class{detect(e){let r={[Np]:FE(Hm()),[Pp]:km()};return new B(r)}},Pt=new za});var Qa,sn,r_=E(()=>{Ja();Qa=class{detect(e){return Promise.resolve(Pt.detect(e))}},sn=new Qa});import*as n_ from"os";var Za,Ct,ei=E(()=>{O();He();We();Za=class{detect(e){let r={[Cp]:process.pid,[Lp]:process.title,[Ip]:process.execPath,[xp]:[process.argv[0],...process.execArgv,...process.argv.slice(1)],[qr]:process.versions.node,[qt]:"nodejs",[go]:"Node.js"};process.argv.length>1&&(r[Mp]=process.argv[1]);try{let n=n_.userInfo();r[yp]=n.username}catch(n){S.debug(`error obtaining process owner: ${n}`)}return new B(r)}},Ct=new Za});var ti,an,o_=E(()=>{ei();ti=class{detect(e){return Promise.resolve(Ct.detect(e))}},an=new ti});import{randomUUID as $m}from"crypto";var ri,cn,s_=E(()=>{He();We();ri=class{detect(e){let r={[Dp]:$m()};return new B(r)}},cn=new ri});var a_=E(()=>{t_();Xa();r_();Ja();o_();ei();s_()});var i_=E(()=>{a_()});var ni,un,oi=E(()=>{He();O();We();ni=class{detect(e){var r,n,o;if(!(typeof navigator<"u"&&((n=(r=global.process)===null||r===void 0?void 0:r.versions)===null||n===void 0?void 0:n.node)===void 0&&((o=global.Bun)===null||o===void 0?void 0:o.version)===void 0))return B.empty();let a={[qt]:"browser",[go]:"Web Browser",[qr]:navigator.userAgent};return this._getResourceAttributes(a,e)}_getResourceAttributes(e,r){return e[qr]===""?(S.debug("BrowserDetector failed: Unable to find required browser resources. "),B.empty()):new B(Object.assign({},e))}},un=new ni});var si,ai,c_=E(()=>{oi();si=class{detect(e){return Promise.resolve(un.detect(e))}},ai=new si});var ii,pn,ci=E(()=>{O();K();He();We();ii=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}detect(e){let r={},n=me(),o=n.OTEL_RESOURCE_ATTRIBUTES,s=n.OTEL_SERVICE_NAME;if(o)try{let a=this._parseResourceAttributes(o);Object.assign(r,a)}catch(a){S.debug(`EnvDetector failed: ${a.message}`)}return s&&(r[vo]=s),new B(r)}_parseResourceAttributes(e){if(!e)return{};let r={},n=e.split(this._COMMA_SEPARATOR,-1);for(let o of n){let s=o.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(s.length!==2)continue;let[a,i]=s;if(a=a.trim(),i=i.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(a))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(i))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[a]=decodeURIComponent(i)}return r}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)}_isBaggageOctetString(e){for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<33||n===44||n===59||n===92||n>126)return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}},pn=new ii});var ui,pi,u_=E(()=>{ci();ui=class{detect(e){return Promise.resolve(pn.detect(e))}},pi=new ui});var p_=E(()=>{i_();c_();u_();oi();ci()});var E_,__=E(()=>{E_=t=>t!==null&&typeof t=="object"&&typeof t.then=="function"});var l_,T_,S_,f_=E(()=>{We();O();__();l_=async(t={})=>{let e=await Promise.all((t.detectors||[]).map(async r=>{try{let n=await r.detect(t);return S.debug(`${r.constructor.name} found resource.`,n),n}catch(n){return S.debug(`${r.constructor.name} failed: ${n.message}`),B.empty()}}));return S_(e),e.reduce((r,n)=>r.merge(n),B.empty())},T_=(t={})=>{var e;let r=((e=t.detectors)!==null&&e!==void 0?e:[]).map(o=>{try{let s=o.detect(t),a;if(E_(s)){let i=async()=>{var c;let u=await s;return await((c=u.waitForAsyncAttributes)===null||c===void 0?void 0:c.call(u)),u.attributes};a=new B({},i())}else a=s;return a.waitForAsyncAttributes?a.waitForAsyncAttributes().then(()=>S.debug(`${o.constructor.name} found resource.`,a)):S.debug(`${o.constructor.name} found resource.`,a),a}catch(s){return S.error(`${o.constructor.name} failed: ${s.message}`),B.empty()}}),n=r.reduce((o,s)=>o.merge(s),B.empty());return n.waitForAsyncAttributes&&n.waitForAsyncAttributes().then(()=>{S_(r)}),n},S_=t=>{t.forEach(e=>{if(Object.keys(e.attributes).length>0){let r=JSON.stringify(e.attributes,null,4);S.verbose(r)}})}});var d_={};pe(d_,{Resource:()=>B,browserDetector:()=>ai,browserDetectorSync:()=>un,defaultServiceName:()=>Jt,detectResources:()=>l_,detectResourcesSync:()=>T_,envDetector:()=>pi,envDetectorSync:()=>pn,hostDetector:()=>on,hostDetectorSync:()=>Nt,osDetector:()=>sn,osDetectorSync:()=>Pt,processDetector:()=>an,processDetectorSync:()=>Ct,serviceInstanceIdDetectorSync:()=>cn});var Ei=E(()=>{We();qa();p_();f_()});var li=f(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.AbstractAsyncHooksContextManager=void 0;var Wm=G("events"),zm=["addListener","on","once","prependListener","prependOnceListener"],_i=class{constructor(){this._kOtListeners=Symbol("OtListeners"),this._wrapped=!1}bind(e,r){return r instanceof Wm.EventEmitter?this._bindEventEmitter(e,r):typeof r=="function"?this._bindFunction(e,r):r}_bindFunction(e,r){let n=this,o=function(...s){return n.with(e,()=>r.apply(this,s))};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:r.length}),o}_bindEventEmitter(e,r){return this._getPatchMap(r)!==void 0||(this._createPatchMap(r),zm.forEach(o=>{r[o]!==void 0&&(r[o]=this._patchAddListener(r,r[o],e))}),typeof r.removeListener=="function"&&(r.removeListener=this._patchRemoveListener(r,r.removeListener)),typeof r.off=="function"&&(r.off=this._patchRemoveListener(r,r.off)),typeof r.removeAllListeners=="function"&&(r.removeAllListeners=this._patchRemoveAllListeners(r,r.removeAllListeners))),r}_patchRemoveListener(e,r){let n=this;return function(o,s){var a;let i=(a=n._getPatchMap(e))===null||a===void 0?void 0:a[o];if(i===void 0)return r.call(this,o,s);let c=i.get(s);return r.call(this,o,c||s)}}_patchRemoveAllListeners(e,r){let n=this;return function(o){let s=n._getPatchMap(e);return s!==void 0&&(arguments.length===0?n._createPatchMap(e):s[o]!==void 0&&delete s[o]),r.apply(this,arguments)}}_patchAddListener(e,r,n){let o=this;return function(s,a){if(o._wrapped)return r.call(this,s,a);let i=o._getPatchMap(e);i===void 0&&(i=o._createPatchMap(e));let c=i[s];c===void 0&&(c=new WeakMap,i[s]=c);let u=o.bind(n,a);c.set(a,u),o._wrapped=!0;try{return r.call(this,s,u)}finally{o._wrapped=!1}}}_createPatchMap(e){let r=Object.create(null);return e[this._kOtListeners]=r,r}_getPatchMap(e){return e[this._kOtListeners]}};Vo.AbstractAsyncHooksContextManager=_i});var h_=f(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.AsyncHooksContextManager=void 0;var Jm=(O(),Ue(Br)),Qm=G("async_hooks"),Zm=li(),Ti=class extends Zm.AbstractAsyncHooksContextManager{constructor(){super(),this._contexts=new Map,this._stack=[],this._asyncHook=Qm.createHook({init:this._init.bind(this),before:this._before.bind(this),after:this._after.bind(this),destroy:this._destroy.bind(this),promiseResolve:this._destroy.bind(this)})}active(){var e;return(e=this._stack[this._stack.length-1])!==null&&e!==void 0?e:Jm.ROOT_CONTEXT}with(e,r,n,...o){this._enterContext(e);try{return r.call(n,...o)}finally{this._exitContext()}}enable(){return this._asyncHook.enable(),this}disable(){return this._asyncHook.disable(),this._contexts.clear(),this._stack=[],this}_init(e,r){if(r==="TIMERWRAP")return;let n=this._stack[this._stack.length-1];n!==void 0&&this._contexts.set(e,n)}_destroy(e){this._contexts.delete(e)}_before(e){let r=this._contexts.get(e);r!==void 0&&this._enterContext(r)}_after(){this._exitContext()}_enterContext(e){this._stack.push(e)}_exitContext(){this._stack.pop()}};Go.AsyncHooksContextManager=Ti});var m_=f(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.AsyncLocalStorageContextManager=void 0;var eR=(O(),Ue(Br)),tR=G("async_hooks"),rR=li(),Si=class extends rR.AbstractAsyncHooksContextManager{constructor(){super(),this._asyncLocalStorage=new tR.AsyncLocalStorage}active(){var e;return(e=this._asyncLocalStorage.getStore())!==null&&e!==void 0?e:eR.ROOT_CONTEXT}with(e,r,n,...o){let s=n==null?r:r.bind(n);return this._asyncLocalStorage.run(e,s,...o)}enable(){return this}disable(){return this._asyncLocalStorage.disable(),this}};Bo.AsyncLocalStorageContextManager=Si});var R_=f(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.AsyncLocalStorageContextManager=Zt.AsyncHooksContextManager=void 0;var nR=h_();Object.defineProperty(Zt,"AsyncHooksContextManager",{enumerable:!0,get:function(){return nR.AsyncHooksContextManager}});var oR=m_();Object.defineProperty(Zt,"AsyncLocalStorageContextManager",{enumerable:!0,get:function(){return oR.AsyncLocalStorageContextManager}})});var er,fi=E(()=>{O();er=Ne("OpenTelemetry Context Key B3 Debug Flag")});var tr,rr,nr,or,Fo,sr,di=E(()=>{tr="b3",rr="x-b3-traceid",nr="x-b3-spanid",or="x-b3-sampled",Fo="x-b3-parentspanid",sr="x-b3-flags"});function iR(t){return t===b.SAMPLED||t===b.NONE}function cR(t){return Array.isArray(t)?t[0]:t}function ko(t,e,r){let n=e.get(t,r);return cR(n)}function uR(t,e){let r=ko(t,e,rr);return typeof r=="string"?r.padStart(32,"0"):""}function pR(t,e){let r=ko(t,e,nr);return typeof r=="string"?r:""}function g_(t,e){return ko(t,e,sr)==="1"?"1":void 0}function ER(t,e){let r=ko(t,e,or);if(g_(t,e)==="1"||sR.has(r))return b.SAMPLED;if(r===void 0||aR.has(r))return b.NONE}var sR,aR,Ho,v_=E(()=>{O();K();fi();di();sR=new Set([!0,"true","True","1",1]),aR=new Set([!1,"false","False","0",0]);Ho=class{inject(e,r,n){let o=D.getSpanContext(e);if(!o||!ne(o)||se(e))return;let s=e.getValue(er);n.set(r,rr,o.traceId),n.set(r,nr,o.spanId),s==="1"?n.set(r,sr,s):o.traceFlags!==void 0&&n.set(r,or,(b.SAMPLED&o.traceFlags)===b.SAMPLED?"1":"0")}extract(e,r,n){let o=uR(r,n),s=pR(r,n),a=ER(r,n),i=g_(r,n);return be(o)&&At(s)&&iR(a)?(e=e.setValue(er,i),D.setSpanContext(e,{traceId:o,spanId:s,isRemote:!0,traceFlags:a})):e}fields(){return[rr,nr,sr,or,Fo]}}});function fR(t){return t.length===32?t:`${lR}${t}`}function dR(t){return t&&TR.has(t)?b.SAMPLED:b.NONE}var _R,lR,TR,SR,$o,O_=E(()=>{O();K();fi();_R=/((?:[0-9a-f]{16}){1,2})-([0-9a-f]{16})(?:-([01d](?![0-9a-f])))?(?:-([0-9a-f]{16}))?/,lR="0".repeat(16),TR=new Set(["d","1"]),SR="d";$o=class{inject(e,r,n){let o=D.getSpanContext(e);if(!o||!ne(o)||se(e))return;let s=e.getValue(er)||o.traceFlags&1,a=`${o.traceId}-${o.spanId}-${s}`;n.set(r,"b3",a)}extract(e,r,n){let o=n.get(r,"b3"),s=Array.isArray(o)?o[0]:o;if(typeof s!="string")return e;let a=s.match(_R);if(!a)return e;let[,i,c,u]=a,p=fR(i);if(!be(p)||!At(c))return e;let _=dR(u);return u===SR&&(e=e.setValue(er,u)),D.setSpanContext(e,{traceId:p,spanId:c,isRemote:!0,traceFlags:_})}fields(){return["b3"]}}});var ar,Ai=E(()=>{(function(t){t[t.SINGLE_HEADER=0]="SINGLE_HEADER",t[t.MULTI_HEADER=1]="MULTI_HEADER"})(ar||(ar={}))});var Yo,N_=E(()=>{K();v_();O_();Ai();Yo=class{constructor(e={}){this._b3MultiPropagator=new Ho,this._b3SinglePropagator=new $o,e.injectEncoding===ar.MULTI_HEADER?(this._inject=this._b3MultiPropagator.inject,this._fields=this._b3MultiPropagator.fields()):(this._inject=this._b3SinglePropagator.inject,this._fields=this._b3SinglePropagator.fields())}inject(e,r,n){se(e)||this._inject(e,r,n)}extract(e,r,n){let o=n.get(r,"b3");return(Array.isArray(o)?o[0]:o)?this._b3SinglePropagator.extract(e,r,n):this._b3MultiPropagator.extract(e,r,n)}fields(){return this._fields}}});var P_={};pe(P_,{B3InjectEncoding:()=>ar,B3Propagator:()=>Yo,B3_CONTEXT_HEADER:()=>tr,X_B3_FLAGS:()=>sr,X_B3_PARENT_SPAN_ID:()=>Fo,X_B3_SAMPLED:()=>or,X_B3_SPAN_ID:()=>nr,X_B3_TRACE_ID:()=>rr});var C_=E(()=>{N_();di();Ai()});var L_,I_=E(()=>{L_="exception"});var ir,hi=E(()=>{O();K();He();I_();ir=class{constructor(e,r,n,o,s,a,i=[],c,u,p){this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:rt.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=o,this.parentSpanId=a,this.kind=s,this.links=i;let _=Date.now();this._performanceStartTime=Pe.now(),this._performanceOffset=_-(this._performanceStartTime+Kt()),this._startTimeProvided=c!=null,this.startTime=this._getTime(c??_),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,p!=null&&this.setAttributes(p),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}spanContext(){return this._spanContext}setAttribute(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(S.warn(`Invalid attribute key: ${e}`),this):kr(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this):(S.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(let[r,n]of Object.entries(e))this.setAttribute(r,n);return this}addEvent(e,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return S.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&S.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Jr(r)&&(Jr(n)||(n=r),r=void 0);let o=nt(r);return this.events.push({name:e,attributes:o,time:this._getTime(n),droppedAttributesCount:0}),this}addLink(e){return this.links.push(e),this}addLinks(e){return this.links.push(...e),this}setStatus(e){return this._isSpanEnded()?this:(this.status=Object.assign({},e),this.status.message!=null&&typeof e.message!="string"&&(S.warn(`Dropping invalid status.message of type '${typeof e.message}', expected 'string'`),delete this.status.message),this)}updateName(e){return this._isSpanEnded()?this:(this.name=e,this)}end(e){if(this._isSpanEnded()){S.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this._ended=!0,this.endTime=this._getTime(e),this._duration=No(this.startTime,this.endTime),this._duration[0]<0&&(S.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&S.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this)}_getTime(e){if(typeof e=="number"&&e<=Pe.now())return Wr(e+this._performanceOffset);if(typeof e=="number")return we(e);if(e instanceof Date)return we(e.getTime());if(Xt(e))return e;if(this._startTimeProvided)return we(Date.now());let r=Pe.now()-this._performanceStartTime;return Qr(this.startTime,we(r))}isRecording(){return this._ended===!1}recordException(e,r){let n={};typeof e=="string"?n[Ro]=e:e&&(e.code?n[mo]=e.code.toString():e.name&&(n[mo]=e.name),e.message&&(n[Ro]=e.message),e.stack&&(n[hp]=e.stack)),n[mo]||n[Ro]?this.addEvent(L_,n,r):S.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){return this._ended&&S.warn(`Can not execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`),this._ended}_truncateToLimitUtil(e,r){return e.length<=r?e:e.substring(0,r)}_truncateToSize(e){let r=this._attributeValueLengthLimit;return r<=0?(S.warn(`Attribute value limit must be positive, got ${r}`),e):typeof e=="string"?this._truncateToLimitUtil(e,r):Array.isArray(e)?e.map(n=>typeof n=="string"?this._truncateToLimitUtil(n,r):n):e}}});var Ve,En=E(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Ve||(Ve={}))});var $e,qo=E(()=>{En();$e=class{shouldSample(){return{decision:Ve.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}});var Ce,jo=E(()=>{En();Ce=class{shouldSample(){return{decision:Ve.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}});var ut,mi=E(()=>{O();K();qo();jo();ut=class{constructor(e){var r,n,o,s;this._root=e.root,this._root||(Ee(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Ce),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new Ce,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new $e,this._localParentSampled=(o=e.localParentSampled)!==null&&o!==void 0?o:new Ce,this._localParentNotSampled=(s=e.localParentNotSampled)!==null&&s!==void 0?s:new $e}shouldSample(e,r,n,o,s,a){let i=D.getSpanContext(e);return!i||!ne(i)?this._root.shouldSample(e,r,n,o,s,a):i.isRemote?i.traceFlags&b.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,o,s,a):this._remoteParentNotSampled.shouldSample(e,r,n,o,s,a):i.traceFlags&b.SAMPLED?this._localParentSampled.shouldSample(e,r,n,o,s,a):this._localParentNotSampled.shouldSample(e,r,n,o,s,a)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}});var Lt,Ri=E(()=>{O();En();Lt=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(e,r){return{decision:be(r)&&this._accumulate(r)<this._upperBound?Ve.RECORD_AND_SAMPLED:Ve.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let r=0;for(let n=0;n<e.length/8;n++){let o=n*8,s=parseInt(e.slice(o,o+8),16);r=(r^s)>>>0}return r}}});function Ko(){let t=me();return{sampler:gi(t),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:t.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:t.OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:t.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:t.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:t.OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:t.OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:t.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:t.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT},mergeResourceWithDefaults:!0}}function gi(t=me()){switch(t.OTEL_TRACES_SAMPLER){case he.AlwaysOn:return new Ce;case he.AlwaysOff:return new $e;case he.ParentBasedAlwaysOn:return new ut({root:new Ce});case he.ParentBasedAlwaysOff:return new ut({root:new $e});case he.TraceIdRatio:return new Lt(M_(t));case he.ParentBasedTraceIdRatio:return new ut({root:new Lt(M_(t))});default:return S.error(`OTEL_TRACES_SAMPLER value "${t.OTEL_TRACES_SAMPLER} invalid, defaulting to ${AR}".`),new Ce}}function M_(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return S.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${cr}.`),cr;let e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(S.error(`OTEL_TRACES_SAMPLER_ARG=${t.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${cr}.`),cr):e<0||e>1?(S.error(`OTEL_TRACES_SAMPLER_ARG=${t.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${cr}.`),cr):e}var AR,cr,vi=E(()=>{O();K();qo();jo();mi();Ri();AR=he.AlwaysOn,cr=1});function x_(t){let e={sampler:gi()},r=Ko(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function y_(t){var e,r,n,o,s,a,i,c,u,p,_,l;let T=Object.assign({},t.spanLimits),m=$t();return T.attributeCountLimit=(a=(s=(o=(r=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&r!==void 0?r:(n=t.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&o!==void 0?o:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:m.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:Rt,T.attributeValueLengthLimit=(l=(_=(p=(c=(i=t.spanLimits)===null||i===void 0?void 0:i.attributeValueLengthLimit)!==null&&c!==void 0?c:(u=t.generalLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&p!==void 0?p:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&_!==void 0?_:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&l!==void 0?l:mt,Object.assign({},t,{spanLimits:T})}var Oi=E(()=>{vi();K()});var Xo,D_=E(()=>{O();K();Xo=class{constructor(e,r){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;let n=me();this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new ke(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(S.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(e,r){}onEnd(e){this._shutdownOnce.isCalled||(e.spanContext().traceFlags&b.SAMPLED)!==0&&this._addToBuffer(e)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&S.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(S.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()}_flushAll(){return new Promise((e,r)=>{let n=[],o=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let s=0,a=o;s<a;s++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{e()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((e,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);J.with(Ht(J.active()),()=>{let o;this._finishedSpans.length<=this._maxExportBatchSize?(o=this._finishedSpans,this._finishedSpans=[]):o=this._finishedSpans.splice(0,this._maxExportBatchSize);let s=()=>this._exporter.export(o,i=>{var c;clearTimeout(n),i.code===ae.SUCCESS?e():r((c=i.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))}),a=null;for(let i=0,c=o.length;i<c;i++){let u=o[i];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(a??(a=[]),a.push(u.resource.waitForAsyncAttributes()))}a===null?s():Promise.all(a).then(s,i=>{Ee(i),r(i)})})})}_maybeStartTimer(){if(this._isExporting)return;let e=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(r=>{this._isExporting=!1,Ee(r)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return e();this._timer===void 0&&(this._timer=setTimeout(()=>e(),this._scheduledDelayMillis),jt(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}}});var pt,U_=E(()=>{D_();pt=class extends Xo{onShutdown(){}}});function b_(t){return function(){for(let r=0;r<t/4;r++)Wo.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<t&&!(Wo[r]>0);r++)r===t-1&&(Wo[t-1]=1);return Wo.toString("hex",0,t)}}var Et,Wo,w_=E(()=>{Et=class{constructor(){this.generateTraceId=b_(16),this.generateSpanId=b_(8)}},Wo=Buffer.allocUnsafe(16)});var V_=E(()=>{U_();w_()});var zo=E(()=>{V_()});var ur,Ni=E(()=>{O();K();hi();Oi();zo();ur=class{constructor(e,r,n){this._tracerProvider=n;let o=x_(r);this._sampler=o.sampler,this._generalLimits=o.generalLimits,this._spanLimits=o.spanLimits,this._idGenerator=r.idGenerator||new Et,this.resource=n.resource,this.instrumentationLibrary=e}startSpan(e,r={},n=J.active()){var o,s,a;r.root&&(n=D.deleteSpan(n));let i=D.getSpan(n);if(se(n))return S.debug("Instrumentation suppressed, returning Noop Span"),D.wrapSpanContext(Bt);let c=i==null?void 0:i.spanContext(),u=this._idGenerator.generateSpanId(),p,_,l;!c||!D.isSpanContextValid(c)?p=this._idGenerator.generateTraceId():(p=c.traceId,_=c.traceState,l=c.spanId);let T=(o=r.kind)!==null&&o!==void 0?o:Ft.INTERNAL,m=((s=r.links)!==null&&s!==void 0?s:[]).map(V=>({context:V.context,attributes:nt(V.attributes)})),R=nt(r.attributes),g=this._sampler.shouldSample(n,p,e,T,R,m);_=(a=g.traceState)!==null&&a!==void 0?a:_;let w=g.decision===Ae.RECORD_AND_SAMPLED?b.SAMPLED:b.NONE,x={traceId:p,spanId:u,traceFlags:w,traceState:_};if(g.decision===Ae.NOT_RECORD)return S.debug("Recording is off, propagating context in a non-recording span"),D.wrapSpanContext(x);let v=nt(Object.assign(R,g.attributes));return new ir(this,n,e,x,T,l,m,r.startTime,void 0,v)}startActiveSpan(e,r,n,o){let s,a,i;if(arguments.length<2)return;arguments.length===2?i=r:arguments.length===3?(s=r,i=n):(s=r,a=n,i=o);let c=a??J.active(),u=this.startSpan(e,s,c),p=D.setSpan(c,u);return J.with(p,i,void 0,u)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}});var _n,G_=E(()=>{K();_n=class{constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let r of this._spanProcessors)e.push(r.forceFlush());return new Promise(r=>{Promise.all(e).then(()=>{r()}).catch(n=>{Ee(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(e,r){for(let n of this._spanProcessors)n.onStart(e,r)}onEnd(e){for(let r of this._spanProcessors)r.onEnd(e)}shutdown(){let e=[];for(let r of this._spanProcessors)e.push(r.shutdown());return new Promise((r,n)=>{Promise.all(e).then(()=>{r()},n)})}}});var pr,Pi=E(()=>{pr=class{onStart(e,r){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}});var ze,Er,B_=E(()=>{O();K();Ei();Ni();vi();G_();Pi();zo();Oi();(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(ze||(ze={}));Er=class{constructor(e={}){var r,n;this._registeredSpanProcessors=[],this._tracers=new Map;let o=yo({},Ko(),y_(e));if(this.resource=(r=o.resource)!==null&&r!==void 0?r:B.empty(),o.mergeResourceWithDefaults&&(this.resource=B.default().merge(this.resource)),this._config=Object.assign({},o,{resource:this.resource}),!((n=e.spanProcessors)===null||n===void 0)&&n.length)this._registeredSpanProcessors=[...e.spanProcessors],this.activeSpanProcessor=new _n(this._registeredSpanProcessors);else{let s=this._buildExporterFromEnv();if(s!==void 0){let a=new pt(s);this.activeSpanProcessor=a}else this.activeSpanProcessor=new pr}}getTracer(e,r,n){let o=`${e}@${r||""}:${(n==null?void 0:n.schemaUrl)||""}`;return this._tracers.has(o)||this._tracers.set(o,new ur({name:e,version:r,schemaUrl:n==null?void 0:n.schemaUrl},this._config,this)),this._tracers.get(o)}addSpanProcessor(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(r=>S.error("Error while trying to shutdown current span processor",r)),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new _n(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){D.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&J.setGlobalContextManager(e.contextManager),e.propagator&&oe.setGlobalPropagator(e.propagator)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(n=>new Promise(o=>{let s,a=setTimeout(()=>{o(new Error(`Span processor did not completed within timeout period of ${e} ms`)),s=ze.timeout},e);n.forceFlush().then(()=>{clearTimeout(a),s!==ze.timeout&&(s=ze.resolved,o(s))}).catch(i=>{clearTimeout(a),s=ze.error,o(i)})}));return new Promise((n,o)=>{Promise.all(r).then(s=>{let a=s.filter(i=>i!==ze.resolved);a.length>0?o(a):n()}).catch(s=>o([s]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var r;return(r=this.constructor._registeredPropagators.get(e))===null||r===void 0?void 0:r()}_getSpanExporter(e){var r;return(r=this.constructor._registeredExporters.get(e))===null||r===void 0?void 0:r()}_buildPropagatorFromEnv(){let e=Array.from(new Set(me().OTEL_PROPAGATORS)),n=e.map(o=>{let s=this._getPropagator(o);return s||S.warn(`Propagator "${o}" requested through environment variable is unavailable.`),s}).reduce((o,s)=>(s&&o.push(s),o),[]);if(n.length!==0)return e.length===1?n[0]:new Wt({propagators:n})}_buildExporterFromEnv(){let e=me().OTEL_TRACES_EXPORTER;if(e==="none"||e==="")return;let r=this._getSpanExporter(e);return r||S.error(`Exporter "${e}" requested through environment variable is unavailable.`),r}};Er._registeredPropagators=new Map([["tracecontext",()=>new it],["baggage",()=>new kt]]);Er._registeredExporters=new Map});var Jo,F_=E(()=>{K();Jo=class{export(e,r){return this._sendSpans(e,r)}shutdown(){return this._sendSpans([]),this.forceFlush()}forceFlush(){return Promise.resolve()}_exportInfo(e){var r;return{resource:{attributes:e.resource.attributes},instrumentationScope:e.instrumentationLibrary,traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:(r=e.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:zr(e.startTime),duration:zr(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}}_sendSpans(e,r){for(let n of e)console.dir(this._exportInfo(n),{depth:3});if(r)return r({code:ae.SUCCESS})}}});var Qo,H_=E(()=>{K();Qo=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,r){if(this._stopped)return r({code:ae.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout(()=>r({code:ae.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()}forceFlush(){return Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}});var Zo,k_=E(()=>{O();K();Zo=class{constructor(e){this._exporter=e,this._shutdownOnce=new ke(this._shutdown,this),this._unresolvedExports=new Set}async forceFlush(){await Promise.all(Array.from(this._unresolvedExports)),this._exporter.forceFlush&&await this._exporter.forceFlush()}onStart(e,r){}onEnd(e){var r,n;if(this._shutdownOnce.isCalled||(e.spanContext().traceFlags&b.SAMPLED)===0)return;let o=()=>Ya._export(this._exporter,[e]).then(s=>{var a;s.code!==ae.SUCCESS&&Ee((a=s.error)!==null&&a!==void 0?a:new Error(`SimpleSpanProcessor: span export failed (status ${s})`))}).catch(s=>{Ee(s)});if(e.resource.asyncAttributesPending){let s=(n=(r=e.resource).waitForAsyncAttributes)===null||n===void 0?void 0:n.call(r).then(()=>(s!=null&&this._unresolvedExports.delete(s),o()),a=>Ee(a));s!=null&&this._unresolvedExports.add(s)}else o()}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}}});var Ci={};pe(Ci,{AlwaysOffSampler:()=>$e,AlwaysOnSampler:()=>Ce,BasicTracerProvider:()=>Er,BatchSpanProcessor:()=>pt,ConsoleSpanExporter:()=>Jo,ForceFlushState:()=>ze,InMemorySpanExporter:()=>Qo,NoopSpanProcessor:()=>pr,ParentBasedSampler:()=>ut,RandomIdGenerator:()=>Et,SamplingDecision:()=>Ve,SimpleSpanProcessor:()=>Zo,Span:()=>ir,TraceIdRatioBasedSampler:()=>Lt,Tracer:()=>ur});var Li=E(()=>{Ni();B_();zo();F_();H_();k_();Pi();qo();jo();mi();Ri();En();hi()});var ln=f((Cb,$_)=>{"use strict";var hR="2.0.0",mR=Number.MAX_SAFE_INTEGER||9007199254740991,RR=16,gR=250,vR=["major","premajor","minor","preminor","patch","prepatch","prerelease"];$_.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:RR,MAX_SAFE_BUILD_LENGTH:gR,MAX_SAFE_INTEGER:mR,RELEASE_TYPES:vR,SEMVER_SPEC_VERSION:hR,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Tn=f((Lb,Y_)=>{"use strict";var OR=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Y_.exports=OR});var _r=f((Ye,q_)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Ii,MAX_SAFE_BUILD_LENGTH:NR,MAX_LENGTH:PR}=ln(),CR=Tn();Ye=q_.exports={};var LR=Ye.re=[],IR=Ye.safeRe=[],d=Ye.src=[],MR=Ye.safeSrc=[],A=Ye.t={},xR=0,Mi="[a-zA-Z0-9-]",yR=[["\\s",1],["\\d",PR],[Mi,NR]],DR=t=>{for(let[e,r]of yR)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},C=(t,e,r)=>{let n=DR(e),o=xR++;CR(t,o,e),A[t]=o,d[o]=e,MR[o]=n,LR[o]=new RegExp(e,r?"g":void 0),IR[o]=new RegExp(n,r?"g":void 0)};C("NUMERICIDENTIFIER","0|[1-9]\\d*");C("NUMERICIDENTIFIERLOOSE","\\d+");C("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Mi}*`);C("MAINVERSION",`(${d[A.NUMERICIDENTIFIER]})\\.(${d[A.NUMERICIDENTIFIER]})\\.(${d[A.NUMERICIDENTIFIER]})`);C("MAINVERSIONLOOSE",`(${d[A.NUMERICIDENTIFIERLOOSE]})\\.(${d[A.NUMERICIDENTIFIERLOOSE]})\\.(${d[A.NUMERICIDENTIFIERLOOSE]})`);C("PRERELEASEIDENTIFIER",`(?:${d[A.NONNUMERICIDENTIFIER]}|${d[A.NUMERICIDENTIFIER]})`);C("PRERELEASEIDENTIFIERLOOSE",`(?:${d[A.NONNUMERICIDENTIFIER]}|${d[A.NUMERICIDENTIFIERLOOSE]})`);C("PRERELEASE",`(?:-(${d[A.PRERELEASEIDENTIFIER]}(?:\\.${d[A.PRERELEASEIDENTIFIER]})*))`);C("PRERELEASELOOSE",`(?:-?(${d[A.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[A.PRERELEASEIDENTIFIERLOOSE]})*))`);C("BUILDIDENTIFIER",`${Mi}+`);C("BUILD",`(?:\\+(${d[A.BUILDIDENTIFIER]}(?:\\.${d[A.BUILDIDENTIFIER]})*))`);C("FULLPLAIN",`v?${d[A.MAINVERSION]}${d[A.PRERELEASE]}?${d[A.BUILD]}?`);C("FULL",`^${d[A.FULLPLAIN]}$`);C("LOOSEPLAIN",`[v=\\s]*${d[A.MAINVERSIONLOOSE]}${d[A.PRERELEASELOOSE]}?${d[A.BUILD]}?`);C("LOOSE",`^${d[A.LOOSEPLAIN]}$`);C("GTLT","((?:<|>)?=?)");C("XRANGEIDENTIFIERLOOSE",`${d[A.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);C("XRANGEIDENTIFIER",`${d[A.NUMERICIDENTIFIER]}|x|X|\\*`);C("XRANGEPLAIN",`[v=\\s]*(${d[A.XRANGEIDENTIFIER]})(?:\\.(${d[A.XRANGEIDENTIFIER]})(?:\\.(${d[A.XRANGEIDENTIFIER]})(?:${d[A.PRERELEASE]})?${d[A.BUILD]}?)?)?`);C("XRANGEPLAINLOOSE",`[v=\\s]*(${d[A.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[A.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[A.XRANGEIDENTIFIERLOOSE]})(?:${d[A.PRERELEASELOOSE]})?${d[A.BUILD]}?)?)?`);C("XRANGE",`^${d[A.GTLT]}\\s*${d[A.XRANGEPLAIN]}$`);C("XRANGELOOSE",`^${d[A.GTLT]}\\s*${d[A.XRANGEPLAINLOOSE]}$`);C("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Ii}})(?:\\.(\\d{1,${Ii}}))?(?:\\.(\\d{1,${Ii}}))?`);C("COERCE",`${d[A.COERCEPLAIN]}(?:$|[^\\d])`);C("COERCEFULL",d[A.COERCEPLAIN]+`(?:${d[A.PRERELEASE]})?(?:${d[A.BUILD]})?(?:$|[^\\d])`);C("COERCERTL",d[A.COERCE],!0);C("COERCERTLFULL",d[A.COERCEFULL],!0);C("LONETILDE","(?:~>?)");C("TILDETRIM",`(\\s*)${d[A.LONETILDE]}\\s+`,!0);Ye.tildeTrimReplace="$1~";C("TILDE",`^${d[A.LONETILDE]}${d[A.XRANGEPLAIN]}$`);C("TILDELOOSE",`^${d[A.LONETILDE]}${d[A.XRANGEPLAINLOOSE]}$`);C("LONECARET","(?:\\^)");C("CARETTRIM",`(\\s*)${d[A.LONECARET]}\\s+`,!0);Ye.caretTrimReplace="$1^";C("CARET",`^${d[A.LONECARET]}${d[A.XRANGEPLAIN]}$`);C("CARETLOOSE",`^${d[A.LONECARET]}${d[A.XRANGEPLAINLOOSE]}$`);C("COMPARATORLOOSE",`^${d[A.GTLT]}\\s*(${d[A.LOOSEPLAIN]})$|^$`);C("COMPARATOR",`^${d[A.GTLT]}\\s*(${d[A.FULLPLAIN]})$|^$`);C("COMPARATORTRIM",`(\\s*)${d[A.GTLT]}\\s*(${d[A.LOOSEPLAIN]}|${d[A.XRANGEPLAIN]})`,!0);Ye.comparatorTrimReplace="$1$2$3";C("HYPHENRANGE",`^\\s*(${d[A.XRANGEPLAIN]})\\s+-\\s+(${d[A.XRANGEPLAIN]})\\s*$`);C("HYPHENRANGELOOSE",`^\\s*(${d[A.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[A.XRANGEPLAINLOOSE]})\\s*$`);C("STAR","(<|>)?=?\\s*\\*");C("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");C("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var es=f((Ib,j_)=>{"use strict";var UR=Object.freeze({loose:!0}),bR=Object.freeze({}),wR=t=>t?typeof t!="object"?UR:t:bR;j_.exports=wR});var xi=f((Mb,W_)=>{"use strict";var K_=/^[0-9]+$/,X_=(t,e)=>{let r=K_.test(t),n=K_.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},VR=(t,e)=>X_(e,t);W_.exports={compareIdentifiers:X_,rcompareIdentifiers:VR}});var ie=f((xb,J_)=>{"use strict";var ts=Tn(),{MAX_LENGTH:z_,MAX_SAFE_INTEGER:rs}=ln(),{safeRe:ns,t:os}=_r(),GR=es(),{compareIdentifiers:lr}=xi(),yi=class t{constructor(e,r){if(r=GR(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>z_)throw new TypeError(`version is longer than ${z_} characters`);ts("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?ns[os.LOOSE]:ns[os.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>rs||this.major<0)throw new TypeError("Invalid major version");if(this.minor>rs||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>rs||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let s=+o;if(s>=0&&s<rs)return s}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ts("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),lr(this.major,e.major)||lr(this.minor,e.minor)||lr(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],o=e.prerelease[r];if(ts("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return lr(n,o)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],o=e.build[r];if(ts("build compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return lr(n,o)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let o=`-${r}`.match(this.options.loose?ns[os.PRERELEASELOOSE]:ns[os.PRERELEASE]);if(!o||o[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[o];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(r){let s=[r,o];n===!1&&(s=[r]),lr(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};J_.exports=yi});var It=f((yb,Z_)=>{"use strict";var Q_=ie(),BR=(t,e,r=!1)=>{if(t instanceof Q_)return t;try{return new Q_(t,e)}catch(n){if(!r)return null;throw n}};Z_.exports=BR});var tl=f((Db,el)=>{"use strict";var FR=It(),HR=(t,e)=>{let r=FR(t,e);return r?r.version:null};el.exports=HR});var nl=f((Ub,rl)=>{"use strict";var kR=It(),$R=(t,e)=>{let r=kR(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};rl.exports=$R});var al=f((bb,sl)=>{"use strict";var ol=ie(),YR=(t,e,r,n,o)=>{typeof r=="string"&&(o=n,n=r,r=void 0);try{return new ol(t instanceof ol?t.version:t,r).inc(e,n,o).version}catch{return null}};sl.exports=YR});var ul=f((wb,cl)=>{"use strict";var il=It(),qR=(t,e)=>{let r=il(t,null,!0),n=il(e,null,!0),o=r.compare(n);if(o===0)return null;let s=o>0,a=s?r:n,i=s?n:r,c=!!a.prerelease.length;if(!!i.prerelease.length&&!c){if(!i.patch&&!i.minor)return"major";if(i.compareMain(a)===0)return i.minor&&!i.patch?"minor":"patch"}let p=c?"pre":"";return r.major!==n.major?p+"major":r.minor!==n.minor?p+"minor":r.patch!==n.patch?p+"patch":"prerelease"};cl.exports=qR});var El=f((Vb,pl)=>{"use strict";var jR=ie(),KR=(t,e)=>new jR(t,e).major;pl.exports=KR});var ll=f((Gb,_l)=>{"use strict";var XR=ie(),WR=(t,e)=>new XR(t,e).minor;_l.exports=WR});var Sl=f((Bb,Tl)=>{"use strict";var zR=ie(),JR=(t,e)=>new zR(t,e).patch;Tl.exports=JR});var dl=f((Fb,fl)=>{"use strict";var QR=It(),ZR=(t,e)=>{let r=QR(t,e);return r&&r.prerelease.length?r.prerelease:null};fl.exports=ZR});var Le=f((Hb,hl)=>{"use strict";var Al=ie(),eg=(t,e,r)=>new Al(t,r).compare(new Al(e,r));hl.exports=eg});var Rl=f((kb,ml)=>{"use strict";var tg=Le(),rg=(t,e,r)=>tg(e,t,r);ml.exports=rg});var vl=f(($b,gl)=>{"use strict";var ng=Le(),og=(t,e)=>ng(t,e,!0);gl.exports=og});var ss=f((Yb,Nl)=>{"use strict";var Ol=ie(),sg=(t,e,r)=>{let n=new Ol(t,r),o=new Ol(e,r);return n.compare(o)||n.compareBuild(o)};Nl.exports=sg});var Cl=f((qb,Pl)=>{"use strict";var ag=ss(),ig=(t,e)=>t.sort((r,n)=>ag(r,n,e));Pl.exports=ig});var Il=f((jb,Ll)=>{"use strict";var cg=ss(),ug=(t,e)=>t.sort((r,n)=>cg(n,r,e));Ll.exports=ug});var Sn=f((Kb,Ml)=>{"use strict";var pg=Le(),Eg=(t,e,r)=>pg(t,e,r)>0;Ml.exports=Eg});var as=f((Xb,xl)=>{"use strict";var _g=Le(),lg=(t,e,r)=>_g(t,e,r)<0;xl.exports=lg});var Di=f((Wb,yl)=>{"use strict";var Tg=Le(),Sg=(t,e,r)=>Tg(t,e,r)===0;yl.exports=Sg});var Ui=f((zb,Dl)=>{"use strict";var fg=Le(),dg=(t,e,r)=>fg(t,e,r)!==0;Dl.exports=dg});var is=f((Jb,Ul)=>{"use strict";var Ag=Le(),hg=(t,e,r)=>Ag(t,e,r)>=0;Ul.exports=hg});var cs=f((Qb,bl)=>{"use strict";var mg=Le(),Rg=(t,e,r)=>mg(t,e,r)<=0;bl.exports=Rg});var bi=f((Zb,wl)=>{"use strict";var gg=Di(),vg=Ui(),Og=Sn(),Ng=is(),Pg=as(),Cg=cs(),Lg=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return gg(t,r,n);case"!=":return vg(t,r,n);case">":return Og(t,r,n);case">=":return Ng(t,r,n);case"<":return Pg(t,r,n);case"<=":return Cg(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};wl.exports=Lg});var Gl=f((ew,Vl)=>{"use strict";var Ig=ie(),Mg=It(),{safeRe:us,t:ps}=_r(),xg=(t,e)=>{if(t instanceof Ig)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?us[ps.COERCEFULL]:us[ps.COERCE]);else{let c=e.includePrerelease?us[ps.COERCERTLFULL]:us[ps.COERCERTL],u;for(;(u=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],o=r[3]||"0",s=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",i=e.includePrerelease&&r[6]?`+${r[6]}`:"";return Mg(`${n}.${o}.${s}${a}${i}`,e)};Vl.exports=xg});var Fl=f((tw,Bl)=>{"use strict";var wi=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(e,r)}return this}};Bl.exports=wi});var Ie=f((rw,Yl)=>{"use strict";var yg=/\s+/g,Vi=class t{constructor(e,r){if(r=Ug(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof Gi)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(yg," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(o=>!kl(o[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&Hg(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&Bg)|(this.options.loose&&Fg))+":"+e,o=Hl.get(n);if(o)return o;let s=this.options.loose,a=s?Re[_e.HYPHENRANGELOOSE]:Re[_e.HYPHENRANGE];e=e.replace(a,Jg(this.options.includePrerelease)),k("hyphen replace",e),e=e.replace(Re[_e.COMPARATORTRIM],wg),k("comparator trim",e),e=e.replace(Re[_e.TILDETRIM],Vg),k("tilde trim",e),e=e.replace(Re[_e.CARETTRIM],Gg),k("caret trim",e);let i=e.split(" ").map(_=>kg(_,this.options)).join(" ").split(/\s+/).map(_=>zg(_,this.options));s&&(i=i.filter(_=>(k("loose invalid filter",_,this.options),!!_.match(Re[_e.COMPARATORLOOSE])))),k("range list",i);let c=new Map,u=i.map(_=>new Gi(_,this.options));for(let _ of u){if(kl(_))return[_];c.set(_.value,_)}c.size>1&&c.has("")&&c.delete("");let p=[...c.values()];return Hl.set(n,p),p}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>$l(n,r)&&e.set.some(o=>$l(o,r)&&n.every(s=>o.every(a=>s.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new bg(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Qg(this.set[r],e,this.options))return!0;return!1}};Yl.exports=Vi;var Dg=Fl(),Hl=new Dg,Ug=es(),Gi=fn(),k=Tn(),bg=ie(),{safeRe:Re,t:_e,comparatorTrimReplace:wg,tildeTrimReplace:Vg,caretTrimReplace:Gg}=_r(),{FLAG_INCLUDE_PRERELEASE:Bg,FLAG_LOOSE:Fg}=ln(),kl=t=>t.value==="<0.0.0-0",Hg=t=>t.value==="",$l=(t,e)=>{let r=!0,n=t.slice(),o=n.pop();for(;r&&n.length;)r=n.every(s=>o.intersects(s,e)),o=n.pop();return r},kg=(t,e)=>(k("comp",t,e),t=qg(t,e),k("caret",t),t=$g(t,e),k("tildes",t),t=Kg(t,e),k("xrange",t),t=Wg(t,e),k("stars",t),t),le=t=>!t||t.toLowerCase()==="x"||t==="*",$g=(t,e)=>t.trim().split(/\s+/).map(r=>Yg(r,e)).join(" "),Yg=(t,e)=>{let r=e.loose?Re[_e.TILDELOOSE]:Re[_e.TILDE];return t.replace(r,(n,o,s,a,i)=>{k("tilde",t,n,o,s,a,i);let c;return le(o)?c="":le(s)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:le(a)?c=`>=${o}.${s}.0 <${o}.${+s+1}.0-0`:i?(k("replaceTilde pr",i),c=`>=${o}.${s}.${a}-${i} <${o}.${+s+1}.0-0`):c=`>=${o}.${s}.${a} <${o}.${+s+1}.0-0`,k("tilde return",c),c})},qg=(t,e)=>t.trim().split(/\s+/).map(r=>jg(r,e)).join(" "),jg=(t,e)=>{k("caret",t,e);let r=e.loose?Re[_e.CARETLOOSE]:Re[_e.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(o,s,a,i,c)=>{k("caret",t,o,s,a,i,c);let u;return le(s)?u="":le(a)?u=`>=${s}.0.0${n} <${+s+1}.0.0-0`:le(i)?s==="0"?u=`>=${s}.${a}.0${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.0${n} <${+s+1}.0.0-0`:c?(k("replaceCaret pr",c),s==="0"?a==="0"?u=`>=${s}.${a}.${i}-${c} <${s}.${a}.${+i+1}-0`:u=`>=${s}.${a}.${i}-${c} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${i}-${c} <${+s+1}.0.0-0`):(k("no pr"),s==="0"?a==="0"?u=`>=${s}.${a}.${i}${n} <${s}.${a}.${+i+1}-0`:u=`>=${s}.${a}.${i}${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${i} <${+s+1}.0.0-0`),k("caret return",u),u})},Kg=(t,e)=>(k("replaceXRanges",t,e),t.split(/\s+/).map(r=>Xg(r,e)).join(" ")),Xg=(t,e)=>{t=t.trim();let r=e.loose?Re[_e.XRANGELOOSE]:Re[_e.XRANGE];return t.replace(r,(n,o,s,a,i,c)=>{k("xRange",t,n,o,s,a,i,c);let u=le(s),p=u||le(a),_=p||le(i),l=_;return o==="="&&l&&(o=""),c=e.includePrerelease?"-0":"",u?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&l?(p&&(a=0),i=0,o===">"?(o=">=",p?(s=+s+1,a=0,i=0):(a=+a+1,i=0)):o==="<="&&(o="<",p?s=+s+1:a=+a+1),o==="<"&&(c="-0"),n=`${o+s}.${a}.${i}${c}`):p?n=`>=${s}.0.0${c} <${+s+1}.0.0-0`:_&&(n=`>=${s}.${a}.0${c} <${s}.${+a+1}.0-0`),k("xRange return",n),n})},Wg=(t,e)=>(k("replaceStars",t,e),t.trim().replace(Re[_e.STAR],"")),zg=(t,e)=>(k("replaceGTE0",t,e),t.trim().replace(Re[e.includePrerelease?_e.GTE0PRE:_e.GTE0],"")),Jg=t=>(e,r,n,o,s,a,i,c,u,p,_,l)=>(le(n)?r="":le(o)?r=`>=${n}.0.0${t?"-0":""}`:le(s)?r=`>=${n}.${o}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,le(u)?c="":le(p)?c=`<${+u+1}.0.0-0`:le(_)?c=`<${u}.${+p+1}.0-0`:l?c=`<=${u}.${p}.${_}-${l}`:t?c=`<${u}.${p}.${+_+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),Qg=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(k(t[n].semver),t[n].semver!==Gi.ANY&&t[n].semver.prerelease.length>0){let o=t[n].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}});var fn=f((nw,zl)=>{"use strict";var dn=Symbol("SemVer ANY"),Hi=class t{static get ANY(){return dn}constructor(e,r){if(r=ql(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Fi("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===dn?this.value="":this.value=this.operator+this.semver.version,Fi("comp",this)}parse(e){let r=this.options.loose?jl[Kl.COMPARATORLOOSE]:jl[Kl.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Xl(n[2],this.options.loose):this.semver=dn}toString(){return this.value}test(e){if(Fi("Comparator.test",e,this.options.loose),this.semver===dn||e===dn)return!0;if(typeof e=="string")try{e=new Xl(e,this.options)}catch{return!1}return Bi(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Wl(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new Wl(this.value,r).test(e.semver):(r=ql(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Bi(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Bi(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};zl.exports=Hi;var ql=es(),{safeRe:jl,t:Kl}=_r(),Bi=bi(),Fi=Tn(),Xl=ie(),Wl=Ie()});var An=f((ow,Jl)=>{"use strict";var Zg=Ie(),ev=(t,e,r)=>{try{e=new Zg(e,r)}catch{return!1}return e.test(t)};Jl.exports=ev});var Zl=f((sw,Ql)=>{"use strict";var tv=Ie(),rv=(t,e)=>new tv(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Ql.exports=rv});var tT=f((aw,eT)=>{"use strict";var nv=ie(),ov=Ie(),sv=(t,e,r)=>{let n=null,o=null,s=null;try{s=new ov(e,r)}catch{return null}return t.forEach(a=>{s.test(a)&&(!n||o.compare(a)===-1)&&(n=a,o=new nv(n,r))}),n};eT.exports=sv});var nT=f((iw,rT)=>{"use strict";var av=ie(),iv=Ie(),cv=(t,e,r)=>{let n=null,o=null,s=null;try{s=new iv(e,r)}catch{return null}return t.forEach(a=>{s.test(a)&&(!n||o.compare(a)===1)&&(n=a,o=new av(n,r))}),n};rT.exports=cv});var aT=f((cw,sT)=>{"use strict";var ki=ie(),uv=Ie(),oT=Sn(),pv=(t,e)=>{t=new uv(t,e);let r=new ki("0.0.0");if(t.test(r)||(r=new ki("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let o=t.set[n],s=null;o.forEach(a=>{let i=new ki(a.semver.version);switch(a.operator){case">":i.prerelease.length===0?i.patch++:i.prerelease.push(0),i.raw=i.format();case"":case">=":(!s||oT(i,s))&&(s=i);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!r||oT(r,s))&&(r=s)}return r&&t.test(r)?r:null};sT.exports=pv});var cT=f((uw,iT)=>{"use strict";var Ev=Ie(),_v=(t,e)=>{try{return new Ev(t,e).range||"*"}catch{return null}};iT.exports=_v});var Es=f((pw,_T)=>{"use strict";var lv=ie(),ET=fn(),{ANY:Tv}=ET,Sv=Ie(),fv=An(),uT=Sn(),pT=as(),dv=cs(),Av=is(),hv=(t,e,r,n)=>{t=new lv(t,n),e=new Sv(e,n);let o,s,a,i,c;switch(r){case">":o=uT,s=dv,a=pT,i=">",c=">=";break;case"<":o=pT,s=Av,a=uT,i="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(fv(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let p=e.set[u],_=null,l=null;if(p.forEach(T=>{T.semver===Tv&&(T=new ET(">=0.0.0")),_=_||T,l=l||T,o(T.semver,_.semver,n)?_=T:a(T.semver,l.semver,n)&&(l=T)}),_.operator===i||_.operator===c||(!l.operator||l.operator===i)&&s(t,l.semver))return!1;if(l.operator===c&&a(t,l.semver))return!1}return!0};_T.exports=hv});var TT=f((Ew,lT)=>{"use strict";var mv=Es(),Rv=(t,e,r)=>mv(t,e,">",r);lT.exports=Rv});var fT=f((_w,ST)=>{"use strict";var gv=Es(),vv=(t,e,r)=>gv(t,e,"<",r);ST.exports=vv});var hT=f((lw,AT)=>{"use strict";var dT=Ie(),Ov=(t,e,r)=>(t=new dT(t,r),e=new dT(e,r),t.intersects(e,r));AT.exports=Ov});var RT=f((Tw,mT)=>{"use strict";var Nv=An(),Pv=Le();mT.exports=(t,e,r)=>{let n=[],o=null,s=null,a=t.sort((p,_)=>Pv(p,_,r));for(let p of a)Nv(p,e,r)?(s=p,o||(o=p)):(s&&n.push([o,s]),s=null,o=null);o&&n.push([o,null]);let i=[];for(let[p,_]of n)p===_?i.push(p):!_&&p===a[0]?i.push("*"):_?p===a[0]?i.push(`<=${_}`):i.push(`${p} - ${_}`):i.push(`>=${p}`);let c=i.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var CT=f((Sw,PT)=>{"use strict";var gT=Ie(),Yi=fn(),{ANY:$i}=Yi,hn=An(),qi=Le(),Cv=(t,e,r={})=>{if(t===e)return!0;t=new gT(t,r),e=new gT(e,r);let n=!1;e:for(let o of t.set){for(let s of e.set){let a=Iv(o,s,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},Lv=[new Yi(">=0.0.0-0")],vT=[new Yi(">=0.0.0")],Iv=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===$i){if(e.length===1&&e[0].semver===$i)return!0;r.includePrerelease?t=Lv:t=vT}if(e.length===1&&e[0].semver===$i){if(r.includePrerelease)return!0;e=vT}let n=new Set,o,s;for(let T of t)T.operator===">"||T.operator===">="?o=OT(o,T,r):T.operator==="<"||T.operator==="<="?s=NT(s,T,r):n.add(T.semver);if(n.size>1)return null;let a;if(o&&s){if(a=qi(o.semver,s.semver,r),a>0)return null;if(a===0&&(o.operator!==">="||s.operator!=="<="))return null}for(let T of n){if(o&&!hn(T,String(o),r)||s&&!hn(T,String(s),r))return null;for(let m of e)if(!hn(T,String(m),r))return!1;return!0}let i,c,u,p,_=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,l=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;_&&_.prerelease.length===1&&s.operator==="<"&&_.prerelease[0]===0&&(_=!1);for(let T of e){if(p=p||T.operator===">"||T.operator===">=",u=u||T.operator==="<"||T.operator==="<=",o){if(l&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===l.major&&T.semver.minor===l.minor&&T.semver.patch===l.patch&&(l=!1),T.operator===">"||T.operator===">="){if(i=OT(o,T,r),i===T&&i!==o)return!1}else if(o.operator===">="&&!hn(o.semver,String(T),r))return!1}if(s){if(_&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===_.major&&T.semver.minor===_.minor&&T.semver.patch===_.patch&&(_=!1),T.operator==="<"||T.operator==="<="){if(c=NT(s,T,r),c===T&&c!==s)return!1}else if(s.operator==="<="&&!hn(s.semver,String(T),r))return!1}if(!T.operator&&(s||o)&&a!==0)return!1}return!(o&&u&&!s&&a!==0||s&&p&&!o&&a!==0||l||_)},OT=(t,e,r)=>{if(!t)return e;let n=qi(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},NT=(t,e,r)=>{if(!t)return e;let n=qi(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};PT.exports=Cv});var xT=f((fw,MT)=>{"use strict";var ji=_r(),LT=ln(),Mv=ie(),IT=xi(),xv=It(),yv=tl(),Dv=nl(),Uv=al(),bv=ul(),wv=El(),Vv=ll(),Gv=Sl(),Bv=dl(),Fv=Le(),Hv=Rl(),kv=vl(),$v=ss(),Yv=Cl(),qv=Il(),jv=Sn(),Kv=as(),Xv=Di(),Wv=Ui(),zv=is(),Jv=cs(),Qv=bi(),Zv=Gl(),eO=fn(),tO=Ie(),rO=An(),nO=Zl(),oO=tT(),sO=nT(),aO=aT(),iO=cT(),cO=Es(),uO=TT(),pO=fT(),EO=hT(),_O=RT(),lO=CT();MT.exports={parse:xv,valid:yv,clean:Dv,inc:Uv,diff:bv,major:wv,minor:Vv,patch:Gv,prerelease:Bv,compare:Fv,rcompare:Hv,compareLoose:kv,compareBuild:$v,sort:Yv,rsort:qv,gt:jv,lt:Kv,eq:Xv,neq:Wv,gte:zv,lte:Jv,cmp:Qv,coerce:Zv,Comparator:eO,Range:tO,satisfies:rO,toComparators:nO,maxSatisfying:oO,minSatisfying:sO,minVersion:aO,validRange:iO,outside:cO,gtr:uO,ltr:pO,intersects:EO,simplifyRange:_O,subset:lO,SemVer:Mv,re:ji.re,src:ji.src,tokens:ji.t,SEMVER_SPEC_VERSION:LT.SEMVER_SPEC_VERSION,RELEASE_TYPES:LT.RELEASE_TYPES,compareIdentifiers:IT.compareIdentifiers,rcompareIdentifiers:IT.rcompareIdentifiers}});function SO(t){var e=decodeURIComponent(t).split(":");if(e.length!==4)return null;var r=DT(e,4),n=r[0],o=r[1],s=r[3],a=n.padStart(32,"0"),i=o.padStart(16,"0"),c=TO.test(s)?parseInt(s,16)&1:1;return{traceId:a,spanId:i,isRemote:!0,traceFlags:c}}var yT,DT,Ki,_s,UT,TO,bT=E(()=>{O();K();yT=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DT=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(i){a={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},Ki="uber-trace-id",_s="uberctx",UT=(function(){function t(e){typeof e=="string"?(this._jaegerTraceHeader=e,this._jaegerBaggageHeaderPrefix=_s):(this._jaegerTraceHeader=(e==null?void 0:e.customTraceHeader)||Ki,this._jaegerBaggageHeaderPrefix=(e==null?void 0:e.customBaggageHeaderPrefix)||_s)}return t.prototype.inject=function(e,r,n){var o,s,a=D.getSpanContext(e),i=oe.getBaggage(e);if(a&&se(e)===!1){var c="0"+(a.traceFlags||b.NONE).toString(16);n.set(r,this._jaegerTraceHeader,a.traceId+":"+a.spanId+":0:"+c)}if(i)try{for(var u=yT(i.getAllEntries()),p=u.next();!p.done;p=u.next()){var _=DT(p.value,2),l=_[0],T=_[1];n.set(r,this._jaegerBaggageHeaderPrefix+"-"+l,encodeURIComponent(T.value))}}catch(m){o={error:m}}finally{try{p&&!p.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}},t.prototype.extract=function(e,r,n){var o,s,a=this,i,c=n.get(r,this._jaegerTraceHeader),u=Array.isArray(c)?c[0]:c,p=n.keys(r).filter(function(w){return w.startsWith(a._jaegerBaggageHeaderPrefix+"-")}).map(function(w){var x=n.get(r,w);return{key:w.substring(a._jaegerBaggageHeaderPrefix.length+1),value:Array.isArray(x)?x[0]:x}}),_=e;if(typeof u=="string"){var l=SO(u);l&&(_=D.setSpanContext(_,l))}if(p.length===0)return _;var T=(i=oe.getBaggage(e))!==null&&i!==void 0?i:oe.createBaggage();try{for(var m=yT(p),R=m.next();!R.done;R=m.next()){var g=R.value;g.value!==void 0&&(T=T.setEntry(g.key,{value:decodeURIComponent(g.value)}))}}catch(w){o={error:w}}finally{try{R&&!R.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}return _=oe.setBaggage(_,T),_},t.prototype.fields=function(){return[this._jaegerTraceHeader]},t})(),TO=/^[0-9a-f]{1,2}$/i});var wT={};pe(wT,{JaegerPropagator:()=>UT,UBER_BAGGAGE_HEADER_PREFIX:()=>_s,UBER_TRACE_ID_HEADER:()=>Ki});var VT=E(()=>{bT()});var FT=f(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.NodeTracerProvider=void 0;var GT=R_(),ls=(C_(),Ue(P_)),BT=(Li(),Ue(Ci)),fO=xT(),dO=(VT(),Ue(wT)),Ts=class extends BT.BasicTracerProvider{constructor(e={}){super(e)}register(e={}){if(e.contextManager===void 0){let r=fO.gte(process.version,"14.8.0")?GT.AsyncLocalStorageContextManager:GT.AsyncHooksContextManager;e.contextManager=new r,e.contextManager.enable()}super.register(e)}};Ss.NodeTracerProvider=Ts;Ts._registeredPropagators=new Map([...BT.BasicTracerProvider._registeredPropagators,["b3",()=>new ls.B3Propagator({injectEncoding:ls.B3InjectEncoding.SINGLE_HEADER})],["b3multi",()=>new ls.B3Propagator({injectEncoding:ls.B3InjectEncoding.MULTI_HEADER})],["jaeger",()=>new dO.JaegerPropagator]])});var fs=f(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.Tracer=U.TraceIdRatioBasedSampler=U.Span=U.SimpleSpanProcessor=U.SamplingDecision=U.RandomIdGenerator=U.ParentBasedSampler=U.NoopSpanProcessor=U.InMemorySpanExporter=U.ForceFlushState=U.ConsoleSpanExporter=U.BatchSpanProcessor=U.BasicTracerProvider=U.AlwaysOnSampler=U.AlwaysOffSampler=U.NodeTracerProvider=void 0;var AO=FT();Object.defineProperty(U,"NodeTracerProvider",{enumerable:!0,get:function(){return AO.NodeTracerProvider}});var Te=(Li(),Ue(Ci));Object.defineProperty(U,"AlwaysOffSampler",{enumerable:!0,get:function(){return Te.AlwaysOffSampler}});Object.defineProperty(U,"AlwaysOnSampler",{enumerable:!0,get:function(){return Te.AlwaysOnSampler}});Object.defineProperty(U,"BasicTracerProvider",{enumerable:!0,get:function(){return Te.BasicTracerProvider}});Object.defineProperty(U,"BatchSpanProcessor",{enumerable:!0,get:function(){return Te.BatchSpanProcessor}});Object.defineProperty(U,"ConsoleSpanExporter",{enumerable:!0,get:function(){return Te.ConsoleSpanExporter}});Object.defineProperty(U,"ForceFlushState",{enumerable:!0,get:function(){return Te.ForceFlushState}});Object.defineProperty(U,"InMemorySpanExporter",{enumerable:!0,get:function(){return Te.InMemorySpanExporter}});Object.defineProperty(U,"NoopSpanProcessor",{enumerable:!0,get:function(){return Te.NoopSpanProcessor}});Object.defineProperty(U,"ParentBasedSampler",{enumerable:!0,get:function(){return Te.ParentBasedSampler}});Object.defineProperty(U,"RandomIdGenerator",{enumerable:!0,get:function(){return Te.RandomIdGenerator}});Object.defineProperty(U,"SamplingDecision",{enumerable:!0,get:function(){return Te.SamplingDecision}});Object.defineProperty(U,"SimpleSpanProcessor",{enumerable:!0,get:function(){return Te.SimpleSpanProcessor}});Object.defineProperty(U,"Span",{enumerable:!0,get:function(){return Te.Span}});Object.defineProperty(U,"TraceIdRatioBasedSampler",{enumerable:!0,get:function(){return Te.TraceIdRatioBasedSampler}});Object.defineProperty(U,"Tracer",{enumerable:!0,get:function(){return Te.Tracer}})});var mn,HT,Xi=E(()=>{mn=class{emit(e){}},HT=new mn});var Wi,ds,zi=E(()=>{Xi();Wi=class{getLogger(e,r,n){return new mn}},ds=new Wi});var As,kT=E(()=>{Xi();As=class{constructor(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}emit(e){this._getLogger().emit(e)}_getLogger(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):HT}}});var Rn,$T=E(()=>{zi();kT();Rn=class{getLogger(e,r,n){var o;return(o=this.getDelegateLogger(e,r,n))!==null&&o!==void 0?o:new As(this,e,r,n)}getDelegate(){var e;return(e=this._delegate)!==null&&e!==void 0?e:ds}setDelegate(e){this._delegate=e}getDelegateLogger(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getLogger(e,r,n)}}});var hs,YT=E(()=>{hs=typeof globalThis=="object"?globalThis:global});var qT=E(()=>{YT()});var jT=E(()=>{qT()});function KT(t,e,r){return n=>n===t?e:r}var gn,Tr,Ji,XT=E(()=>{jT();gn=Symbol.for("io.opentelemetry.js.api.logs"),Tr=hs;Ji=1});var ms,WT=E(()=>{XT();zi();$T();ms=class t{constructor(){this._proxyLoggerProvider=new Rn}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(e){return Tr[gn]?this.getLoggerProvider():(Tr[gn]=KT(Ji,e,ds),this._proxyLoggerProvider.setDelegate(e),e)}getLoggerProvider(){var e,r;return(r=(e=Tr[gn])===null||e===void 0?void 0:e.call(Tr,Ji))!==null&&r!==void 0?r:this._proxyLoggerProvider}getLogger(e,r,n){return this.getLoggerProvider().getLogger(e,r,n)}disable(){delete Tr[gn],this._proxyLoggerProvider=new Rn}}});var Rs,Qi=E(()=>{WT();Rs=ms.getInstance()});function zT(t,e,r,n){for(let o=0,s=t.length;o<s;o++){let a=t[o];e&&a.setTracerProvider(e),r&&a.setMeterProvider(r),n&&a.setLoggerProvider&&a.setLoggerProvider(n),a.getConfig().enabled||a.enable()}}function JT(t){t.forEach(e=>e.disable())}var QT=E(()=>{});function ZT(t){var s;let e=t.tracerProvider||D.getTracerProvider(),r=t.meterProvider||ht.getMeterProvider(),n=t.loggerProvider||Rs.getLoggerProvider(),o=((s=t.instrumentations)==null?void 0:s.flat())??[];return zT(o,e,r,n),()=>{JT(o)}}var eS=E(()=>{O();Qi();QT()});function aS(t,e,r){if(!RO(t))return S.error(`Invalid version: ${t}`),!1;if(!e)return!0;e=e.replace(/([<>=~^]+)\s+/g,"$1");let n=NO(t);if(!n)return!1;let o=[],s=iS(n,e,o,r);return s&&!(r!=null&&r.includePrerelease)?vO(n,o):s}function RO(t){return typeof t=="string"&&sS.test(t)}function iS(t,e,r,n){if(e.includes("||")){let o=e.trim().split("||");for(let s of o)if(Zi(t,s,r,n))return!0;return!1}else if(e.includes(" - "))e=jO(e,n);else if(e.includes(" ")){let o=e.trim().replace(/\s{2,}/g," ").split(" ");for(let s of o)if(!Zi(t,s,r,n))return!1;return!0}return Zi(t,e,r,n)}function Zi(t,e,r,n){if(e=OO(e,n),e.includes(" "))return iS(t,e,r,n);{let o=PO(e);return r.push(o),gO(t,o)}}function gO(t,e){var n;if(e.invalid)return!1;if(!e.version||tc(e.version))return!0;let r=rS(t.versionSegments||[],e.versionSegments||[]);if(r===0){let o=t.prereleaseSegments||[],s=e.prereleaseSegments||[];!o.length&&!s.length?r=0:!o.length&&s.length?r=1:o.length&&!s.length?r=-1:r=rS(o,s)}return(n=mO[e.op])==null?void 0:n.includes(r)}function vO(t,e){return t.prerelease?e.some(r=>r.prerelease&&r.version===t.version):!0}function OO(t,e){return t=t.trim(),t=YO(t,e),t=$O(t),t=qO(t,e),t=t.trim(),t}function Se(t){return!t||t.toLowerCase()==="x"||t==="*"}function NO(t){let e=t.match(sS);if(!e){S.error(`Invalid version: ${t}`);return}let r=e.groups.version,n=e.groups.prerelease,o=e.groups.build,s=r.split("."),a=n==null?void 0:n.split(".");return{op:void 0,version:r,versionSegments:s,versionSegmentCount:s.length,prerelease:n,prereleaseSegments:a,prereleaseSegmentCount:a?a.length:0,build:o}}function PO(t){if(!t)return{};let e=t.match(hO);if(!e)return S.error(`Invalid range: ${t}`),{invalid:!0};let r=e.groups.op,n=e.groups.version,o=e.groups.prerelease,s=e.groups.build,a=n.split("."),i=o==null?void 0:o.split(".");return r==="=="&&(r="="),{op:r||"=",version:n,versionSegments:a,versionSegmentCount:a.length,prerelease:o,prereleaseSegments:i,prereleaseSegmentCount:i?i.length:0,build:s}}function tc(t){return t==="*"||t==="x"||t==="X"}function tS(t){let e=parseInt(t,10);return isNaN(e)?t:e}function CO(t,e){if(typeof t==typeof e){if(typeof t=="number")return[t,e];if(typeof t=="string")return[t,e];throw new Error("Version segments can only be strings or numbers")}else return[String(t),String(e)]}function LO(t,e){if(tc(t)||tc(e))return 0;let[r,n]=CO(tS(t),tS(e));return r>n?1:r<n?-1:0}function rS(t,e){for(let r=0;r<Math.max(t.length,e.length);r++){let n=LO(t[r]||"0",e[r]||"0");if(n!==0)return n}return 0}function $O(t){let e=BO;return t.replace(e,(r,n,o,s,a)=>{let i;return Se(n)?i="":Se(o)?i=`>=${n}.0.0 <${+n+1}.0.0-0`:Se(s)?i=`>=${n}.${o}.0 <${n}.${+o+1}.0-0`:a?i=`>=${n}.${o}.${s}-${a} <${n}.${+o+1}.0-0`:i=`>=${n}.${o}.${s} <${n}.${+o+1}.0-0`,i})}function YO(t,e){let r=kO,n=e!=null&&e.includePrerelease?"-0":"";return t.replace(r,(o,s,a,i,c)=>{let u;return Se(s)?u="":Se(a)?u=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Se(i)?s==="0"?u=`>=${s}.${a}.0${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.0${n} <${+s+1}.0.0-0`:c?s==="0"?a==="0"?u=`>=${s}.${a}.${i}-${c} <${s}.${a}.${+i+1}-0`:u=`>=${s}.${a}.${i}-${c} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${i}-${c} <${+s+1}.0.0-0`:s==="0"?a==="0"?u=`>=${s}.${a}.${i}${n} <${s}.${a}.${+i+1}-0`:u=`>=${s}.${a}.${i}${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${i} <${+s+1}.0.0-0`,u})}function qO(t,e){let r=UO;return t.replace(r,(n,o,s,a,i,c)=>{let u=Se(s),p=u||Se(a),_=p||Se(i),l=_;return o==="="&&l&&(o=""),c=e!=null&&e.includePrerelease?"-0":"",u?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&l?(p&&(a=0),i=0,o===">"?(o=">=",p?(s=+s+1,a=0,i=0):(a=+a+1,i=0)):o==="<="&&(o="<",p?s=+s+1:a=+a+1),o==="<"&&(c="-0"),n=`${o+s}.${a}.${i}${c}`):p?n=`>=${s}.0.0${c} <${+s+1}.0.0-0`:_&&(n=`>=${s}.${a}.0${c} <${s}.${+a+1}.0-0`),n})}function jO(t,e){let r=wO;return t.replace(r,(n,o,s,a,i,c,u,p,_,l,T,m)=>(Se(s)?o="":Se(a)?o=`>=${s}.0.0${e!=null&&e.includePrerelease?"-0":""}`:Se(i)?o=`>=${s}.${a}.0${e!=null&&e.includePrerelease?"-0":""}`:c?o=`>=${o}`:o=`>=${o}${e!=null&&e.includePrerelease?"-0":""}`,Se(_)?p="":Se(l)?p=`<${+_+1}.0.0-0`:Se(T)?p=`<${_}.${+l+1}.0-0`:m?p=`<=${_}.${l}.${T}-${m}`:e!=null&&e.includePrerelease?p=`<${_}.${l}.${+T+1}-0`:p=`<=${p}`,`${o} ${p}`.trim()))}var sS,hO,mO,cS,uS,IO,MO,nS,xO,oS,yO,ec,vn,DO,UO,bO,wO,VO,GO,BO,FO,HO,kO,pS=E(()=>{O();sS=/^(?:v)?(?<version>(?<major>0|[1-9]\d*)\.(?<minor>0|[1-9]\d*)\.(?<patch>0|[1-9]\d*))(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,hO=/^(?<op><|>|=|==|<=|>=|~|\^|~>)?\s*(?:v)?(?<version>(?<major>x|X|\*|0|[1-9]\d*)(?:\.(?<minor>x|X|\*|0|[1-9]\d*))?(?:\.(?<patch>x|X|\*|0|[1-9]\d*))?)(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,mO={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]};cS="[a-zA-Z0-9-]",uS="0|[1-9]\\d*",IO=`\\d*[a-zA-Z-]${cS}*`,MO="((?:<|>)?=?)",nS=`(?:${uS}|${IO})`,xO=`(?:-(${nS}(?:\\.${nS})*))`,oS=`${cS}+`,yO=`(?:\\+(${oS}(?:\\.${oS})*))`,ec=`${uS}|x|X|\\*`,vn=`[v=\\s]*(${ec})(?:\\.(${ec})(?:\\.(${ec})(?:${xO})?${yO}?)?)?`,DO=`^${MO}\\s*${vn}$`,UO=new RegExp(DO),bO=`^\\s*(${vn})\\s+-\\s+(${vn})\\s*$`,wO=new RegExp(bO),VO="(?:~>?)",GO=`^${VO}${vn}$`,BO=new RegExp(GO),FO="(?:\\^)",HO=`^${FO}${vn}$`,kO=new RegExp(HO)});function On(t,e,r){let n=!!t[e]&&Object.prototype.propertyIsEnumerable.call(t,e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function Nn(t){t&&t.logger&&(typeof t.logger!="function"?fe("new logger isn't a function, not replacing"):fe=t.logger)}var fe,Mt,rc,Sr,nc,oc=E(()=>{fe=console.error.bind(console);Mt=(t,e,r)=>{if(!t||!t[e]){fe("no original function "+String(e)+" to wrap");return}if(!r){fe("no wrapper function"),fe(new Error().stack);return}let n=t[e];if(typeof n!="function"||typeof r!="function"){fe("original object and wrapper must be functions");return}let o=r(n,e);return On(o,"__original",n),On(o,"__unwrap",()=>{t[e]===o&&On(t,e,n)}),On(o,"__wrapped",!0),On(t,e,o),o},rc=(t,e,r)=>{if(t)Array.isArray(t)||(t=[t]);else{fe("must provide one or more modules to patch"),fe(new Error().stack);return}if(!(e&&Array.isArray(e))){fe("must provide one or more functions to wrap on modules");return}t.forEach(n=>{e.forEach(o=>{Mt(n,o,r)})})},Sr=(t,e)=>{if(!t||!t[e]){fe("no function to unwrap."),fe(new Error().stack);return}let r=t[e];if(!r.__unwrap)fe("no original to unwrap to -- has "+String(e)+" already been unwrapped?");else{r.__unwrap();return}},nc=(t,e)=>{if(t)Array.isArray(t)||(t=[t]);else{fe("must provide one or more modules to patch"),fe(new Error().stack);return}if(!(e&&Array.isArray(e))){fe("must provide one or more functions to unwrap on modules");return}t.forEach(r=>{e.forEach(n=>{Sr(r,n)})})};Nn.wrap=Mt;Nn.massWrap=rc;Nn.unwrap=Sr;Nn.massUnwrap=nc});var gs,ES=E(()=>{O();Qi();oc();gs=class{instrumentationName;instrumentationVersion;_config={};_tracer;_meter;_logger;_diag;constructor(e,r,n){this.instrumentationName=e,this.instrumentationVersion=r,this.setConfig(n),this._diag=S.createComponentLogger({namespace:e}),this._tracer=D.getTracer(e,r),this._meter=ht.getMeter(e,r),this._logger=Rs.getLogger(e,r),this._updateMetricInstruments()}_wrap=Mt;_unwrap=Sr;_massWrap=rc;_massUnwrap=nc;get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}get logger(){return this._logger}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)}getModuleDefinitions(){let e=this.init()??[];return Array.isArray(e)?e:[e]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e){this._config={enabled:!0,...e}}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}_runSpanCustomizationHook(e,r,n,o){if(e)try{e(n,o)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:r},s)}}}});var lS=f((e1,_S)=>{var fr=1e3,dr=fr*60,Ar=dr*60,xt=Ar*24,XO=xt*7,WO=xt*365.25;_S.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return zO(t);if(r==="number"&&isFinite(t))return e.long?QO(t):JO(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function zO(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*WO;case"weeks":case"week":case"w":return r*XO;case"days":case"day":case"d":return r*xt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ar;case"minutes":case"minute":case"mins":case"min":case"m":return r*dr;case"seconds":case"second":case"secs":case"sec":case"s":return r*fr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function JO(t){var e=Math.abs(t);return e>=xt?Math.round(t/xt)+"d":e>=Ar?Math.round(t/Ar)+"h":e>=dr?Math.round(t/dr)+"m":e>=fr?Math.round(t/fr)+"s":t+"ms"}function QO(t){var e=Math.abs(t);return e>=xt?vs(t,e,xt,"day"):e>=Ar?vs(t,e,Ar,"hour"):e>=dr?vs(t,e,dr,"minute"):e>=fr?vs(t,e,fr,"second"):t+" ms"}function vs(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}});var sc=f((t1,TS)=>{function ZO(t){r.debug=r,r.default=r,r.coerce=c,r.disable=a,r.enable=o,r.enabled=i,r.humanize=lS(),r.destroy=u,Object.keys(t).forEach(p=>{r[p]=t[p]}),r.names=[],r.skips=[],r.formatters={};function e(p){let _=0;for(let l=0;l<p.length;l++)_=(_<<5)-_+p.charCodeAt(l),_|=0;return r.colors[Math.abs(_)%r.colors.length]}r.selectColor=e;function r(p){let _,l=null,T,m;function R(...g){if(!R.enabled)return;let w=R,x=Number(new Date),v=x-(_||x);w.diff=v,w.prev=_,w.curr=x,_=x,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(q,P)=>{if(q==="%%")return"%";y++;let I=r.formatters[P];if(typeof I=="function"){let N=g[y];q=I.call(w,N),g.splice(y,1),y--}return q}),r.formatArgs.call(w,g),(w.log||r.log).apply(w,g)}return R.namespace=p,R.useColors=r.useColors(),R.color=r.selectColor(p),R.extend=n,R.destroy=r.destroy,Object.defineProperty(R,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(T!==r.namespaces&&(T=r.namespaces,m=r.enabled(p)),m),set:g=>{l=g}}),typeof r.init=="function"&&r.init(R),R}function n(p,_){let l=r(this.namespace+(typeof _>"u"?":":_)+p);return l.log=this.log,l}function o(p){r.save(p),r.namespaces=p,r.names=[],r.skips=[];let _=(typeof p=="string"?p:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let l of _)l[0]==="-"?r.skips.push(l.slice(1)):r.names.push(l)}function s(p,_){let l=0,T=0,m=-1,R=0;for(;l<p.length;)if(T<_.length&&(_[T]===p[l]||_[T]==="*"))_[T]==="*"?(m=T,R=l,T++):(l++,T++);else if(m!==-1)T=m+1,R++,l=R;else return!1;for(;T<_.length&&_[T]==="*";)T++;return T===_.length}function a(){let p=[...r.names,...r.skips.map(_=>"-"+_)].join(",");return r.enable(""),p}function i(p){for(let _ of r.skips)if(s(p,_))return!1;for(let _ of r.names)if(s(p,_))return!0;return!1}function c(p){return p instanceof Error?p.stack||p.message:p}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}TS.exports=ZO});var SS=f((ge,Os)=>{ge.formatArgs=tN;ge.save=rN;ge.load=nN;ge.useColors=eN;ge.storage=oN();ge.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ge.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function eN(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function tN(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Os.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}ge.log=console.debug||console.log||(()=>{});function rN(t){try{t?ge.storage.setItem("debug",t):ge.storage.removeItem("debug")}catch{}}function nN(){let t;try{t=ge.storage.getItem("debug")||ge.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function oN(){try{return localStorage}catch{}}Os.exports=sc()(ge);var{formatters:sN}=Os.exports;sN.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var dS=f((r1,fS)=>{"use strict";fS.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),o=e.indexOf("--");return n!==-1&&(o===-1||n<o)}});var mS=f((n1,hS)=>{"use strict";var aN=G("os"),AS=G("tty"),Me=dS(),{env:Z}=process,_t;Me("no-color")||Me("no-colors")||Me("color=false")||Me("color=never")?_t=0:(Me("color")||Me("colors")||Me("color=true")||Me("color=always"))&&(_t=1);"FORCE_COLOR"in Z&&(Z.FORCE_COLOR==="true"?_t=1:Z.FORCE_COLOR==="false"?_t=0:_t=Z.FORCE_COLOR.length===0?1:Math.min(parseInt(Z.FORCE_COLOR,10),3));function ac(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function ic(t,e){if(_t===0)return 0;if(Me("color=16m")||Me("color=full")||Me("color=truecolor"))return 3;if(Me("color=256"))return 2;if(t&&!e&&_t===void 0)return 0;let r=_t||0;if(Z.TERM==="dumb")return r;if(process.platform==="win32"){let n=aN.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Z)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Z)||Z.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Z)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Z.TEAMCITY_VERSION)?1:0;if(Z.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Z){let n=parseInt((Z.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Z.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Z.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Z.TERM)||"COLORTERM"in Z?1:r}function iN(t){let e=ic(t,t&&t.isTTY);return ac(e)}hS.exports={supportsColor:iN,stdout:ac(ic(!0,AS.isatty(1))),stderr:ac(ic(!0,AS.isatty(2)))}});var gS=f((ee,Ps)=>{var cN=G("tty"),Ns=G("util");ee.init=SN;ee.log=_N;ee.formatArgs=pN;ee.save=lN;ee.load=TN;ee.useColors=uN;ee.destroy=Ns.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ee.colors=[6,2,3,4,5,1];try{let t=mS();t&&(t.stderr||t).level>=2&&(ee.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ee.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function uN(){return"colors"in ee.inspectOpts?!!ee.inspectOpts.colors:cN.isatty(process.stderr.fd)}function pN(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,o="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${o};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(o+"m+"+Ps.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=EN()+e+" "+t[0]}function EN(){return ee.inspectOpts.hideDate?"":new Date().toISOString()+" "}function _N(...t){return process.stderr.write(Ns.formatWithOptions(ee.inspectOpts,...t)+`
`)}function lN(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function TN(){return process.env.DEBUG}function SN(t){t.inspectOpts={};let e=Object.keys(ee.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=ee.inspectOpts[e[r]]}Ps.exports=sc()(ee);var{formatters:RS}=Ps.exports;RS.o=function(t){return this.inspectOpts.colors=this.useColors,Ns.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};RS.O=function(t){return this.inspectOpts.colors=this.useColors,Ns.inspect(t,this.inspectOpts)}});var vS=f((o1,cc)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?cc.exports=SS():cc.exports=gS()});var pc=f((s1,OS)=>{"use strict";var uc=G("path").sep;OS.exports=function(t){var e=t.split(uc),r=e.lastIndexOf("node_modules");if(r!==-1&&e[r+1]){for(var n=e[r+1][0]==="@",o=n?e[r+1]+"/"+e[r+2]:e[r+1],s=n?3:2,a="",i=r+s-1,c=0;c<=i;c++)c===i?a+=e[c]:a+=e[c]+uc;for(var u="",p=e.length-1,_=r+s;_<=p;_++)_===p?u+=e[_]:u+=e[_]+uc;return{name:o,basedir:a,path:u}}}});var Ec=f((a1,NS)=>{"use strict";var fN=G("os");NS.exports=fN.homedir||function(){var e=process.env.HOME,r=process.env.LOGNAME||process.env.USER||process.env.LNAME||process.env.USERNAME;return process.platform==="win32"?process.env.USERPROFILE||process.env.HOMEDRIVE+process.env.HOMEPATH||e||null:process.platform==="darwin"?e||(r?"/Users/"+r:null):process.platform==="linux"?e||(process.getuid()===0?"/root":r?"/home/"+r:null):e||null}});var _c=f((i1,PS)=>{PS.exports=function(){var t=Error.prepareStackTrace;Error.prepareStackTrace=function(r,n){return n};var e=new Error().stack;return Error.prepareStackTrace=t,e[2].getFileName()}});var CS=f((c1,Pn)=>{"use strict";var dN=process.platform==="win32",AN=/^(((?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?[\\\/]?)(?:[^\\\/]*[\\\/])*)((\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))[\\\/]*$/,lc={};function hN(t){return AN.exec(t).slice(1)}lc.parse=function(t){if(typeof t!="string")throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=hN(t);if(!e||e.length!==5)throw new TypeError("Invalid path '"+t+"'");return{root:e[1],dir:e[0]===e[1]?e[0]:e[0].slice(0,-1),base:e[2],ext:e[4],name:e[3]}};var mN=/^((\/?)(?:[^\/]*\/)*)((\.{1,2}|[^\/]+?|)(\.[^.\/]*|))[\/]*$/,Tc={};function RN(t){return mN.exec(t).slice(1)}Tc.parse=function(t){if(typeof t!="string")throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=RN(t);if(!e||e.length!==5)throw new TypeError("Invalid path '"+t+"'");return{root:e[1],dir:e[0].slice(0,-1),base:e[2],ext:e[4],name:e[3]}};dN?Pn.exports=lc.parse:Pn.exports=Tc.parse;Pn.exports.posix=Tc.parse;Pn.exports.win32=lc.parse});var Sc=f((u1,xS)=>{var MS=G("path"),LS=MS.parse||CS(),IS=function(e,r){var n="/";/^([A-Za-z]:)/.test(e)?n="":/^\\\\/.test(e)&&(n="\\\\");for(var o=[e],s=LS(e);s.dir!==o[o.length-1];)o.push(s.dir),s=LS(s.dir);return o.reduce(function(a,i){return a.concat(r.map(function(c){return MS.resolve(n,i,c)}))},[])};xS.exports=function(e,r,n){var o=r&&r.moduleDirectory?[].concat(r.moduleDirectory):["node_modules"];if(r&&typeof r.paths=="function")return r.paths(n,e,function(){return IS(e,o)},r);var s=IS(e,o);return r&&r.paths?s.concat(r.paths):s}});var fc=f((p1,yS)=>{yS.exports=function(t,e){return e||{}}});var bS=f((E1,US)=>{"use strict";var gN="Function.prototype.bind called on incompatible ",vN=Object.prototype.toString,ON=Math.max,NN="[object Function]",DS=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var s=0;s<r.length;s+=1)n[s+e.length]=r[s];return n},PN=function(e,r){for(var n=[],o=r||0,s=0;o<e.length;o+=1,s+=1)n[s]=e[o];return n},CN=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};US.exports=function(e){var r=this;if(typeof r!="function"||vN.apply(r)!==NN)throw new TypeError(gN+r);for(var n=PN(arguments,1),o,s=function(){if(this instanceof o){var p=r.apply(this,DS(n,arguments));return Object(p)===p?p:this}return r.apply(e,DS(n,arguments))},a=ON(0,r.length-n.length),i=[],c=0;c<a;c++)i[c]="$"+c;if(o=Function("binder","return function ("+CN(i,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o}});var VS=f((_1,wS)=>{"use strict";var LN=bS();wS.exports=Function.prototype.bind||LN});var BS=f((l1,GS)=>{"use strict";var IN=Function.prototype.call,MN=Object.prototype.hasOwnProperty,xN=VS();GS.exports=xN.call(IN,MN)});var FS=f((T1,yN)=>{yN.exports={assert:!0,"node:assert":[">= 14.18 && < 15",">= 16"],"assert/strict":">= 15","node:assert/strict":">= 16",async_hooks:">= 8","node:async_hooks":[">= 14.18 && < 15",">= 16"],buffer_ieee754:">= 0.5 && < 0.9.7",buffer:!0,"node:buffer":[">= 14.18 && < 15",">= 16"],child_process:!0,"node:child_process":[">= 14.18 && < 15",">= 16"],cluster:">= 0.5","node:cluster":[">= 14.18 && < 15",">= 16"],console:!0,"node:console":[">= 14.18 && < 15",">= 16"],constants:!0,"node:constants":[">= 14.18 && < 15",">= 16"],crypto:!0,"node:crypto":[">= 14.18 && < 15",">= 16"],_debug_agent:">= 1 && < 8",_debugger:"< 8",dgram:!0,"node:dgram":[">= 14.18 && < 15",">= 16"],diagnostics_channel:[">= 14.17 && < 15",">= 15.1"],"node:diagnostics_channel":[">= 14.18 && < 15",">= 16"],dns:!0,"node:dns":[">= 14.18 && < 15",">= 16"],"dns/promises":">= 15","node:dns/promises":">= 16",domain:">= 0.7.12","node:domain":[">= 14.18 && < 15",">= 16"],events:!0,"node:events":[">= 14.18 && < 15",">= 16"],freelist:"< 6",fs:!0,"node:fs":[">= 14.18 && < 15",">= 16"],"fs/promises":[">= 10 && < 10.1",">= 14"],"node:fs/promises":[">= 14.18 && < 15",">= 16"],_http_agent:">= 0.11.1","node:_http_agent":[">= 14.18 && < 15",">= 16"],_http_client:">= 0.11.1","node:_http_client":[">= 14.18 && < 15",">= 16"],_http_common:">= 0.11.1","node:_http_common":[">= 14.18 && < 15",">= 16"],_http_incoming:">= 0.11.1","node:_http_incoming":[">= 14.18 && < 15",">= 16"],_http_outgoing:">= 0.11.1","node:_http_outgoing":[">= 14.18 && < 15",">= 16"],_http_server:">= 0.11.1","node:_http_server":[">= 14.18 && < 15",">= 16"],http:!0,"node:http":[">= 14.18 && < 15",">= 16"],http2:">= 8.8","node:http2":[">= 14.18 && < 15",">= 16"],https:!0,"node:https":[">= 14.18 && < 15",">= 16"],inspector:">= 8","node:inspector":[">= 14.18 && < 15",">= 16"],"inspector/promises":[">= 19"],"node:inspector/promises":[">= 19"],_linklist:"< 8",module:!0,"node:module":[">= 14.18 && < 15",">= 16"],net:!0,"node:net":[">= 14.18 && < 15",">= 16"],"node-inspect/lib/_inspect":">= 7.6 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6 && < 12",os:!0,"node:os":[">= 14.18 && < 15",">= 16"],path:!0,"node:path":[">= 14.18 && < 15",">= 16"],"path/posix":">= 15.3","node:path/posix":">= 16","path/win32":">= 15.3","node:path/win32":">= 16",perf_hooks:">= 8.5","node:perf_hooks":[">= 14.18 && < 15",">= 16"],process:">= 1","node:process":[">= 14.18 && < 15",">= 16"],punycode:">= 0.5","node:punycode":[">= 14.18 && < 15",">= 16"],querystring:!0,"node:querystring":[">= 14.18 && < 15",">= 16"],readline:!0,"node:readline":[">= 14.18 && < 15",">= 16"],"readline/promises":">= 17","node:readline/promises":">= 17",repl:!0,"node:repl":[">= 14.18 && < 15",">= 16"],"node:sea":[">= 20.12 && < 21",">= 21.7"],smalloc:">= 0.11.5 && < 3","node:sqlite":[">= 22.13 && < 23",">= 23.4"],_stream_duplex:">= 0.9.4","node:_stream_duplex":[">= 14.18 && < 15",">= 16"],_stream_transform:">= 0.9.4","node:_stream_transform":[">= 14.18 && < 15",">= 16"],_stream_wrap:">= 1.4.1","node:_stream_wrap":[">= 14.18 && < 15",">= 16"],_stream_passthrough:">= 0.9.4","node:_stream_passthrough":[">= 14.18 && < 15",">= 16"],_stream_readable:">= 0.9.4","node:_stream_readable":[">= 14.18 && < 15",">= 16"],_stream_writable:">= 0.9.4","node:_stream_writable":[">= 14.18 && < 15",">= 16"],stream:!0,"node:stream":[">= 14.18 && < 15",">= 16"],"stream/consumers":">= 16.7","node:stream/consumers":">= 16.7","stream/promises":">= 15","node:stream/promises":">= 16","stream/web":">= 16.5","node:stream/web":">= 16.5",string_decoder:!0,"node:string_decoder":[">= 14.18 && < 15",">= 16"],sys:[">= 0.4 && < 0.7",">= 0.8"],"node:sys":[">= 14.18 && < 15",">= 16"],"test/reporters":">= 19.9 && < 20.2","node:test/reporters":[">= 18.17 && < 19",">= 19.9",">= 20"],"test/mock_loader":">= 22.3 && < 22.7","node:test/mock_loader":">= 22.3 && < 22.7","node:test":[">= 16.17 && < 17",">= 18"],timers:!0,"node:timers":[">= 14.18 && < 15",">= 16"],"timers/promises":">= 15","node:timers/promises":">= 16",_tls_common:">= 0.11.13","node:_tls_common":[">= 14.18 && < 15",">= 16"],_tls_legacy:">= 0.11.3 && < 10",_tls_wrap:">= 0.11.3","node:_tls_wrap":[">= 14.18 && < 15",">= 16"],tls:!0,"node:tls":[">= 14.18 && < 15",">= 16"],trace_events:">= 10","node:trace_events":[">= 14.18 && < 15",">= 16"],tty:!0,"node:tty":[">= 14.18 && < 15",">= 16"],url:!0,"node:url":[">= 14.18 && < 15",">= 16"],util:!0,"node:util":[">= 14.18 && < 15",">= 16"],"util/types":">= 15.3","node:util/types":">= 16","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/consarray":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/csvparser":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/logreader":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/profile_view":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/splaytree":[">= 4.4 && < 5",">= 5.2 && < 12"],v8:">= 1","node:v8":[">= 14.18 && < 15",">= 16"],vm:!0,"node:vm":[">= 14.18 && < 15",">= 16"],wasi:[">= 13.4 && < 13.5",">= 18.17 && < 19",">= 20"],"node:wasi":[">= 18.17 && < 19",">= 20"],worker_threads:">= 11.7","node:worker_threads":[">= 14.18 && < 15",">= 16"],zlib:">= 0.5","node:zlib":[">= 14.18 && < 15",">= 16"]}});var Cn=f((S1,$S)=>{"use strict";var DN=BS();function UN(t,e){for(var r=t.split("."),n=e.split(" "),o=n.length>1?n[0]:"=",s=(n.length>1?n[1]:n[0]).split("."),a=0;a<3;++a){var i=parseInt(r[a]||0,10),c=parseInt(s[a]||0,10);if(i!==c)return o==="<"?i<c:o===">="?i>=c:!1}return o===">="}function HS(t,e){var r=e.split(/ ?&& ?/);if(r.length===0)return!1;for(var n=0;n<r.length;++n)if(!UN(t,r[n]))return!1;return!0}function bN(t,e){if(typeof e=="boolean")return e;var r=typeof t>"u"?process.versions&&process.versions.node:t;if(typeof r!="string")throw new TypeError(typeof t>"u"?"Unable to determine current node version":"If provided, a valid node version is required");if(e&&typeof e=="object"){for(var n=0;n<e.length;++n)if(HS(r,e[n]))return!0;return!1}return HS(r,e)}var kS=FS();$S.exports=function(e,r){return DN(kS,e)&&bN(r,kS[e])}});var jS=f((f1,qS)=>{var yt=G("fs"),wN=Ec(),z=G("path"),VN=_c(),GN=Sc(),BN=fc(),FN=Cn(),HN=process.platform!=="win32"&&yt.realpath&&typeof yt.realpath.native=="function"?yt.realpath.native:yt.realpath,YS=wN(),kN=function(){return[z.join(YS,".node_modules"),z.join(YS,".node_libraries")]},$N=function(e,r){yt.stat(e,function(n,o){return n?n.code==="ENOENT"||n.code==="ENOTDIR"?r(null,!1):r(n):r(null,o.isFile()||o.isFIFO())})},YN=function(e,r){yt.stat(e,function(n,o){return n?n.code==="ENOENT"||n.code==="ENOTDIR"?r(null,!1):r(n):r(null,o.isDirectory())})},qN=function(e,r){HN(e,function(n,o){n&&n.code!=="ENOENT"?r(n):r(null,n?e:o)})},Ln=function(e,r,n,o){n&&n.preserveSymlinks===!1?e(r,o):o(null,r)},jN=function(e,r,n){e(r,function(o,s){if(o)n(o);else try{var a=JSON.parse(s);n(null,a)}catch{n(null)}})},KN=function(e,r,n){for(var o=GN(r,n,e),s=0;s<o.length;s++)o[s]=z.join(o[s],e);return o};qS.exports=function(e,r,n){var o=n,s=r;if(typeof r=="function"&&(o=s,s={}),typeof e!="string"){var a=new TypeError("Path must be a string.");return process.nextTick(function(){o(a)})}s=BN(e,s);var i=s.isFile||$N,c=s.isDirectory||YN,u=s.readFile||yt.readFile,p=s.realpath||qN,_=s.readPackage||jN;if(s.readFile&&s.readPackage){var l=new TypeError("`readFile` and `readPackage` are mutually exclusive.");return process.nextTick(function(){o(l)})}var T=s.packageIterator,m=s.extensions||[".js"],R=s.includeCoreModules!==!1,g=s.basedir||z.dirname(VN()),w=s.filename||g;s.paths=s.paths||kN();var x=z.resolve(g);Ln(p,x,s,function(h,L){h?o(h):y(L)});var v;function y(h){if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(e))v=z.resolve(h,e),(e==="."||e===".."||e.slice(-1)==="/")&&(v+="/"),/\/$/.test(e)&&v===h?I(v,s.package,V):q(v,s.package,V);else{if(R&&FN(e))return o(null,e);X(e,h,function(L,j,M){if(L)o(L);else{if(j)return Ln(p,j,s,function(ue,$){ue?o(ue):o(null,$,M)});var H=new Error("Cannot find module '"+e+"' from '"+w+"'");H.code="MODULE_NOT_FOUND",o(H)}})}}function V(h,L,j){h?o(h):L?o(null,L,j):I(v,function(M,H,ue){if(M)o(M);else if(H)Ln(p,H,s,function(Y,te){Y?o(Y):o(null,te,ue)});else{var $=new Error("Cannot find module '"+e+"' from '"+w+"'");$.code="MODULE_NOT_FOUND",o($)}})}function q(h,L,j){var M=L,H=j;typeof M=="function"&&(H=M,M=void 0);var ue=[""].concat(m);$(ue,h,M);function $(Y,te,De){if(Y.length===0)return H(null,void 0,De);var je=te+Y[0],de=De;de?Q(null,de):P(z.dirname(je),Q);function Q(Ze,Vt,Ke){if(de=Vt,Ze)return H(Ze);if(Ke&&de&&s.pathFilter){var jn=z.relative(Ke,je),Kn=jn.slice(0,jn.length-Y[0].length),Ir=s.pathFilter(de,te,Kn);if(Ir)return $([""].concat(m.slice()),z.resolve(Ke,Ir),de)}i(je,qn)}function qn(Ze,Vt){if(Ze)return H(Ze);if(Vt)return H(null,je,de);$(Y.slice(1),te,de)}}}function P(h,L){if(h===""||h==="/"||process.platform==="win32"&&/^\w:[/\\]*$/.test(h)||/[/\\]node_modules[/\\]*$/.test(h))return L(null);Ln(p,h,s,function(j,M){if(j)return P(z.dirname(h),L);var H=z.join(M,"package.json");i(H,function(ue,$){if(!$)return P(z.dirname(h),L);_(u,H,function(Y,te){Y&&L(Y);var De=te;De&&s.packageFilter&&(De=s.packageFilter(De,H)),L(null,De,h)})})})}function I(h,L,j){var M=j,H=L;typeof H=="function"&&(M=H,H=s.package),Ln(p,h,s,function(ue,$){if(ue)return M(ue);var Y=z.join($,"package.json");i(Y,function(te,De){if(te)return M(te);if(!De)return q(z.join(h,"index"),H,M);_(u,Y,function(je,de){if(je)return M(je);var Q=de;if(Q&&s.packageFilter&&(Q=s.packageFilter(Q,Y)),Q&&Q.main){if(typeof Q.main!="string"){var qn=new TypeError("package \u201C"+Q.name+"\u201D `main` must be a string");return qn.code="INVALID_PACKAGE_MAIN",M(qn)}(Q.main==="."||Q.main==="./")&&(Q.main="index"),q(z.resolve(h,Q.main),Q,function(Ze,Vt,Ke){if(Ze)return M(Ze);if(Vt)return M(null,Vt,Ke);if(!Ke)return q(z.join(h,"index"),Ke,M);var jn=z.resolve(h,Ke.main);I(jn,Ke,function(Kn,Ir,Yc){if(Kn)return M(Kn);if(Ir)return M(null,Ir,Yc);q(z.join(h,"index"),Yc,M)})});return}q(z.join(h,"/index"),Q,M)})})})}function N(h,L){if(L.length===0)return h(null,void 0);var j=L[0];c(z.dirname(j),M);function M($,Y){if($)return h($);if(!Y)return N(h,L.slice(1));q(j,s.package,H)}function H($,Y,te){if($)return h($);if(Y)return h(null,Y,te);I(j,s.package,ue)}function ue($,Y,te){if($)return h($);if(Y)return h(null,Y,te);N(h,L.slice(1))}}function X(h,L,j){var M=function(){return KN(h,L,s)};N(j,T?T(h,L,M,s):M())}}});var KS=f((d1,XN)=>{XN.exports={assert:!0,"node:assert":[">= 14.18 && < 15",">= 16"],"assert/strict":">= 15","node:assert/strict":">= 16",async_hooks:">= 8","node:async_hooks":[">= 14.18 && < 15",">= 16"],buffer_ieee754:">= 0.5 && < 0.9.7",buffer:!0,"node:buffer":[">= 14.18 && < 15",">= 16"],child_process:!0,"node:child_process":[">= 14.18 && < 15",">= 16"],cluster:">= 0.5","node:cluster":[">= 14.18 && < 15",">= 16"],console:!0,"node:console":[">= 14.18 && < 15",">= 16"],constants:!0,"node:constants":[">= 14.18 && < 15",">= 16"],crypto:!0,"node:crypto":[">= 14.18 && < 15",">= 16"],_debug_agent:">= 1 && < 8",_debugger:"< 8",dgram:!0,"node:dgram":[">= 14.18 && < 15",">= 16"],diagnostics_channel:[">= 14.17 && < 15",">= 15.1"],"node:diagnostics_channel":[">= 14.18 && < 15",">= 16"],dns:!0,"node:dns":[">= 14.18 && < 15",">= 16"],"dns/promises":">= 15","node:dns/promises":">= 16",domain:">= 0.7.12","node:domain":[">= 14.18 && < 15",">= 16"],events:!0,"node:events":[">= 14.18 && < 15",">= 16"],freelist:"< 6",fs:!0,"node:fs":[">= 14.18 && < 15",">= 16"],"fs/promises":[">= 10 && < 10.1",">= 14"],"node:fs/promises":[">= 14.18 && < 15",">= 16"],_http_agent:">= 0.11.1","node:_http_agent":[">= 14.18 && < 15",">= 16"],_http_client:">= 0.11.1","node:_http_client":[">= 14.18 && < 15",">= 16"],_http_common:">= 0.11.1","node:_http_common":[">= 14.18 && < 15",">= 16"],_http_incoming:">= 0.11.1","node:_http_incoming":[">= 14.18 && < 15",">= 16"],_http_outgoing:">= 0.11.1","node:_http_outgoing":[">= 14.18 && < 15",">= 16"],_http_server:">= 0.11.1","node:_http_server":[">= 14.18 && < 15",">= 16"],http:!0,"node:http":[">= 14.18 && < 15",">= 16"],http2:">= 8.8","node:http2":[">= 14.18 && < 15",">= 16"],https:!0,"node:https":[">= 14.18 && < 15",">= 16"],inspector:">= 8","node:inspector":[">= 14.18 && < 15",">= 16"],"inspector/promises":[">= 19"],"node:inspector/promises":[">= 19"],_linklist:"< 8",module:!0,"node:module":[">= 14.18 && < 15",">= 16"],net:!0,"node:net":[">= 14.18 && < 15",">= 16"],"node-inspect/lib/_inspect":">= 7.6 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6 && < 12",os:!0,"node:os":[">= 14.18 && < 15",">= 16"],path:!0,"node:path":[">= 14.18 && < 15",">= 16"],"path/posix":">= 15.3","node:path/posix":">= 16","path/win32":">= 15.3","node:path/win32":">= 16",perf_hooks:">= 8.5","node:perf_hooks":[">= 14.18 && < 15",">= 16"],process:">= 1","node:process":[">= 14.18 && < 15",">= 16"],punycode:">= 0.5","node:punycode":[">= 14.18 && < 15",">= 16"],querystring:!0,"node:querystring":[">= 14.18 && < 15",">= 16"],readline:!0,"node:readline":[">= 14.18 && < 15",">= 16"],"readline/promises":">= 17","node:readline/promises":">= 17",repl:!0,"node:repl":[">= 14.18 && < 15",">= 16"],"node:sea":[">= 20.12 && < 21",">= 21.7"],smalloc:">= 0.11.5 && < 3","node:sqlite":">= 23.4",_stream_duplex:">= 0.9.4","node:_stream_duplex":[">= 14.18 && < 15",">= 16"],_stream_transform:">= 0.9.4","node:_stream_transform":[">= 14.18 && < 15",">= 16"],_stream_wrap:">= 1.4.1","node:_stream_wrap":[">= 14.18 && < 15",">= 16"],_stream_passthrough:">= 0.9.4","node:_stream_passthrough":[">= 14.18 && < 15",">= 16"],_stream_readable:">= 0.9.4","node:_stream_readable":[">= 14.18 && < 15",">= 16"],_stream_writable:">= 0.9.4","node:_stream_writable":[">= 14.18 && < 15",">= 16"],stream:!0,"node:stream":[">= 14.18 && < 15",">= 16"],"stream/consumers":">= 16.7","node:stream/consumers":">= 16.7","stream/promises":">= 15","node:stream/promises":">= 16","stream/web":">= 16.5","node:stream/web":">= 16.5",string_decoder:!0,"node:string_decoder":[">= 14.18 && < 15",">= 16"],sys:[">= 0.4 && < 0.7",">= 0.8"],"node:sys":[">= 14.18 && < 15",">= 16"],"test/reporters":">= 19.9 && < 20.2","node:test/reporters":[">= 18.17 && < 19",">= 19.9",">= 20"],"test/mock_loader":">= 22.3 && < 22.7","node:test/mock_loader":">= 22.3 && < 22.7","node:test":[">= 16.17 && < 17",">= 18"],timers:!0,"node:timers":[">= 14.18 && < 15",">= 16"],"timers/promises":">= 15","node:timers/promises":">= 16",_tls_common:">= 0.11.13","node:_tls_common":[">= 14.18 && < 15",">= 16"],_tls_legacy:">= 0.11.3 && < 10",_tls_wrap:">= 0.11.3","node:_tls_wrap":[">= 14.18 && < 15",">= 16"],tls:!0,"node:tls":[">= 14.18 && < 15",">= 16"],trace_events:">= 10","node:trace_events":[">= 14.18 && < 15",">= 16"],tty:!0,"node:tty":[">= 14.18 && < 15",">= 16"],url:!0,"node:url":[">= 14.18 && < 15",">= 16"],util:!0,"node:util":[">= 14.18 && < 15",">= 16"],"util/types":">= 15.3","node:util/types":">= 16","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/consarray":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/csvparser":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/logreader":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/profile_view":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/splaytree":[">= 4.4 && < 5",">= 5.2 && < 12"],v8:">= 1","node:v8":[">= 14.18 && < 15",">= 16"],vm:!0,"node:vm":[">= 14.18 && < 15",">= 16"],wasi:[">= 13.4 && < 13.5",">= 18.17 && < 19",">= 20"],"node:wasi":[">= 18.17 && < 19",">= 20"],worker_threads:">= 11.7","node:worker_threads":[">= 14.18 && < 15",">= 16"],zlib:">= 0.5","node:zlib":[">= 14.18 && < 15",">= 16"]}});var JS=f((A1,zS)=>{"use strict";var WN=Cn(),XS=KS(),WS={};for(Cs in XS)Object.prototype.hasOwnProperty.call(XS,Cs)&&(WS[Cs]=WN(Cs));var Cs;zS.exports=WS});var ZS=f((h1,QS)=>{var zN=Cn();QS.exports=function(e){return zN(e)}});var rf=f((m1,tf)=>{var JN=Cn(),Dt=G("fs"),ce=G("path"),QN=Ec(),ZN=_c(),eP=Sc(),tP=fc(),rP=process.platform!=="win32"&&Dt.realpathSync&&typeof Dt.realpathSync.native=="function"?Dt.realpathSync.native:Dt.realpathSync,ef=QN(),nP=function(){return[ce.join(ef,".node_modules"),ce.join(ef,".node_libraries")]},oP=function(e){try{var r=Dt.statSync(e,{throwIfNoEntry:!1})}catch(n){if(n&&(n.code==="ENOENT"||n.code==="ENOTDIR"))return!1;throw n}return!!r&&(r.isFile()||r.isFIFO())},sP=function(e){try{var r=Dt.statSync(e,{throwIfNoEntry:!1})}catch(n){if(n&&(n.code==="ENOENT"||n.code==="ENOTDIR"))return!1;throw n}return!!r&&r.isDirectory()},aP=function(e){try{return rP(e)}catch(r){if(r.code!=="ENOENT")throw r}return e},In=function(e,r,n){return n&&n.preserveSymlinks===!1?e(r):r},iP=function(e,r){var n=e(r);try{var o=JSON.parse(n);return o}catch{}},cP=function(e,r,n){for(var o=eP(r,n,e),s=0;s<o.length;s++)o[s]=ce.join(o[s],e);return o};tf.exports=function(e,r){if(typeof e!="string")throw new TypeError("Path must be a string.");var n=tP(e,r),o=n.isFile||oP,s=n.readFileSync||Dt.readFileSync,a=n.isDirectory||sP,i=n.realpathSync||aP,c=n.readPackageSync||iP;if(n.readFileSync&&n.readPackageSync)throw new TypeError("`readFileSync` and `readPackageSync` are mutually exclusive.");var u=n.packageIterator,p=n.extensions||[".js"],_=n.includeCoreModules!==!1,l=n.basedir||ce.dirname(ZN()),T=n.filename||l;n.paths=n.paths||nP();var m=In(i,ce.resolve(l),n);if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(e)){var R=ce.resolve(m,e);(e==="."||e===".."||e.slice(-1)==="/")&&(R+="/");var g=v(R)||V(R);if(g)return In(i,g,n)}else{if(_&&JN(e))return e;var w=q(e,m);if(w)return In(i,w,n)}var x=new Error("Cannot find module '"+e+"' from '"+T+"'");throw x.code="MODULE_NOT_FOUND",x;function v(P){var I=y(ce.dirname(P));if(I&&I.dir&&I.pkg&&n.pathFilter){var N=ce.relative(I.dir,P),X=n.pathFilter(I.pkg,P,N);X&&(P=ce.resolve(I.dir,X))}if(o(P))return P;for(var h=0;h<p.length;h++){var L=P+p[h];if(o(L))return L}}function y(P){if(!(P===""||P==="/")&&!(process.platform==="win32"&&/^\w:[/\\]*$/.test(P))&&!/[/\\]node_modules[/\\]*$/.test(P)){var I=ce.join(In(i,P,n),"package.json");if(!o(I))return y(ce.dirname(P));var N=c(s,I);return N&&n.packageFilter&&(N=n.packageFilter(N,P)),{pkg:N,dir:P}}}function V(P){var I=ce.join(In(i,P,n),"/package.json");if(o(I)){try{var N=c(s,I)}catch{}if(N&&n.packageFilter&&(N=n.packageFilter(N,P)),N&&N.main){if(typeof N.main!="string"){var X=new TypeError("package \u201C"+N.name+"\u201D `main` must be a string");throw X.code="INVALID_PACKAGE_MAIN",X}(N.main==="."||N.main==="./")&&(N.main="index");try{var h=v(ce.resolve(P,N.main));if(h)return h;var L=V(ce.resolve(P,N.main));if(L)return L}catch{}}}return v(ce.join(P,"/index"))}function q(P,I){for(var N=function(){return cP(P,I,n)},X=u?u(P,I,N,n):N(),h=0;h<X.length;h++){var L=X[h];if(a(ce.dirname(L))){var j=v(L);if(j)return j;var M=V(L);if(M)return M}}}}});var dc=f((R1,nf)=>{var Ls=jS();Ls.core=JS();Ls.isCore=ZS();Ls.sync=rf();nf.exports=Ls});var of=f((g1,uP)=>{uP.exports={name:"require-in-the-middle",version:"7.5.2",description:"Module to hook into the Node.js require function",main:"index.js",types:"types/index.d.ts",dependencies:{debug:"^4.3.5","module-details-from-path":"^1.0.3",resolve:"^1.22.8"},devDependencies:{"@babel/core":"^7.9.0","@babel/preset-env":"^7.9.5","@babel/preset-typescript":"^7.9.0","@babel/register":"^7.9.0","ipp-printer":"^1.0.0",patterns:"^1.0.3",roundround:"^0.2.0",semver:"^6.3.0",standard:"^14.3.1",tape:"^4.11.0"},scripts:{test:"npm run test:lint && npm run test:tape && npm run test:babel","test:lint":"standard","test:tape":"tape test/*.js","test:babel":"node test/babel/babel-register.js"},repository:{type:"git",url:"git+https://github.com/nodejs/require-in-the-middle.git"},keywords:["require","hook","shim","shimmer","shimming","patch","monkey","monkeypatch","module","load"],files:["types"],author:"Thomas Watson Steen <w@tson.dk> (https://twitter.com/wa7son)",license:"MIT",bugs:{url:"https://github.com/nodejs/require-in-the-middle/issues"},homepage:"https://github.com/nodejs/require-in-the-middle#readme",engines:{node:">=8.6.0"}}});var Rc=f((v1,mc)=>{"use strict";var mr=G("path"),Ge=G("module"),W=vS()("require-in-the-middle"),pP=pc();mc.exports=Mn;mc.exports.Hook=Mn;var Ac,hr;if(Ge.isBuiltin)hr=Ge.isBuiltin;else if(Ge.builtinModules)hr=t=>t.startsWith("node:")?!0:(Ac===void 0&&(Ac=new Set(Ge.builtinModules)),Ac.has(t));else{let t=dc(),[e,r]=process.versions.node.split(".").map(Number);e===8&&r<8?hr=n=>n==="http2"?!0:!!t.core[n]:hr=n=>!!t.core[n]}var Is;function EP(t,e){if(!Is)if(G.resolve&&G.resolve.paths)Is=function(r,n){return G.resolve(r,{paths:[n]})};else{let r=dc();Is=function(n,o){return r.sync(n,{basedir:o})}}return Is(t,e)}var _P=/([/\\]index)?(\.js)?$/,hc=class{constructor(){this._localCache=new Map,this._kRitmExports=Symbol("RitmExports")}has(e,r){if(this._localCache.has(e))return!0;if(r)return!1;{let n=G.cache[e];return!!(n&&this._kRitmExports in n)}}get(e,r){let n=this._localCache.get(e);if(n!==void 0)return n;if(!r){let o=G.cache[e];return o&&o[this._kRitmExports]}}set(e,r,n){n?this._localCache.set(e,r):e in G.cache?G.cache[e][this._kRitmExports]=r:(W('non-core module is unexpectedly not in require.cache: "%s"',e),this._localCache.set(e,r))}};function Mn(t,e,r){if(!(this instanceof Mn))return new Mn(t,e,r);if(typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),typeof Ge._resolveFilename!="function"){console.error("Error: Expected Module._resolveFilename to be a function (was: %s) - aborting!",typeof Ge._resolveFilename),console.error("Please report this error as an issue related to Node.js %s at %s",process.version,of().bugs.url);return}this._cache=new hc,this._unhooked=!1,this._origRequire=Ge.prototype.require;let n=this,o=new Set,s=e?e.internals===!0:!1,a=Array.isArray(t);W("registering require hook"),this._require=Ge.prototype.require=function(c){return n._unhooked===!0?(W("ignoring require call - module is soft-unhooked"),n._origRequire.apply(this,arguments)):i.call(this,arguments,!1)},typeof process.getBuiltinModule=="function"&&(this._origGetBuiltinModule=process.getBuiltinModule,this._getBuiltinModule=process.getBuiltinModule=function(c){return n._unhooked===!0?(W("ignoring process.getBuiltinModule call - module is soft-unhooked"),n._origGetBuiltinModule.apply(this,arguments)):i.call(this,arguments,!0)});function i(c,u){let p=c[0],_=hr(p),l;if(_){if(l=p,p.startsWith("node:")){let x=p.slice(5);hr(x)&&(l=x)}}else{if(u)return W("call to process.getBuiltinModule with unknown built-in id"),n._origGetBuiltinModule.apply(this,c);try{l=Ge._resolveFilename(p,this)}catch(x){return W('Module._resolveFilename("%s") threw %j, calling original Module.require',p,x.message),n._origRequire.apply(this,c)}}let T,m;if(W("processing %s module require('%s'): %s",_===!0?"core":"non-core",p,l),n._cache.has(l,_)===!0)return W("returning already patched cached module: %s",l),n._cache.get(l,_);let R=o.has(l);R===!1&&o.add(l);let g=u?n._origGetBuiltinModule.apply(this,c):n._origRequire.apply(this,c);if(R===!0)return W("module is in the process of being patched already - ignoring: %s",l),g;if(o.delete(l),_===!0){if(a===!0&&t.includes(l)===!1)return W("ignoring core module not on whitelist: %s",l),g;T=l}else if(a===!0&&t.includes(l)){let x=mr.parse(l);T=x.name,m=x.dir}else{let x=pP(l);if(x===void 0)return W("could not parse filename: %s",l),g;T=x.name,m=x.basedir;let v=lP(x);W("resolved filename to module: %s (id: %s, resolved: %s, basedir: %s)",T,p,v,m);let y=!1;if(a){if(!p.startsWith(".")&&t.includes(p)&&(T=p,y=!0),!t.includes(T)&&!t.includes(v))return g;t.includes(v)&&v!==T&&(T=v,y=!0)}if(!y){let V;try{V=EP(T,m)}catch{return W("could not resolve module: %s",T),n._cache.set(l,g,_),g}if(V!==l)if(s===!0)T=T+mr.sep+mr.relative(m,l),W("preparing to process require of internal file: %s",T);else return W("ignoring require of non-main module file: %s",V),n._cache.set(l,g,_),g}}n._cache.set(l,g,_),W("calling require hook: %s",T);let w=r(g,T,m);return n._cache.set(l,w,_),W("returning module: %s",T),w}}Mn.prototype.unhook=function(){this._unhooked=!0,this._require===Ge.prototype.require?(Ge.prototype.require=this._origRequire,W("require unhook successful")):W("require unhook unsuccessful"),process.getBuiltinModule!==void 0&&(this._getBuiltinModule===process.getBuiltinModule?(process.getBuiltinModule=this._origGetBuiltinModule,W("process.getBuiltinModule unhook successful")):W("process.getBuiltinModule unhook unsuccessful"))};function lP(t){let e=mr.sep!=="/"?t.path.split(mr.sep).join("/"):t.path;return mr.posix.join(t.name,e).replace(_P,"")}});var Ms,xs,sf=E(()=>{Ms=class{hooks=[];children=new Map},xs=class{_trie=new Ms;_counter=0;insert(e){let r=this._trie;for(let n of e.moduleName.split("/")){let o=r.children.get(n);o||(o=new Ms,r.children.set(n,o)),r=o}r.hooks.push({hook:e,insertedId:this._counter++})}search(e,{maintainInsertionOrder:r,fullOnly:n}={}){let o=this._trie,s=[],a=!0;for(let i of e.split("/")){let c=o.children.get(i);if(!c){a=!1;break}n||s.push(...c.hooks),o=c}return n&&a&&s.push(...o.hooks),s.length===0?[]:s.length===1?[s[0].hook]:(r&&s.sort((i,c)=>i.insertedId-c.insertedId),s.map(({hook:i})=>i))}}});import*as gc from"path";function SP(t){return gc.sep!=="/"?t.split(gc.sep).join("/"):t}var cf,TP,ys,uf=E(()=>{cf=Gt(Rc());sf();TP=["afterEach","after","beforeEach","before","describe","it"].every(t=>typeof global[t]=="function"),ys=class t{_moduleNameTrie=new xs;static _instance;constructor(){this._initialize()}_initialize(){new cf.Hook(null,{internals:!0},(e,r,n)=>{let o=SP(r),s=this._moduleNameTrie.search(o,{maintainInsertionOrder:!0,fullOnly:n===void 0});for(let{onRequire:a}of s)e=a(e,r,n);return e})}register(e,r){let n={moduleName:e,onRequire:r};return this._moduleNameTrie.insert(n),n}static getInstance(){return TP?new t:this._instance=this._instance??new t}}});var Sf=f(Ut=>{var pf=[],vc=new WeakMap,Ef=new WeakMap,_f=new Map,lf=[],fP={set(t,e,r){return vc.get(t)[e](r)},get(t,e){if(e===Symbol.toStringTag)return"Module";let r=Ef.get(t)[e];if(typeof r=="function")return r()},defineProperty(t,e,r){if(!("value"in r))throw new Error("Getters/setters are not supported for exports property descriptors.");return vc.get(t)[e](r.value)}};function dP(t,e,r,n,o){_f.set(t,o),vc.set(e,r),Ef.set(e,n);let s=new Proxy(e,fP);pf.forEach(a=>a(t,s)),lf.push([t,s])}var Tf=!1;function AP(){return Tf}function hP(t){Tf=t}Ut.register=dP;Ut.importHooks=pf;Ut.specifiers=_f;Ut.toHook=lf;Ut.getExperimentalPatchInternals=AP;Ut.setExperimentalPatchInternals=hP});var Rf=f((I1,Rr)=>{var ff=G("path"),mP=pc(),{fileURLToPath:df}=G("url"),{MessageChannel:RP}=G("worker_threads"),{importHooks:Oc,specifiers:gP,toHook:vP,getExperimentalPatchInternals:OP}=Sf();function hf(t){Oc.push(t),vP.forEach(([e,r])=>t(e,r))}function mf(t){let e=Oc.indexOf(t);e>-1&&Oc.splice(e,1)}function Af(t,e,r,n){let o=t(e,r,n);o&&o!==e&&(e.default=o)}var Nc;function NP(){let{port1:t,port2:e}=new RP,r=0,n;Nc=i=>{r++,t.postMessage(i)},t.on("message",()=>{r--,n&&r<=0&&n()}).unref();function o(){let i=setInterval(()=>{},1e3),c=new Promise(u=>{n=u}).then(()=>{clearInterval(i)});return r===0&&n(),c}let s=e;return{registerOptions:{data:{addHookMessagePort:s,include:[]},transferList:[s]},addHookMessagePort:s,waitForAllMessagesAcknowledged:o}}function xn(t,e,r){if(!(this instanceof xn))return new xn(t,e,r);typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let n=e?e.internals===!0:!1;Nc&&Array.isArray(t)&&Nc(t),this._iitmHook=(o,s)=>{let a=o,i=o.startsWith("node:"),c;if(i)o=o.replace(/^node:/,"");else{if(o.startsWith("file://"))try{o=df(o)}catch{}let u=mP(o);u&&(o=u.name,c=u.basedir)}if(t){for(let u of t)if(u===o){if(c){if(n)o=o+ff.sep+ff.relative(c,df(a));else if(!OP()&&!c.endsWith(gP.get(a)))continue}Af(r,s,o,c)}}else Af(r,s,o,c)},hf(this._iitmHook)}xn.prototype.unhook=function(){mf(this._iitmHook)};Rr.exports=xn;Rr.exports.Hook=xn;Rr.exports.addHook=hf;Rr.exports.removeHook=mf;Rr.exports.createAddHookMessageChannel=NP});function gf(t,e,r){let n,o;try{o=t()}catch(s){n=s}finally{if(e(n,o),n&&!r)throw n;return o}}async function vf(t,e,r){let n,o;try{o=await t()}catch(s){n=s}finally{if(e(n,o),n&&!r)throw n;return o}}function Ds(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var Pc=E(()=>{});import*as Je from"path";import{types as Of}from"util";import{readFileSync as PP}from"fs";function Nf(t,e,r){return typeof e>"u"?t.includes("*"):t.some(n=>aS(e,n,{includePrerelease:r}))}var Pf,Cf,gr,Lf=E(()=>{pS();oc();ES();uf();Pf=Gt(Rf());O();Cf=Gt(Rc());Pc();gr=class extends gs{_modules;_hooks=[];_requireInTheMiddleSingleton=ys.getInstance();_enabled=!1;constructor(e,r,n){super(e,r,n);let o=this.init();o&&!Array.isArray(o)&&(o=[o]),this._modules=o||[],this._config.enabled&&this.enable()}_wrap=(e,r,n)=>{if(Ds(e[r])&&this._unwrap(e,r),Of.isProxy(e)){let o=Mt(Object.assign({},e),r,n);return Object.defineProperty(e,r,{value:o}),o}else return Mt(e,r,n)};_unwrap=(e,r)=>Of.isProxy(e)?Object.defineProperty(e,r,{value:e[r]}):Sr(e,r);_massWrap=(e,r,n)=>{if(e)Array.isArray(e)||(e=[e]);else{S.error("must provide one or more modules to patch");return}if(!(r&&Array.isArray(r))){S.error("must provide one or more functions to wrap on modules");return}e.forEach(o=>{r.forEach(s=>{this._wrap(o,s,n)})})};_massUnwrap=(e,r)=>{if(e)Array.isArray(e)||(e=[e]);else{S.error("must provide one or more modules to patch");return}if(!(r&&Array.isArray(r))){S.error("must provide one or more functions to wrap on modules");return}e.forEach(n=>{r.forEach(o=>{this._unwrap(n,o)})})};_warnOnPreloadedModules(){this._modules.forEach(e=>{let{name:r}=e;try{let n=G.resolve(r);G.cache[n]&&this._diag.warn(`Module ${r} has been loaded before ${this.instrumentationName} so it might not work, please initialize it before requiring ${r}`)}catch{}})}_extractPackageVersion(e){try{let r=PP(Je.join(e,"package.json"),{encoding:"utf8"}),n=JSON.parse(r).version;return typeof n=="string"?n:void 0}catch{S.warn("Failed extracting version",e)}}_onRequire(e,r,n,o){if(!o)return typeof e.patch=="function"&&(e.moduleExports=r,this._enabled)?(this._diag.debug("Applying instrumentation patch for nodejs core module on require hook",{module:e.name}),e.patch(r)):r;let s=this._extractPackageVersion(o);if(e.moduleVersion=s,e.name===n)return Nf(e.supportedVersions,s,e.includePrerelease)&&typeof e.patch=="function"&&(e.moduleExports=r,this._enabled)?(this._diag.debug("Applying instrumentation patch for module on require hook",{module:e.name,version:e.moduleVersion,baseDir:o}),e.patch(r,e.moduleVersion)):r;let a=e.files??[],i=Je.normalize(n);return a.filter(u=>u.name===i).filter(u=>Nf(u.supportedVersions,s,e.includePrerelease)).reduce((u,p)=>(p.moduleExports=u,this._enabled?(this._diag.debug("Applying instrumentation patch for nodejs module file on require hook",{module:e.name,version:e.moduleVersion,fileName:p.name,baseDir:o}),p.patch(u,e.moduleVersion)):u),r)}enable(){if(!this._enabled){if(this._enabled=!0,this._hooks.length>0){for(let e of this._modules){typeof e.patch=="function"&&e.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module on instrumentation enabled",{module:e.name,version:e.moduleVersion}),e.patch(e.moduleExports,e.moduleVersion));for(let r of e.files)r.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module file on instrumentation enabled",{module:e.name,version:e.moduleVersion,fileName:r.name}),r.patch(r.moduleExports,e.moduleVersion))}return}this._warnOnPreloadedModules();for(let e of this._modules){let r=(a,i,c)=>{if(!c&&Je.isAbsolute(i)){let u=Je.parse(i);i=u.name,c=u.dir}return this._onRequire(e,a,i,c)},n=(a,i,c)=>this._onRequire(e,a,i,c),o=Je.isAbsolute(e.name)?new Cf.Hook([e.name],{internals:!0},n):this._requireInTheMiddleSingleton.register(e.name,n);this._hooks.push(o);let s=new Pf.Hook([e.name],{internals:!1},r);this._hooks.push(s)}}}disable(){if(this._enabled){this._enabled=!1;for(let e of this._modules){typeof e.unpatch=="function"&&e.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module on instrumentation disabled",{module:e.name,version:e.moduleVersion}),e.unpatch(e.moduleExports,e.moduleVersion));for(let r of e.files)r.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module file on instrumentation disabled",{module:e.name,version:e.moduleVersion,fileName:r.name}),r.unpatch(r.moduleExports,e.moduleVersion))}}}isEnabled(){return this._enabled}}});import{normalize as Us}from"path";var If=E(()=>{});var Mf=E(()=>{Lf();If()});var Cc=E(()=>{Mf()});var bs,xf=E(()=>{bs=class{name;supportedVersions;patch;unpatch;files;constructor(e,r,n,o,s){this.name=e,this.supportedVersions=r,this.patch=n,this.unpatch=o,this.files=s||[]}}});var ws,yf=E(()=>{Cc();ws=class{supportedVersions;patch;unpatch;name;constructor(e,r,n,o){this.supportedVersions=r,this.patch=n,this.unpatch=o,this.name=Us(e)}}});function Df(t,e){let r=bt.OLD,n=e==null?void 0:e.split(",").map(o=>o.trim()).filter(o=>o!=="");for(let o of n??[])if(o.toLowerCase()===t+"/dup"){r=bt.DUPLICATE;break}else o.toLowerCase()===t&&(r=bt.STABLE);return r}var bt,Uf=E(()=>{(function(t){t[t.STABLE=1]="STABLE",t[t.OLD=2]="OLD",t[t.DUPLICATE=3]="DUPLICATE"})(bt||(bt={}))});var bf={};pe(bf,{InstrumentationBase:()=>gr,InstrumentationNodeModuleDefinition:()=>bs,InstrumentationNodeModuleFile:()=>ws,SemconvStability:()=>bt,isWrapped:()=>Ds,registerInstrumentations:()=>ZT,safeExecuteInTheMiddle:()=>gf,safeExecuteInTheMiddleAsync:()=>vf,semconvStabilityFromStr:()=>Df});var wf=E(()=>{eS();Cc();xf();yf();Pc();Uf()});function Bf(t){return new vr(t)}function Vf(t,e,r){var n,o,s;return!e&&!r?s=t:r?(n=t,o=e,s=r):(n=t,s=e),n=n??{},o=o??J.active(),{opts:n,ctx:o,fn:s}}function Gf(t,e,r){var n,o=(n=e.onException)!==null&&n!==void 0?n:CP,s=function(i){throw o(i,t),t.end(),i};try{var a=r(t);return typeof(a==null?void 0:a.then)=="function"?a.then(function(i){return t.end(),i},s):(t.end(),a)}catch(i){throw s(i)}}var CP,vr,Ff=E(()=>{O();CP=function(t,e){e.recordException(t),e.setStatus({code:rt.ERROR})};vr=(function(){function t(e){this._tracer=e,this.startSpan=e.startSpan.bind(this._tracer),this.startActiveSpan=e.startActiveSpan.bind(this._tracer)}return t.prototype.withActiveSpan=function(e,r,n,o){var s=Vf(r,n,o),a=s.opts,i=s.ctx,c=s.fn;return this._tracer.startActiveSpan(e,a,i,function(u){return Gf(u,a,c)})},t.prototype.withSpan=function(e,r,n,o){var s=Vf(r,n,o),a=s.opts,i=s.ctx,c=s.fn,u=this._tracer.startSpan(e,a,i);return Gf(u,a,c)},t})()});var Hf={};pe(Hf,{SugaredTracer:()=>vr,wrapTracer:()=>Bf});var Lc=E(()=>{Ff()});var uA={};pe(uA,{BatchSpanProcessor:()=>Zs.BatchSpanProcessor,SimpleSpanProcessor:()=>Zs.SimpleSpanProcessor,W3CTraceContextPropagator:()=>it,context:()=>J,propagation:()=>oe,trace:()=>D});var Zs,pA=E(()=>{O();K();Zs=Gt(fs(),1)});var EA={};pe(EA,{FetchInstrumentation:()=>KC});var KC,_A=E(()=>{Lc();K();KC=class{constructor(t={}){this.instrumentationName="@netlify/otel/instrumentation-fetch",this.instrumentationVersion="1.0.0",this.originalFetch=null,this.config=t}getConfig(){return this.config}setConfig(){}setMeterProvider(){}setTracerProvider(t){this.provider=t}getTracerProvider(){return this.provider}annotateFromRequest(t,e){var o,s;let r=((s=(o=this.config).getRequestAttributes)==null?void 0:s.call(o,e))??{},n=new URL(e.url);t.setAttributes({...r,"http.request.method":e.method,"url.full":n.href,"url.host":n.host,"url.scheme":n.protocol.slice(0,-1),"server.address":n.hostname,"server.port":n.port,...this.prepareHeaders("request",e.headers)})}annotateFromResponse(t,e){var n,o;let r=((o=(n=this.config).getResponseAttributes)==null?void 0:o.call(n,e))??{};t.setAttributes({...r,"http.response.status_code":e.status,...this.prepareHeaders("response",e.headers)})}prepareHeaders(t,e){if(this.config.skipHeaders===!0)return{};let r=["*","/.*/"],n=this.config.skipHeaders??[],o=this.config.redactHeaders??[],s=n.some(c=>r.includes(c.toString())),a={};if(s)return a;let i=e.entries();for(let[c,u]of i){if(n.some(_=>typeof _=="string"?_==c:_.test(c)))continue;let p=`http.${t}.header.${c}`;o===!0||o.some(_=>typeof _=="string"?_==c:_.test(c))?a[p]="REDACTED":a[p]=u}return a}getTracer(){if(!this.provider)return;let t=this.provider.getTracer(this.instrumentationName,this.instrumentationVersion);return t instanceof vr?t:new vr(t)}enable(){let t=ot.fetch;this.originalFetch=t,ot.fetch=async(e,r)=>{var s;let n=typeof e=="string"?e:e instanceof URL?e.href:e.url,o=this.getTracer();return!o||(s=this.config.skipURLs)!=null&&s.some(a=>typeof a=="string"?n.startsWith(a):a.test(n))?await t(e,r):o.withActiveSpan("fetch",async a=>{let i=new Request(e,r);this.annotateFromRequest(a,i);let c=await t(i,r);return this.annotateFromResponse(a,c),c})}}disable(){this.originalFetch&&(ot.fetch=this.originalFetch,this.originalFetch=null)}}});import{fileURLToPath as sL}from"url";import{pipeline as XC,Readable as WC}from"stream";import{promisify as zC}from"util";var mA="__netlify__getTracer",RA="__netlify__shutdownTracers",Xc=(t,e)=>{var r;return(r=globalThis[mA])==null?void 0:r.call(globalThis,t,e)},Wc=async()=>{var t;return(t=globalThis[RA])==null?void 0:t.call(globalThis)};O();K();K();function IE(t){let e=BigInt(1e9);return BigInt(t[0])*e+BigInt(t[1])}function Lm(t){let e=Number(BigInt.asUintN(32,t)),r=Number(BigInt.asUintN(32,t>>BigInt(32)));return{low:e,high:r}}function ME(t){let e=IE(t);return Lm(e)}function Im(t){return IE(t).toString()}var Mm=typeof BigInt<"u"?Im:Po;function LE(t){return t}function xE(t){if(t!==void 0)return st(t)}var xm={encodeHrTime:ME,encodeSpanContext:st,encodeOptionalSpanContext:xE};function yE(t){var e,r;if(t===void 0)return xm;let n=(e=t.useLongBits)!==null&&e!==void 0?e:!0,o=(r=t.useHex)!==null&&r!==void 0?r:!1;return{encodeHrTime:n?ME:Mm,encodeSpanContext:o?LE:st,encodeOptionalSpanContext:o?LE:xE}}function DE(t){return{attributes:nn(t.attributes),droppedAttributesCount:0}}function UE(t){return{name:t.name,version:t.version}}function nn(t){return Object.keys(t).map(e=>bE(e,t[e]))}function bE(t,e){return{key:t,value:wE(e)}}function wE(t){let e=typeof t;return e==="string"?{stringValue:t}:e==="number"?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:e==="boolean"?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(wE)}}:e==="object"&&t!=null?{kvlistValue:{values:Object.entries(t).map(([r,n])=>bE(r,n))}}:{}}function Ym(t,e){var r;let n=t.spanContext(),o=t.status;return{traceId:e.encodeSpanContext(n.traceId),spanId:e.encodeSpanContext(n.spanId),parentSpanId:e.encodeOptionalSpanContext(t.parentSpanId),traceState:(r=n.traceState)===null||r===void 0?void 0:r.serialize(),name:t.name,kind:t.kind==null?0:t.kind+1,startTimeUnixNano:e.encodeHrTime(t.startTime),endTimeUnixNano:e.encodeHrTime(t.endTime),attributes:nn(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(s=>jm(s,e)),droppedEventsCount:t.droppedEventsCount,status:{code:o.code,message:o.message},links:t.links.map(s=>qm(s,e)),droppedLinksCount:t.droppedLinksCount}}function qm(t,e){var r;return{attributes:t.attributes?nn(t.attributes):[],spanId:e.encodeSpanContext(t.context.spanId),traceId:e.encodeSpanContext(t.context.traceId),traceState:(r=t.context.traceState)===null||r===void 0?void 0:r.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}function jm(t,e){return{attributes:t.attributes?nn(t.attributes):[],name:t.name,timeUnixNano:e.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}function A_(t,e){let r=yE(e);return{resourceSpans:Xm(t,r)}}function Km(t){let e=new Map;for(let r of t){let n=e.get(r.resource);n||(n=new Map,e.set(r.resource,n));let o=`${r.instrumentationLibrary.name}@${r.instrumentationLibrary.version||""}:${r.instrumentationLibrary.schemaUrl||""}`,s=n.get(o);s||(s=[],n.set(o,s)),s.push(r)}return e}function Xm(t,e){let r=Km(t),n=[],o=r.entries(),s=o.next();for(;!s.done;){let[a,i]=s.value,c=[],u=i.values(),p=u.next();for(;!p.done;){let l=p.value;if(l.length>0){let T=l.map(m=>Ym(m,e));c.push({scope:UE(l[0].instrumentationLibrary),spans:T,schemaUrl:l[0].instrumentationLibrary.schemaUrl})}p=u.next()}let _={resource:DE(a),scopeSpans:c,schemaUrl:void 0};n.push(_),s=o.next()}return n}var wo={serializeRequest:t=>{let e=A_(t,{useHex:!0,useLongBits:!1});return new TextEncoder().encode(JSON.stringify(e))},deserializeResponse:t=>{let e=new TextDecoder;return JSON.parse(e.decode(t))}};var LP=Object.defineProperty,IP=Object.getOwnPropertyNames,Yf=t=>{throw TypeError(t)},yc=(t,e)=>function(){return t&&(e=(0,t[IP(t)[0]])(t=0)),e},qf=(t,e)=>{for(var r in e)LP(t,r,{get:e[r],enumerable:!0})},Dc=(t,e,r)=>e.has(t)||Yf("Cannot "+r),yn=(t,e,r)=>(Dc(t,e,"read from private field"),r?r.call(t):e.get(t)),Vs=(t,e,r)=>e.has(t)?Yf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),kf=(t,e,r,n)=>(Dc(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),MP=(t,e,r)=>(Dc(t,e,"access private method"),r),jf,Kf,Xf,Wf=yc({"src/constants.ts"(){"use strict";jf="__netlify__getTracer",Kf="__netlify__shutdownTracers",Xf="__nfOTLPTrace"}}),zf={};qf(zf,{default:()=>Jf});var Jf,xP=yc({"package.json"(){Jf={name:"@netlify/otel",version:"4.3.0",type:"module",engines:{node:"^18.14.0 || >=20.6.1"},main:"./dist/main.cjs",module:"./dist/main.js",types:"./dist/main.d.ts",exports:{".":{require:{types:"./dist/main.d.cts",default:"./dist/main.cjs"},import:{types:"./dist/main.d.ts",default:"./dist/main.js"},default:{types:"./dist/main.d.ts",default:"./dist/main.js"}},"./package.json":"./package.json","./bootstrap":{require:{types:"./dist/bootstrap/main.d.cts",default:"./dist/bootstrap/main.cjs"},import:{types:"./dist/bootstrap/main.d.ts",default:"./dist/bootstrap/main.js"},default:{types:"./dist/bootstrap/main.d.ts",default:"./dist/bootstrap/main.js"}},"./exporter-netlify":{require:{types:"./dist/exporters/netlify.d.cts",default:"./dist/exporters/netlify.cjs"},import:{types:"./dist/exporters/netlify.d.ts",default:"./dist/exporters/netlify.js"},default:{types:"./dist/exporters/netlify.d.ts",default:"./dist/exporters/netlify.js"}},"./instrumentation-fetch":{require:{types:"./dist/instrumentations/fetch.d.cts",default:"./dist/instrumentations/fetch.cjs"},import:{types:"./dist/instrumentations/fetch.d.ts",default:"./dist/instrumentations/fetch.js"},default:{types:"./dist/instrumentations/fetch.d.ts",default:"./dist/instrumentations/fetch.js"}},"./opentelemetry":{require:{types:"./dist/opentelemetry.d.cts",default:"./dist/opentelemetry.cjs"},import:{types:"./dist/opentelemetry.d.ts",default:"./dist/opentelemetry.js"},default:{types:"./dist/opentelemetry.d.ts",default:"./dist/opentelemetry.js"}}},files:["dist/**/*"],scripts:{build:"tsup-node",dev:"tsup-node --watch",prepack:"npm run build",test:"run-s build test:ci","test:dev":"run-s build test:dev:*","test:ci":"run-s build test:ci:*","test:dev:vitest":"vitest","test:dev:vitest:watch":"vitest watch","test:ci:vitest":"vitest run",publint:"npx -y publint --strict"},keywords:["netlify","cdn"],license:"MIT",repository:"netlify/primitives",bugs:{url:"https://github.com/netlify/primitives/issues"},author:"Netlify Inc.",devDependencies:{msw:"^2.10.5","npm-run-all2":"^7.0.2",tsup:"^8.0.0",vitest:"^3.0.0"},dependencies:{"@opentelemetry/api":"1.9.0","@opentelemetry/core":"1.30.1","@opentelemetry/instrumentation":"^0.203.0","@opentelemetry/otlp-transformer":"0.57.2","@opentelemetry/resources":"1.30.1","@opentelemetry/sdk-trace-node":"1.30.1"}}}}),Qf={};qf(Qf,{NetlifySpanExporter:()=>Zf});var Dn,Un,Ic,Mc,$f,xc,Zf,yP=yc({"src/exporters/netlify.ts"(){"use strict";Wf(),xc=class ed{constructor(){Vs(this,Mc),Vs(this,Dn),Vs(this,Un),kf(this,Dn,new ke(MP(this,Mc,$f),this)),kf(this,Un,S.createComponentLogger({namespace:"netlify-span-exporter"}))}export(e,r){if(yn(this,Un).debug(`export ${e.length.toString()} spans`),yn(this,Dn).isCalled){r({code:ae.FAILED,error:new Error("Exporter has been shutdown")});return}console.log(Xf,yn(ed,Ic).decode(wo.serializeRequest(e))),r({code:ae.SUCCESS})}shutdown(){return yn(this,Dn).call()}},Dn=new WeakMap,Un=new WeakMap,Ic=new WeakMap,Mc=new WeakSet,$f=function(){return yn(this,Un).debug("Shutting down"),Promise.resolve()},Vs(xc,Ic,new TextDecoder),Zf=xc}});Wf();var td=async t=>{let{version:e}=await import("process"),r=e.slice(1),{W3CTraceContextPropagator:n}=await Promise.resolve().then(()=>(K(),CE)),{Resource:o}=await Promise.resolve().then(()=>(Ei(),d_)),{NodeTracerProvider:s}=await Promise.resolve().then(()=>Gt(fs(),1)),{registerInstrumentations:a}=await Promise.resolve().then(()=>(wf(),bf)),i=new o({"service.name":t.serviceName,"service.version":t.serviceVersion,"process.runtime.name":"nodejs","process.runtime.version":r,"deployment.environment":t.deploymentEnvironment,"http.url":t.siteUrl,"netlify.site.id":t.siteId,"netlify.site.name":t.siteName}),c=await Promise.all(t.spanProcessors??[await DP()]),u=new s({resource:i,spanProcessors:c});u.register({propagator:new n});let p=await Promise.all(t.instrumentations??[]);a({instrumentations:p,tracerProvider:u});let{trace:_}=await Promise.resolve().then(()=>(O(),Br)),{SugaredTracer:l}=await Promise.resolve().then(()=>(Lc(),Hf)),{default:T}=await Promise.resolve().then(()=>(xP(),zf));Object.defineProperty(globalThis,jf,{enumerable:!1,configurable:!0,writable:!1,value:function(R,g){return R?new l(_.getTracer(R,g)):new l(_.getTracer(T.name,T.version))}}),Object.defineProperty(globalThis,Kf,{enumerable:!1,configurable:!0,writable:!1,value:async()=>await u.shutdown()})},DP=async()=>{let{SimpleSpanProcessor:t}=await Promise.resolve().then(()=>Gt(fs(),1)),{NetlifySpanExporter:e}=await Promise.resolve().then(()=>(yP(),Qf));return new t(new e)};var EV=globalThis.Buffer?t=>Buffer.from(t,"base64").toString():t=>atob(t),rd=globalThis.Buffer?t=>Buffer.from(t).toString("base64"):t=>btoa(t);var sd=t=>{throw TypeError(t)},ad=(t,e,r)=>e.has(t)||sd("Cannot "+r),ve=(t,e,r)=>(ad(t,e,"read from private field"),r?r.call(t):e.get(t)),wn=(t,e,r)=>e.has(t)?sd("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Vn=(t,e,r,n)=>(ad(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Hs=(t=>(t.Delete="delete",t.Read="read",t.Write="write",t))(Hs||{}),UP={invalid_vary:"Responses must not use unsupported directives of the `Netlify-Vary` header (https://ntl.fyi/cache_api_invalid_vary).",no_cache:"Responses must not set cache control headers with the `private`, `no-cache` or `no-store` directives (https://ntl.fyi/cache_api_no_cache).",low_ttl:"Responses must have a cache control header with a `max-age` or `s-maxage` directive (https://ntl.fyi/cache_api_low_ttl).",no_directive:"Responses must have a cache control header with caching directives (https://ntl.fyi/cache_api_no_directive).",no_ttl:"Responses must have a cache control header with a `max-age` or `s-maxage` directive (https://ntl.fyi/cache_api_no_ttl).",no_status:"Responses must specify a status code (https://ntl.fyi/cache_api_no_status).",invalid_directive:"Responses must have a cache control header with caching directives (https://ntl.fyi/cache_api_invalid_directive).",status:"Responses must have a status code between 200 and 299 (https://ntl.fyi/cache_api_status)."},bP="The server has returned an unexpected error (https://ntl.fyi/cache_api_error).",wP="netlify-programmable-error",VP="netlify-programmable-headers",GP="netlify-programmable-status",BP="netlify-programmable-store",FP="netlify-forwarded-host",HP="user-agent",nd=new Set(["http:","https:"]),kP=new Set(["cookie","content-encoding","content-length"]),Gs=Symbol("getInternalHeaders"),od=Symbol("serializeResourceHeaders"),Or,Bs,bn,$P=class{constructor({getContext:t,name:e,userAgent:r}){wn(this,Or),wn(this,Bs),wn(this,bn),Vn(this,Or,t),Vn(this,Bs,e),Vn(this,bn,r)}[Gs](t){let{host:e,token:r}=t,n={Authorization:`Bearer ${r}`,[BP]:ve(this,Bs)};return e&&(n[FP]=e),ve(this,bn)&&(n[HP]=ve(this,bn)),n}[od](t){let e={};return t.forEach((r,n)=>{kP.has(n)||(n==="set-cookie"?(e[n]=e[n]||[],e[n].push(r)):e[n]=r.split(","))}),rd(JSON.stringify(e))}async add(t){await this.put(new Request(t),await fetch(t))}async addAll(t){await Promise.allSettled(t.map(e=>this.add(e)))}async delete(t){let e=ve(this,Or).call(this,{operation:"delete"});if(e){let r=Uc(t);await fetch(`${e.url}/${bc(r)}`,{headers:this[Gs](e),method:"DELETE"})}return!0}async keys(t){return[]}async match(t){try{let e=ve(this,Or).call(this,{operation:"read"});if(!e)return;let r=Uc(t),n=`${e.url}/${bc(r)}`,o=await fetch(n,{headers:this[Gs](e),method:"GET"});return o.ok?o:void 0}catch{}}async matchAll(t,e){if(!t)return[];let r=await this.match(t);return r?[r]:[]}async put(t,e){var s,a,i;if(!e.ok)throw new TypeError(`Cannot cache response with status ${e.status}.`);if(t instanceof Request&&t.method!=="GET")throw new TypeError(`Cannot cache response to ${t.method} request.`);if(e.status===206)throw new TypeError("Cannot cache response to a range request (206 Partial Content).");if((s=e.headers.get("vary"))!=null&&s.includes("*"))throw new TypeError("Cannot cache response with 'Vary: *' header.");let r=ve(this,Or).call(this,{operation:"write"});if(!r)return;let n=Uc(t),o=await fetch(`${r.url}/${bc(n)}`,{body:e.body,headers:{...this[Gs](r),[VP]:this[od](e.headers),[GP]:e.status.toString()},duplex:"half",method:"POST"});if(!o.ok){let c=((a=o.headers)==null?void 0:a.get(wP))??"",u=UP[c]||bP;(i=r.logger)==null||i.call(r,`Failed to write to the cache: ${u}`)}}};Or=new WeakMap;Bs=new WeakMap;bn=new WeakMap;var Uc=t=>{let e;if(t instanceof Request)e=new URL(t.url);else try{e=new URL(String(t))}catch{throw new TypeError(`${t} is not a valid URL.`)}if(!nd.has(e.protocol))throw new TypeError(`Cannot cache response for URL with unsupported protocol (${e.protocol}). Supported protocols are ${[...nd].join(", ")}.`);return e},bc=t=>encodeURIComponent(t.toString()),Fs,qe,id=class{constructor(t){wn(this,Fs),wn(this,qe),Vn(this,Fs,t),Vn(this,qe,new Map)}open(t){let e=ve(this,qe).get(t);return e||(e=new $P({...ve(this,Fs),name:t}),ve(this,qe).set(t,e)),Promise.resolve(e)}has(t){return Promise.resolve(ve(this,qe).has(t))}delete(t){return Promise.resolve(ve(this,qe).delete(t))}keys(){return Promise.resolve([...ve(this,qe).keys()])}async match(t,e){var r;if(e!=null&&e.cacheName)return(r=ve(this,qe).get(e.cacheName))==null?void 0:r.match(t);for(let n of ve(this,qe).values())if(await n.match(t)===void 0)return}};Fs=new WeakMap;qe=new WeakMap;var Nr=class t extends Error{constructor(e){super(e),this.name="NetlifyUserError",Object.setPrototypeOf(this,t.prototype)}};var YP={"cache-api-read":100,"cache-api-write":20},ks=class{constructor(e=YP){this.counts=new Map,this.limits=e}register(e){let r=this.counts.get(e)||0,n=this.limits[e]||0;return r>=n?!1:(this.counts.set(e,r+1),!0)}};import{AsyncLocalStorage as qP}from"async_hooks";var xe=new qP;import{env as cd}from"process";var $s=()=>!!cd.NETLIFY_DEV||!!cd.NETLIFY_LOCAL;var ud="__nfSystemLog",Pr=(t,e)=>{$s()||console.log(ud,{msg:t,fields:e})},wc=t=>{console.log(ud,JSON.stringify(t))};var pd=(t,e,r)=>!e||!r?null:{host:new URL(t).hostname,token:e,url:new URL("/.netlify/cache",r).toString()},jP=()=>{globalThis.caches=new id({getContext:({operation:t})=>{let e=xe.getStore();if(!(e!=null&&e.operationCounter))throw new Nr("The Cache API must be used within the scope of the request handler. Refer to https://ntl.fyi/cache-api-scope for more information.");let{cacheAPI:r,operationCounter:n}=e,o=t===Hs.Delete||t===Hs.Write?"cache-api-write":"cache-api-read";return n.register(o)?r||(Pr("missing Cache API metadata in request"),null):(console.log(`You've exceeded the number of allowed Cache API ${o==="cache-api-write"?"writes":"reads"} for a single invocation. Refer to https://ntl.fyi/cache-api-limits for more information.`),null)},userAgent:"netlify-functions"})};jP();var Ed="x-nf-client-connection-ip",_d="x-nf-geo",ld="x-nf-account-id",Ys="x-nf-deploy-id",Td="x-nf-deploy-context",Sd="x-nf-deploy-published",fd="x-nf-site-id",dd="x-nf-request-flags",qs="x-nf-invocation-metadata",Ad="x-nf-request-id",hd="x-nf-start-timestamp",md="x-nf-trace-span-id",Rd="x-nf-request-start",gd="x-nf-fetch-timing";var js=t=>({id:t.headers.get(ld)??""});var Ks=t=>({context:t.get(Td)??"",id:t.get(Ys)??"",published:t.get(Sd)==="1"});var Ws=Symbol("Request flags"),Gn=Symbol("Request route"),KP=typeof Request>"u"?class{}:Request,vd,Xs=class extends(vd=KP,Ws,Gn,vd){},Od=t=>{let e=[];for(let r of t.fetchCalls){let o=((r.end??performance.now())-r.start).toFixed(1),s=o.endsWith(".0")?o.split(".")[0]:o;e.push(`${r.host};dur=${s}`)}return e};var Cr,Fn,Bn=class{constructor(e){ea(this,Cr);ea(this,Fn);ta(this,Cr,new Set),ta(this,Fn,e)}get(e){let r=Wn(this,Fn)[e];return r!==void 0&&Wn(this,Cr).add(e),r}get evaluations(){return Wn(this,Cr)}};Cr=new WeakMap,Fn=new WeakMap;var Nd=t=>t[Ws]??new Bn({}),Pd=(t,e)=>{t[Ws]=e};import{Buffer as XP}from"buffer";var Cd=t=>{if(t===null)return{};try{let{postal_code:e,...r}=JSON.parse(XP.from(t,"base64").toString("utf-8"));return Object.fromEntries(Object.entries({...r,postalCode:e}).filter(([,o])=>o!==void 0))}catch{return{}}};var Ld=t=>t??"";var $n=class{constructor(t,e,r,n,o,s){this.type=3,this.name="",this.prefix="",this.value="",this.suffix="",this.modifier=3,this.type=t,this.name=e,this.prefix=r,this.value=n,this.suffix=o,this.modifier=s}hasCustomName(){return this.name!==""&&typeof this.name!="number"}},WP=/[$_\p{ID_Start}]/u,zP=/[$_\u200C\u200D\p{ID_Continue}]/u,Gc=".*";function JP(t,e){return(e?/^[\x00-\xFF]*$/:/^[\x00-\x7F]*$/).test(t)}function xd(t,e=!1){let r=[],n=0;for(;n<t.length;){let o=t[n],s=function(a){if(!e)throw new TypeError(a);r.push({type:"INVALID_CHAR",index:n,value:t[n++]})};if(o==="*"){r.push({type:"ASTERISK",index:n,value:t[n++]});continue}if(o==="+"||o==="?"){r.push({type:"OTHER_MODIFIER",index:n,value:t[n++]});continue}if(o==="\\"){r.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});continue}if(o==="{"){r.push({type:"OPEN",index:n,value:t[n++]});continue}if(o==="}"){r.push({type:"CLOSE",index:n,value:t[n++]});continue}if(o===":"){let a="",i=n+1;for(;i<t.length;){let c=t.substr(i,1);if(i===n+1&&WP.test(c)||i!==n+1&&zP.test(c)){a+=t[i++];continue}break}if(!a){s(`Missing parameter name at ${n}`);continue}r.push({type:"NAME",index:n,value:a}),n=i;continue}if(o==="("){let a=1,i="",c=n+1,u=!1;if(t[c]==="?"){s(`Pattern cannot start with "?" at ${c}`);continue}for(;c<t.length;){if(!JP(t[c],!1)){s(`Invalid character '${t[c]}' at ${c}.`),u=!0;break}if(t[c]==="\\"){i+=t[c++]+t[c++];continue}if(t[c]===")"){if(a--,a===0){c++;break}}else if(t[c]==="("&&(a++,t[c+1]!=="?")){s(`Capturing groups are not allowed at ${c}`),u=!0;break}i+=t[c++]}if(u)continue;if(a){s(`Unbalanced pattern at ${n}`);continue}if(!i){s(`Missing pattern at ${n}`);continue}r.push({type:"REGEX",index:n,value:i}),n=c;continue}r.push({type:"CHAR",index:n,value:t[n++]})}return r.push({type:"END",index:n,value:""}),r}function yd(t,e={}){let r=xd(t);e.delimiter??(e.delimiter="/#?"),e.prefixes??(e.prefixes="./");let n=`[^${ye(e.delimiter)}]+?`,o=[],s=0,a=0,i="",c=new Set,u=v=>{if(a<r.length&&r[a].type===v)return r[a++].value},p=()=>u("OTHER_MODIFIER")??u("ASTERISK"),_=v=>{let y=u(v);if(y!==void 0)return y;let{type:V,index:q}=r[a];throw new TypeError(`Unexpected ${V} at ${q}, expected ${v}`)},l=()=>{let v="",y;for(;y=u("CHAR")??u("ESCAPED_CHAR");)v+=y;return v},T=v=>v,m=e.encodePart||T,R="",g=v=>{R+=v},w=()=>{R.length&&(o.push(new $n(3,"","",m(R),"",3)),R="")},x=(v,y,V,q,P)=>{let I=3;switch(P){case"?":I=1;break;case"*":I=0;break;case"+":I=2;break}if(!y&&!V&&I===3){g(v);return}if(w(),!y&&!V){if(!v)return;o.push(new $n(3,"","",m(v),"",I));return}let N;V?V==="*"?N=Gc:N=V:N=n;let X=2;N===n?(X=1,N=""):N===Gc&&(X=0,N="");let h;if(y?h=y:V&&(h=s++),c.has(h))throw new TypeError(`Duplicate name '${h}'.`);c.add(h),o.push(new $n(X,h,m(v),N,m(q),I))};for(;a<r.length;){let v=u("CHAR"),y=u("NAME"),V=u("REGEX");if(!y&&!V&&(V=u("ASTERISK")),y||V){let I=v??"";e.prefixes.indexOf(I)===-1&&(g(I),I=""),w();let N=p();x(I,y,V,"",N);continue}let q=v??u("ESCAPED_CHAR");if(q){g(q);continue}if(u("OPEN")){let I=l(),N=u("NAME"),X=u("REGEX");!N&&!X&&(X=u("ASTERISK"));let h=l();_("CLOSE");let L=p();x(I,N,X,h,L);continue}w(),_("END")}return o}function ye(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function Id(t){return t&&t.ignoreCase?"ui":"u"}function QP(t,e,r){return Dd(yd(t,r),e,r)}function Lr(t){switch(t){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function Dd(t,e,r={}){r.delimiter??(r.delimiter="/#?"),r.prefixes??(r.prefixes="./"),r.sensitive??(r.sensitive=!1),r.strict??(r.strict=!1),r.end??(r.end=!0),r.start??(r.start=!0),r.endsWith="";let n=r.start?"^":"";for(let i of t){if(i.type===3){i.modifier===3?n+=ye(i.value):n+=`(?:${ye(i.value)})${Lr(i.modifier)}`;continue}e&&e.push(i.name);let c=`[^${ye(r.delimiter)}]+?`,u=i.value;if(i.type===1?u=c:i.type===0&&(u=Gc),!i.prefix.length&&!i.suffix.length){i.modifier===3||i.modifier===1?n+=`(${u})${Lr(i.modifier)}`:n+=`((?:${u})${Lr(i.modifier)})`;continue}if(i.modifier===3||i.modifier===1){n+=`(?:${ye(i.prefix)}(${u})${ye(i.suffix)})`,n+=Lr(i.modifier);continue}n+=`(?:${ye(i.prefix)}`,n+=`((?:${u})(?:`,n+=ye(i.suffix),n+=ye(i.prefix),n+=`(?:${u}))*)${ye(i.suffix)})`,i.modifier===0&&(n+="?")}let o=`[${ye(r.endsWith)}]|$`,s=`[${ye(r.delimiter)}]`;if(r.end)return r.strict||(n+=`${s}?`),r.endsWith.length?n+=`(?=${o})`:n+="$",new RegExp(n,Id(r));r.strict||(n+=`(?:${s}(?=${o}))?`);let a=!1;if(t.length){let i=t[t.length-1];i.type===3&&i.modifier===3&&(a=r.delimiter.indexOf(i)>-1)}return a||(n+=`(?=${s}|${o})`),new RegExp(n,Id(r))}var Tt={delimiter:"",prefixes:"",sensitive:!0,strict:!0},ZP={delimiter:".",prefixes:"",sensitive:!0,strict:!0},eC={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function tC(t,e){return t.length?t[0]==="/"?!0:!e||t.length<2?!1:(t[0]=="\\"||t[0]=="{")&&t[1]=="/":!1}function Ud(t,e){return t.startsWith(e)?t.substring(e.length,t.length):t}function rC(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t}function bd(t){return!t||t.length<2?!1:t[0]==="["||(t[0]==="\\"||t[0]==="{")&&t[1]==="["}var wd=["ftp","file","http","https","ws","wss"];function Vd(t){if(!t)return!0;for(let e of wd)if(t.test(e))return!0;return!1}function nC(t,e){if(t=Ud(t,"#"),e||t==="")return t;let r=new URL("https://example.com");return r.hash=t,r.hash?r.hash.substring(1,r.hash.length):""}function oC(t,e){if(t=Ud(t,"?"),e||t==="")return t;let r=new URL("https://example.com");return r.search=t,r.search?r.search.substring(1,r.search.length):""}function sC(t,e){return e||t===""?t:bd(t)?Fd(t):Bd(t)}function aC(t,e){if(e||t==="")return t;let r=new URL("https://example.com");return r.password=t,r.password}function iC(t,e){if(e||t==="")return t;let r=new URL("https://example.com");return r.username=t,r.username}function cC(t,e,r){if(r||t==="")return t;if(e&&!wd.includes(e))return new URL(`${e}:${t}`).pathname;let n=t[0]=="/";return t=new URL(n?t:"/-"+t,"https://example.com").pathname,n||(t=t.substring(2,t.length)),t}function uC(t,e,r){return Gd(e)===t&&(t=""),r||t===""?t:Hd(t)}function pC(t,e){return t=rC(t,":"),e||t===""?t:Bc(t)}function Gd(t){switch(t){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function Bc(t){if(t==="")return t;if(/^[-+.A-Za-z0-9]*$/.test(t))return t.toLowerCase();throw new TypeError(`Invalid protocol '${t}'.`)}function EC(t){if(t==="")return t;let e=new URL("https://example.com");return e.username=t,e.username}function _C(t){if(t==="")return t;let e=new URL("https://example.com");return e.password=t,e.password}function Bd(t){if(t==="")return t;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(t))throw new TypeError(`Invalid hostname '${t}'`);let e=new URL("https://example.com");return e.hostname=t,e.hostname}function Fd(t){if(t==="")return t;if(/[^0-9a-fA-F[\]:]/g.test(t))throw new TypeError(`Invalid IPv6 hostname '${t}'`);return t.toLowerCase()}function Hd(t){if(t===""||/^[0-9]*$/.test(t)&&parseInt(t)<=65535)return t;throw new TypeError(`Invalid port '${t}'.`)}function lC(t){if(t==="")return t;let e=new URL("https://example.com");return e.pathname=t[0]!=="/"?"/-"+t:t,t[0]!=="/"?e.pathname.substring(2,e.pathname.length):e.pathname}function TC(t){return t===""?t:new URL(`data:${t}`).pathname}function SC(t){if(t==="")return t;let e=new URL("https://example.com");return e.search=t,e.search.substring(1,e.search.length)}function fC(t){if(t==="")return t;let e=new URL("https://example.com");return e.hash=t,e.hash.substring(1,e.hash.length)}var dC=class{constructor(t){this.tokenList=[],this.internalResult={},this.tokenIndex=0,this.tokenIncrement=1,this.componentStart=0,this.state=0,this.groupDepth=0,this.hostnameIPv6BracketDepth=0,this.shouldTreatAsStandardURL=!1,this.input=t}get result(){return this.internalResult}parse(){for(this.tokenList=xd(this.input,!0);this.tokenIndex<this.tokenList.length;this.tokenIndex+=this.tokenIncrement){if(this.tokenIncrement=1,this.tokenList[this.tokenIndex].type==="END"){if(this.state===0){this.rewind(),this.isHashPrefix()?this.changeState(9,1):this.isSearchPrefix()?(this.changeState(8,1),this.internalResult.hash=""):(this.changeState(7,0),this.internalResult.search="",this.internalResult.hash="");continue}else if(this.state===2){this.rewindAndSetState(5);continue}this.changeState(10,0);break}if(this.groupDepth>0)if(this.isGroupClose())this.groupDepth-=1;else continue;if(this.isGroupOpen()){this.groupDepth+=1;continue}switch(this.state){case 0:this.isProtocolSuffix()&&(this.internalResult.username="",this.internalResult.password="",this.internalResult.hostname="",this.internalResult.port="",this.internalResult.pathname="",this.internalResult.search="",this.internalResult.hash="",this.rewindAndSetState(1));break;case 1:if(this.isProtocolSuffix()){this.computeShouldTreatAsStandardURL();let t=7,e=1;this.shouldTreatAsStandardURL&&(this.internalResult.pathname="/"),this.nextIsAuthoritySlashes()?(t=2,e=3):this.shouldTreatAsStandardURL&&(t=2),this.changeState(t,e)}break;case 2:this.isIdentityTerminator()?this.rewindAndSetState(3):(this.isPathnameStart()||this.isSearchPrefix()||this.isHashPrefix())&&this.rewindAndSetState(5);break;case 3:this.isPasswordPrefix()?this.changeState(4,1):this.isIdentityTerminator()&&this.changeState(5,1);break;case 4:this.isIdentityTerminator()&&this.changeState(5,1);break;case 5:this.isIPv6Open()?this.hostnameIPv6BracketDepth+=1:this.isIPv6Close()&&(this.hostnameIPv6BracketDepth-=1),this.isPortPrefix()&&!this.hostnameIPv6BracketDepth?this.changeState(6,1):this.isPathnameStart()?this.changeState(7,0):this.isSearchPrefix()?this.changeState(8,1):this.isHashPrefix()&&this.changeState(9,1);break;case 6:this.isPathnameStart()?this.changeState(7,0):this.isSearchPrefix()?this.changeState(8,1):this.isHashPrefix()&&this.changeState(9,1);break;case 7:this.isSearchPrefix()?this.changeState(8,1):this.isHashPrefix()&&this.changeState(9,1);break;case 8:this.isHashPrefix()&&this.changeState(9,1);break;case 9:break;case 10:break}}}changeState(t,e){switch(this.state){case 0:break;case 1:this.internalResult.protocol=this.makeComponentString();break;case 2:break;case 3:this.internalResult.username=this.makeComponentString();break;case 4:this.internalResult.password=this.makeComponentString();break;case 5:this.internalResult.hostname=this.makeComponentString();break;case 6:this.internalResult.port=this.makeComponentString();break;case 7:this.internalResult.pathname=this.makeComponentString();break;case 8:this.internalResult.search=this.makeComponentString();break;case 9:this.internalResult.hash=this.makeComponentString();break;case 10:break}this.changeStateWithoutSettingComponent(t,e)}changeStateWithoutSettingComponent(t,e){this.state=t,this.componentStart=this.tokenIndex+e,this.tokenIndex+=e,this.tokenIncrement=0}rewind(){this.tokenIndex=this.componentStart,this.tokenIncrement=0}rewindAndSetState(t){this.rewind(),this.state=t}safeToken(t){return t<0&&(t=this.tokenList.length-t),t<this.tokenList.length?this.tokenList[t]:this.tokenList[this.tokenList.length-1]}isNonSpecialPatternChar(t,e){let r=this.safeToken(t);return r.value===e&&(r.type==="CHAR"||r.type==="ESCAPED_CHAR"||r.type==="INVALID_CHAR")}isProtocolSuffix(){return this.isNonSpecialPatternChar(this.tokenIndex,":")}nextIsAuthoritySlashes(){return this.isNonSpecialPatternChar(this.tokenIndex+1,"/")&&this.isNonSpecialPatternChar(this.tokenIndex+2,"/")}isIdentityTerminator(){return this.isNonSpecialPatternChar(this.tokenIndex,"@")}isPasswordPrefix(){return this.isNonSpecialPatternChar(this.tokenIndex,":")}isPortPrefix(){return this.isNonSpecialPatternChar(this.tokenIndex,":")}isPathnameStart(){return this.isNonSpecialPatternChar(this.tokenIndex,"/")}isSearchPrefix(){if(this.isNonSpecialPatternChar(this.tokenIndex,"?"))return!0;if(this.tokenList[this.tokenIndex].value!=="?")return!1;let t=this.safeToken(this.tokenIndex-1);return t.type!=="NAME"&&t.type!=="REGEX"&&t.type!=="CLOSE"&&t.type!=="ASTERISK"}isHashPrefix(){return this.isNonSpecialPatternChar(this.tokenIndex,"#")}isGroupOpen(){return this.tokenList[this.tokenIndex].type=="OPEN"}isGroupClose(){return this.tokenList[this.tokenIndex].type=="CLOSE"}isIPv6Open(){return this.isNonSpecialPatternChar(this.tokenIndex,"[")}isIPv6Close(){return this.isNonSpecialPatternChar(this.tokenIndex,"]")}makeComponentString(){let t=this.tokenList[this.tokenIndex],e=this.safeToken(this.componentStart).index;return this.input.substring(e,t.index)}computeShouldTreatAsStandardURL(){let t={};Object.assign(t,Tt),t.encodePart=Bc;let e=QP(this.makeComponentString(),void 0,t);this.shouldTreatAsStandardURL=Vd(e)}},Vc=["protocol","username","password","hostname","port","pathname","search","hash"],lt="*";function Md(t,e){if(typeof t!="string")throw new TypeError("parameter 1 is not of type 'string'.");let r=new URL(t,e);return{protocol:r.protocol.substring(0,r.protocol.length-1),username:r.username,password:r.password,hostname:r.hostname,port:r.port,pathname:r.pathname,search:r.search!==""?r.search.substring(1,r.search.length):void 0,hash:r.hash!==""?r.hash.substring(1,r.hash.length):void 0}}function Qe(t,e){return e?kn(t):t}function Hn(t,e,r){let n;if(typeof e.baseURL=="string")try{n=new URL(e.baseURL),t.protocol=Qe(n.protocol.substring(0,n.protocol.length-1),r),t.username=Qe(n.username,r),t.password=Qe(n.password,r),t.hostname=Qe(n.hostname,r),t.port=Qe(n.port,r),t.pathname=Qe(n.pathname,r),t.search=Qe(n.search.substring(1,n.search.length),r),t.hash=Qe(n.hash.substring(1,n.hash.length),r)}catch{throw new TypeError(`invalid baseURL '${e.baseURL}'.`)}if(typeof e.protocol=="string"&&(t.protocol=pC(e.protocol,r)),typeof e.username=="string"&&(t.username=iC(e.username,r)),typeof e.password=="string"&&(t.password=aC(e.password,r)),typeof e.hostname=="string"&&(t.hostname=sC(e.hostname,r)),typeof e.port=="string"&&(t.port=uC(e.port,t.protocol,r)),typeof e.pathname=="string"){if(t.pathname=e.pathname,n&&!tC(t.pathname,r)){let o=n.pathname.lastIndexOf("/");o>=0&&(t.pathname=Qe(n.pathname.substring(0,o+1),r)+t.pathname)}t.pathname=cC(t.pathname,t.protocol,r)}return typeof e.search=="string"&&(t.search=oC(e.search,r)),typeof e.hash=="string"&&(t.hash=nC(e.hash,r)),t}function kn(t){return t.replace(/([+*?:{}()\\])/g,"\\$1")}function AC(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function hC(t,e){e.delimiter??(e.delimiter="/#?"),e.prefixes??(e.prefixes="./"),e.sensitive??(e.sensitive=!1),e.strict??(e.strict=!1),e.end??(e.end=!0),e.start??(e.start=!0),e.endsWith="";let r=".*",n=`[^${AC(e.delimiter)}]+?`,o=/[$_\u200C\u200D\p{ID_Continue}]/u,s="";for(let a=0;a<t.length;++a){let i=t[a];if(i.type===3){if(i.modifier===3){s+=kn(i.value);continue}s+=`{${kn(i.value)}}${Lr(i.modifier)}`;continue}let c=i.hasCustomName(),u=!!i.suffix.length||!!i.prefix.length&&(i.prefix.length!==1||!e.prefixes.includes(i.prefix)),p=a>0?t[a-1]:null,_=a<t.length-1?t[a+1]:null;if(!u&&c&&i.type===1&&i.modifier===3&&_&&!_.prefix.length&&!_.suffix.length)if(_.type===3){let l=_.value.length>0?_.value[0]:"";u=o.test(l)}else u=!_.hasCustomName();if(!u&&!i.prefix.length&&p&&p.type===3){let l=p.value[p.value.length-1];u=e.prefixes.includes(l)}u&&(s+="{"),s+=kn(i.prefix),c&&(s+=`:${i.name}`),i.type===2?s+=`(${i.value})`:i.type===1?c||(s+=`(${n})`):i.type===0&&(!c&&(!p||p.type===3||p.modifier!==3||u||i.prefix!=="")?s+="*":s+=`(${r})`),i.type===1&&c&&i.suffix.length&&o.test(i.suffix[0])&&(s+="\\"),s+=kn(i.suffix),u&&(s+="}"),i.modifier!==3&&(s+=Lr(i.modifier))}return s}var zs=class{constructor(t={},e,r){this.regexp={},this.names={},this.component_pattern={},this.parts={};try{let n;if(typeof e=="string"?n=e:r=e,typeof t=="string"){let i=new dC(t);if(i.parse(),t=i.result,n===void 0&&typeof t.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");t.baseURL=n}else{if(!t||typeof t!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(n)throw new TypeError("parameter 1 is not of type 'string'.")}typeof r>"u"&&(r={ignoreCase:!1});let o={ignoreCase:r.ignoreCase===!0},s={pathname:lt,protocol:lt,username:lt,password:lt,hostname:lt,port:lt,search:lt,hash:lt};this.pattern=Hn(s,t,!0),Gd(this.pattern.protocol)===this.pattern.port&&(this.pattern.port="");let a;for(a of Vc){if(!(a in this.pattern))continue;let i={},c=this.pattern[a];switch(this.names[a]=[],a){case"protocol":Object.assign(i,Tt),i.encodePart=Bc;break;case"username":Object.assign(i,Tt),i.encodePart=EC;break;case"password":Object.assign(i,Tt),i.encodePart=_C;break;case"hostname":Object.assign(i,ZP),bd(c)?i.encodePart=Fd:i.encodePart=Bd;break;case"port":Object.assign(i,Tt),i.encodePart=Hd;break;case"pathname":Vd(this.regexp.protocol)?(Object.assign(i,eC,o),i.encodePart=lC):(Object.assign(i,Tt,o),i.encodePart=TC);break;case"search":Object.assign(i,Tt,o),i.encodePart=SC;break;case"hash":Object.assign(i,Tt,o),i.encodePart=fC;break}try{this.parts[a]=yd(c,i),this.regexp[a]=Dd(this.parts[a],this.names[a],i),this.component_pattern[a]=hC(this.parts[a],i)}catch{throw new TypeError(`invalid ${a} pattern '${this.pattern[a]}'.`)}}}catch(n){throw new TypeError(`Failed to construct 'URLPattern': ${n.message}`)}}test(t={},e){let r={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return!1;try{typeof t=="object"?r=Hn(r,t,!1):r=Hn(r,Md(t,e),!1)}catch{return!1}let n;for(n of Vc)if(!this.regexp[n].exec(r[n]))return!1;return!0}exec(t={},e){let r={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return;try{typeof t=="object"?r=Hn(r,t,!1):r=Hn(r,Md(t,e),!1)}catch{return null}let n={};e?n.inputs=[t,e]:n.inputs=[t];let o;for(o of Vc){let s=this.regexp[o].exec(r[o]);if(!s)return null;let a={};for(let[i,c]of this.names[o].entries())if(typeof c=="string"||typeof c=="number"){let u=s[i+1];a[c]=u}n[o]={input:r[o]??"",groups:a}}return n}static compareComponent(t,e,r){let n=(i,c)=>{for(let u of["type","modifier","prefix","value","suffix"]){if(i[u]<c[u])return-1;if(i[u]===c[u])continue;return 1}return 0},o=new $n(3,"","","","",3),s=new $n(0,"","","","",3),a=(i,c)=>{let u=0;for(;u<Math.min(i.length,c.length);++u){let p=n(i[u],c[u]);if(p)return p}return i.length===c.length?0:n(i[u]??o,c[u]??o)};return!e.component_pattern[t]&&!r.component_pattern[t]?0:e.component_pattern[t]&&!r.component_pattern[t]?a(e.parts[t],[s]):!e.component_pattern[t]&&r.component_pattern[t]?a([s],r.parts[t]):a(e.parts[t],r.parts[t])}get protocol(){return this.component_pattern.protocol}get username(){return this.component_pattern.username}get password(){return this.component_pattern.password}get hostname(){return this.component_pattern.hostname}get port(){return this.component_pattern.port}get pathname(){return this.component_pattern.pathname}get search(){return this.component_pattern.search}get hash(){return this.component_pattern.hash}};globalThis.URLPattern||(globalThis.URLPattern=zs);var kd=(t,e)=>{var a;if(t===void 0)return{};let r=e.endsWith("/")?e.slice(0,-1):e,o=(a=new zs({pathname:t,baseURL:r}).exec(r))==null?void 0:a.pathname.groups;return o?Object.entries(o).reduce((i,[c,u])=>u===void 0?i:{...i,[c]:u},{}):{}};var Js=t=>t.headers.get(Ad)||"";import{env as mC}from"process";var $d=()=>({region:mC.AWS_REGION});import{env as Fc}from"process";var Yd=()=>({id:Fc.SITE_ID,name:Fc.SITE_NAME,url:Fc.URL});var RC=typeof Response<"u"&&typeof Response.json=="function"?t=>Response.json(t):t=>new Response(JSON.stringify(t),{headers:{"content-type":"application/json"}}),qd=(t,e)=>{let r={},n=t[Gn];try{r=kd(n,t.url)}catch{console.log(`Could not parse function route ${n}.`)}let o={enqueuedPromises:new Set};return{context:{account:js(t),cookies:e.getPublicInterface(),deploy:Ks(t.headers),flags:Nd(t),path:n,geo:Cd(t.headers.get(_d)),ip:Ld(t.headers.get(Ed)),json:RC,log:console.log,next:()=>{throw new Error("`context.next` is not implemented for serverless functions")},params:r,requestId:Js(t),rewrite:a=>{let i=gC(a,t.url);return vC(i)},server:$d(),site:Yd(),url:new URL(t.url),waitUntil:function(i){if(arguments.length===0)throw new TypeError("waitUntil: At least 1 argument required, but only 0 passed");let c=Promise.resolve(i).catch(u=>console.error(u)).finally(()=>{o.enqueuedPromises.delete(c)});o.enqueuedPromises.add(c)}},state:o}},gC=(t,e)=>{if(t instanceof URL)return t;if(t.startsWith("/")){let r=new URL(e);return r.pathname=t,r}return new URL(t)},vC=async t=>await fetch(t);import Kd from"assert";function jd(t){function e(u,p=2){return u.padStart(p,"0")}let r=e(t.getUTCDate().toString()),n=e(t.getUTCHours().toString()),o=e(t.getUTCMinutes().toString()),s=e(t.getUTCSeconds().toString()),a=t.getUTCFullYear(),i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${i[t.getUTCDay()]}, ${r} ${c[t.getUTCMonth()]} ${a} ${n}:${o}:${s} GMT`}var OC=/^(?=[\u0020-\u007E]*$)[^()@<>,;:\\"[\]?={}\s]+$/;function NC(t){if(!t.name)return"";let e=[];if(PC(t.name),LC(t.name,t.value),e.push(`${t.name}=${t.value}`),t.name.startsWith("__Secure")&&(t.secure=!0),t.name.startsWith("__Host")&&(t.path="/",t.secure=!0,delete t.domain),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&Number.isInteger(t.maxAge)&&(Kd(t.maxAge>=0,"Max-Age must be an integer superior or equal to 0"),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(IC(t.domain),e.push(`Domain=${t.domain}`)),t.sameSite&&e.push(`SameSite=${t.sameSite}`),t.path&&(CC(t.path),e.push(`Path=${t.path}`)),t.expires){let{expires:r}=t,n=jd(typeof r=="number"?new Date(r):r);e.push(`Expires=${n}`)}return t.unparsed&&e.push(t.unparsed.join("; ")),e.join("; ")}function PC(t){if(t&&!OC.test(t))throw new TypeError(`Invalid cookie name: "${t}".`)}function CC(t){if(t!=null)for(let e=0;e<t.length;e++){let r=t.charAt(e);if(r<" "||r>"~"||r==";")throw new Error(`${t}: Invalid cookie path char '${r}'`)}}function LC(t,e){if(!(e==null||t==null))for(let r=0;r<e.length;r++){let n=e.charAt(r);if(n<"!"||n=='"'||n==","||n==";"||n=="\\"||n=="\x7F")throw new Error(`RFC2616 cookie '${t}' cannot contain character '${n}'`);if(n>"\x80")throw new Error(`RFC2616 cookie '${t}' can only have US-ASCII chars as value${n.charCodeAt(0).toString(16)}`)}}function IC(t){if(t==null)return;let e=t.charAt(0),r=t.charAt(t.length-1);if(e=="-"||r=="."||r=="-")throw new Error(`Invalid first/last char in cookie domain: ${t}`)}function Xd(t){let e=t.get("Cookie");if(e!=null){let r={},n=e.split(";");for(let o of n){let[s,...a]=o.split("=");Kd(s!=null);let i=s.trim();r[i]=a.join("=")}return r}return{}}function Hc(t,e){let r=NC(e);r&&t.append("Set-Cookie",r)}function Wd(t,e,r){Hc(t,Object.assign({name:e,value:"",expires:new Date(0)},r))}var Qs=class{constructor(e){this.ops=[],this.request=e}apply(e){this.ops.forEach(r=>{switch(r.type){case"delete":Wd(e,r.options.name,{domain:r.options.domain,path:r.options.path});break;case"set":Hc(e,r.cookie);break;default:}})}delete(e){let r={path:"/"},n=typeof e=="string"?{name:e}:e;this.ops.push({options:{...r,...n},type:"delete"})}get(e){return Xd(this.request.headers)[e]}getPublicInterface(){return{delete:this.delete.bind(this),get:this.get.bind(this),set:this.set.bind(this)}}set(e,r){let n;if(typeof e=="string"){if(typeof r!="string")throw new TypeError("You must provide the cookie value as a string to 'cookies.set'");n={name:e,value:r}}else n=e;this.ops.push({cookie:n,type:"set"})}};import{Buffer as kc}from"buffer";import MC from"process";var xC="NETLIFY_PURGE_API_TOKEN",yC="NETLIFY_BRANCH",DC="NETLIFY_BLOBS_CONTEXT",zd="NETLIFY_AI_GATEWAY_KEY",Jd="NETLIFY_AI_GATEWAY_URL",UC="/.netlify/ai/",bC=[{name:"OpenAI",key:"OPENAI_API_KEY",url:"OPENAI_BASE_URL"},{name:"Anthropic",key:"ANTHROPIC_API_KEY",url:"ANTHROPIC_BASE_URL"},{name:"Gemini",key:"GEMINI_API_KEY",url:"GOOGLE_GEMINI_BASE_URL"}],wC=(t,e)=>wt(t)?t:`${e}${UC}`,wt=t=>typeof t=="string"&&t.length!==0,VC=(t,e)=>{try{let r=kc.from(e,"base64").toString("utf8"),n=JSON.parse(r),o=t[zd],s=t[Jd],a=wC(n.url,t.URL);t[Jd]=a,t[zd]=n.token;let i=n.envVars||bC;for(let{key:c,url:u}of i){let p=t[c],_=t[u],l=wt(p)&&p!==o,T=wt(_)&&_!==s;!l&&!T&&(t[c]=n.token,t[u]=a)}}catch(r){console.error("An internal error occurred while setting up Netlify AI Gateway:",r)}},GC=(t,e,r)=>{try{let n=kc.from(e,"base64").toString("utf8"),o=JSON.parse(n),s=r.get(fd),a=r.get(Ys);t[DC]=kc.from(JSON.stringify({edgeURL:o.url,uncachedEdgeURL:o.url_uncached,token:o.token,siteID:s,deployID:a,primaryRegion:o.primary_region})).toString("base64")}catch(n){console.error("An internal error occurred while setting up Netlify Blobs:",n)}},Qd=({aiGateway:t,blobs:e,env:r=MC.env,headers:n,invocationMetadata:o,purgeAPIToken:s})=>{wt(t)&&VC(r,t),wt(e)&&GC(r,e,n),wt(s)&&(r[xC]=s),wt(o==null?void 0:o.branch)&&(r[yC]=o.branch)};var Zd=t=>t.headers.get(md)??"";var eA=t=>t.headers.get(Rd)??"";var tA=({awsRequestID:t,req:e,branch:r,functionName:n,accountTier:o,logToken:s})=>{let a=new URL(e.url),i=Js(e),c={aws_req_id:t,aid:js(e).id,branch:r??"",account_tier:o??"",did:Ks(e.headers).id,fn:n??"",host:a.host,log_token:s,method:e.method,nf_req_id:i,ts:Date.now(),path:a.pathname,span_id:Zd(e),req_start_at:eA(e)};wc({fields:c,type:"bootstrap/request"})},$c=({awsRequestID:t,result:e})=>{let r={aws_req_id:t};e instanceof Response?r.status=e.status:e instanceof Error?r.error_message=e.message:r.status=204,wc({fields:r,type:"bootstrap/response"})};import{Buffer as BC}from"buffer";import FC from"process";var rA=({cookies:t,featureFlags:e,requestContext:r,result:n,startTimestamp:o})=>{let s={version:FC.version},a=BC.from(JSON.stringify(s)).toString("base64");if(n instanceof Response){let i=new Headers(n.headers);t.apply(i);let{body:c,status:u}=n,p=e.evaluations;p.size!==0&&i.set(dd,[...p].join(",")),i.set(qs,a),i.set(hd,o.toString());for(let _ of Od(r))i.append(gd,_);return{invocationMetadataHeader:a,response:new Response(c,{headers:i,status:u})}}if(n===void 0)return{invocationMetadataHeader:a};throw new Nr("Function returned an unsupported value. Accepted types are 'Response' or 'undefined'")};var nA=!1,HC=t=>(...e)=>{let[r,n]=e;if(typeof r=="string"&&r.startsWith("/"))try{let o=xe.getStore(),s=o==null?void 0:o.context.url;if(!s)throw new Error("Could not find request in context");let a=new URL(r,s);return t(a,n)}catch{Pr("An error occurred in the patched Response.redirect")}return t(...e)},oA=()=>{nA||(nA=!0,"Response"in globalThis&&Response.redirect&&(Response.redirect=HC(Response.redirect)))};import{Buffer as kC}from"buffer";var sA=(t,e)=>{if(!(t==null||t===""))return e?kC.from(t,"base64"):t};var $C=255,aA=t=>{let e=new Headers;return Object.entries(t).forEach(([r,n])=>{if(n!==void 0)try{e.set(r.toLowerCase(),n)}catch(o){if([...n].every(a=>a.codePointAt(0)<=$C))throw o;console.warn(`Discarded request header '${r}' because it contains non-ASCII characters`)}}),e},iA=t=>{let e={};for(let[r,n]of t.entries())r in e?e[r].push(n):e[r]=[n];return e};import YC from"http";import qC from"https";var jC=globalThis.fetch,cA=t=>{let e=xe.getStore();if(e!=null&&e.cdnLoopHeader){if(t.headersSent){Pr("Headers already sent, cannot add CDN-Loop header");return}t.setHeader("CDN-Loop",e==null?void 0:e.cdnLoopHeader)}};globalThis.fetch=async function(e,r){let n=new Request(e,r),o=new URL(n.url),s=xe.getStore();s!=null&&s.cdnLoopHeader&&n.headers.set("CDN-Loop",s.cdnLoopHeader);let i={start:performance.now(),host:o.host};try{return await jC(n)}finally{i.end=performance.now(),s==null||s.fetchCalls.push(i)}};for(let t of[YC,qC]){let e=t.request;t.get=function(...n){let o=e(...n);return cA(o),o.end(),o},t.request=function(...n){let o=e(...n);return cA(o),o}}var JC=zC(XC),QC=20,ZC=t=>awslambda.streamifyResponse(async(e,r,n)=>{var H,ue;let o=Date.now(),s=n.awsRequestId,{aiGateway:a,blobs:i,body:c,flags:u,headers:p,httpMethod:_,invocationMetadata:l,isBase64Encoded:T,logToken:m,pcToken:R,pcURL:g,rawUrl:w,route:x}=e,v=new Bn(u||{}),y=aA(p),V=sA(c,T),q=v.get("serverless_functions_abort_signal")===!0?AbortSignal.timeout(n.getRemainingTimeInMillis()-QC):void 0,P=new Xs(w,{body:V,headers:y,method:_,signal:q}),I=!$s()&&v.get("serverless_functions_log_metadata")===!0;v.get("serverless_functions_response_redirect_relative")===!0&&oA(),I&&tA({awsRequestID:s,branch:l==null?void 0:l.branch,functionName:l==null?void 0:l.function_name,accountTier:l==null?void 0:l.account_tier,logToken:m,req:P}),Qd({aiGateway:a,blobs:i,headers:y,invocationMetadata:l,purgeAPIToken:(ue=(H=n==null?void 0:n.clientContext)==null?void 0:H.custom)==null?void 0:ue.purge_api_token}),Pd(P,v),x&&(P[Gn]=x),v.get("serverless_functions_wait_event_loop")===!0&&(n.callbackWaitsForEmptyEventLoop=!1);let N=new Qs(P),{context:X,state:h}=qd(P,N),L;P.headers.has("x-nf-enable-tracing")&&(L=await eL(P,X));let j={cacheAPI:pd(w,R,g),cdnLoopHeader:y.get("cdn-loop"),context:X,operationCounter:new ks,fetchCalls:[]},M=()=>rL({funcOrFuncPath:t,requestContext:j,req:P,logMetadata:I,awsRequestID:s,responseStream:r,cookies:N,featureFlags:v,state:h,startTimestamp:o});if(L)try{let{context:$,W3CTraceContextPropagator:Y}=await Promise.resolve().then(()=>(pA(),uA)),te=new Y,De={keys:de=>[...de.keys()],get:(de,Q)=>de.get(Q)||void 0},je=te.extract($.active(),y,De);await $.with(je,M)}finally{await Wc()}else await M()}),eL=async(t,e)=>{let{FetchInstrumentation:r}=await Promise.resolve().then(()=>(_A(),EA));return await td({serviceName:e.site.name||"",serviceVersion:e.deploy.id,deploymentEnvironment:e.deploy.context,siteUrl:e.site.url||"",siteId:e.site.id||"",siteName:e.site.name||"",instrumentations:[new r({skipHeaders:!0})]}),Xc()},lA=t=>t&&typeof t=="object"&&"default"in t?t.default:t,tL=async t=>{let e=0;for(;t.enqueuedPromises.size!==0;)await Promise.allSettled(t.enqueuedPromises),++e>=1e3&&(e=0,await new Promise(r=>{setTimeout(r,0)}))},rL=async({funcOrFuncPath:t,requestContext:e,req:r,logMetadata:n,awsRequestID:o,responseStream:s,cookies:a,featureFlags:i,state:c,startTimestamp:u})=>{try{let p;if(typeof t=="string"){let m=await import(t),R=lA(lA(m));p=await xe.run(e,()=>R(r,e.context))}else p=await xe.run(e,()=>t.default(r,e.context));n&&$c({awsRequestID:o,result:p});let{invocationMetadataHeader:_,response:l}=rA({cookies:a,featureFlags:i,requestContext:e,result:p,startTimestamp:u});if(l instanceof Response){let m={multiValueHeaders:iA(l.headers),statusCode:l.status},R=awslambda.HttpResponseStream.from(s,m);if((i.get("serverless_functions_fix_empty_body")===!0||l.body===null)&&R.write(""),l.body===null){R.end();return}let g=WC.fromWeb(l.body);await JC(g,R);return}let T=awslambda.HttpResponseStream.from(s,{statusCode:204,headers:{[qs]:_}});T.write(""),T.end()}catch(p){throw n&&$c({awsRequestID:o,result:p}),p}finally{try{await tL(c)}catch(p){console.error(p)}}};import Yn from"process";var nL={delete:t=>{delete Yn.env[t]},get:t=>Yn.env[t],has:t=>!!Yn.env[t],set:(t,e)=>{Yn.env[t]=e},toObject:()=>Object.entries(Yn.env).reduce((t,[e,r])=>r===void 0?t:{...t,[e]:r},{})},TA={get context(){let t=xe.getStore();return(t==null?void 0:t.context)??null},env:nL};globalThis.Netlify=TA;var oL=()=>TA;var HB=()=>sL(import.meta.url);export{ZC as getLambdaHandler,oL as getNetlifyGlobal,HB as getPath};
